(self.webpackChunkapril_crm=self.webpackChunkapril_crm||[]).push([[260],{4664:(e,t,r)=>{r.d(t,{T:()=>_,c:()=>b});var n,a,c,l,o,s,u=r(4705),p=r(467),i=r(4756),d=r.n(i),f=r(6266).A.create({baseURL:"https://april-hook.ru/api",withCredentials:!0,headers:{"content-type":"application/json",accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),b={getCollection:(c=(0,p.A)(d().mark((function _callee(e,t,r){var n,a,c,l=arguments;return d().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:if(n=l.length>3&&void 0!==l[3]?l[3]:null,a=null,o.prev=2,n){o.next=9;break}return o.next=6,f[t](e);case 6:o.t0=o.sent,o.next=12;break;case 9:return o.next=11,f[t](e,n);case 11:o.t0=o.sent;case 12:if(!(c=o.t0)){o.next=16;break}return c.data&&0===c.data.resultCode&&c.data[r]&&(a=c.data.isCollection?c.data[r].data:c.data[r]),o.abrupt("return",a);case 16:o.next=21;break;case 18:return o.prev=18,o.t1=o.catch(2),o.abrupt("return",a);case 21:case"end":return o.stop()}}),_callee,null,[[2,18]])}))),function getCollection(e,t,r){return c.apply(this,arguments)}),setCollection:(a=(0,p.A)(d().mark((function _callee2(e,t){var r,n,a;return d().wrap((function _callee2$(c){for(;;)switch(c.prev=c.next){case 0:return r=null,c.prev=1,n=(0,u.A)({},e,t),c.next=5,f.post(e,n);case 5:return(a=c.sent)&&0===a.data.resultCode&&(r=a.data.data),c.abrupt("return",r);case 10:return c.prev=10,c.t0=c.catch(1),c.abrupt("return",r);case 13:case"end":return c.stop()}}),_callee2,null,[[1,10]])}))),function setCollection(e,t){return a.apply(this,arguments)}),service:(n=(0,p.A)(d().mark((function _callee3(e,t,r,n){var a,c;return d().wrap((function _callee3$(l){for(;;)switch(l.prev=l.next){case 0:return a=null,l.prev=1,console.log("hook api"),l.next=5,f[t](e,n);case 5:return c=l.sent,console.log(c),c&&c.data&&0===c.data.resultCode&&(a=c.data[r]),l.abrupt("return",a);case 11:return l.prev=11,l.t0=l.catch(1),l.abrupt("return",a);case 14:case"end":return l.stop()}}),_callee3,null,[[1,11]])}))),function service(e,t,r,a){return n.apply(this,arguments)})},_={create:(s=(0,p.A)(d().mark((function _callee4(e,t,r,n,a,c,l,o,s,u,p,i,b,_){var g,m,v;return d().wrap((function _callee4$(d){for(;;)switch(d.prev=d.next){case 0:return g=null,m={type:e,auth:{domain:t},company_id:r,deadline:n,responsible:a,created:c,name:l,comment:o,crm:s,company:u,smart:p,sale:i,isOneMore:b,placement:_},d.prev=2,d.next=5,f.post("task/warm",m);case 5:return(v=d.sent)&&v.data&&0===v.data.resultCode&&(g=v.data),d.abrupt("return",g);case 10:return d.prev=10,d.t0=d.catch(2),d.abrupt("return",g);case 13:case"end":return d.stop()}}),_callee4,null,[[2,10]])}))),function create(e,t,r,n,a,c,l,o,u,p,i,d,f,b){return s.apply(this,arguments)}),fail:(o=(0,p.A)(d().mark((function _callee5(e,t,r,n,a){var c,l,o;return d().wrap((function _callee5$(s){for(;;)switch(s.prev=s.next){case 0:return c=null,l={auth:{domain:e},company_id:t,placement:r,smart:a,responsible:n},console.log("fail"),console.log(l),s.prev=4,s.next=7,f.post("task/fail",l);case 7:return(o=s.sent)&&o.data&&0===o.data.resultCode&&(c=o.data.result),s.abrupt("return",c);case 12:return s.prev=12,s.t0=s.catch(4),s.abrupt("return",c);case 15:case"end":return s.stop()}}),_callee5,null,[[4,12]])}))),function fail(e,t,r,n,a){return o.apply(this,arguments)}),presentationDone:(l=(0,p.A)(d().mark((function _callee6(e,t,r,n,a,c,l){var o,s,u;return d().wrap((function _callee6$(p){for(;;)switch(p.prev=p.next){case 0:return o=null,s={auth:{domain:e},company_id:t,placement:r,company:a,smart:c,responsibleId:n,isUnplannedPresentation:l},console.log("presentation/done"),console.log(s),p.prev=4,p.next=7,f.post("presentation/done",s);case 7:return(u=p.sent)&&u.data&&0===u.data.resultCode&&(o=u.data.result),p.abrupt("return",o);case 12:return p.prev=12,p.t0=p.catch(4),p.abrupt("return",o);case 15:case"end":return p.stop()}}),_callee6,null,[[4,12]])}))),function presentationDone(e,t,r,n,a,c,o){return l.apply(this,arguments)})}},9002:(e,t,r)=>{r.d(t,{o_:()=>y});var n=r(467),a=r(4705),c=r(4756),l=r.n(c),o=r(8205),s=r(1715),u=r(6266);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,a.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=u.A.create({baseURL:o.R4?"http://localhost:8000/api":"https://april-online.ru/api",withCredentials:!0,headers:(0,a.A)((0,a.A)((0,a.A)({"content-type":"application/json",accept:"application/json"},"accept","application/json"),"X-Requested-With","XMLHttpRequest"),"X-API-KEY","e0336d3b27299e405a344d2475627c5810eab829a4e5c1214e452e20519d5984")});u.A.create({baseURL:o.R4?"http://localhost:8000":"https://april-online.ru",withCredentials:!0,headers:{"content-type":"application/json",accept:"application/json","X-Requested-With":"XMLHttpRequest"}});g=(0,n.A)(l().mark((function _callee3(){var e,t,r;return l().wrap((function _callee3$(n){for(;;)switch(n.prev=n.next){case 0:return e=null,n.prev=1,n.next=4,p.get("profile");case 4:return t=n.sent,(r=t.data)&&(0===r.resultCode?e=r.deal:r.message),n.abrupt("return",e);case 10:return n.prev=10,n.t0=n.catch(1),n.abrupt("return",e);case 13:case"end":return n.stop()}}),_callee3,null,[[1,10]])}))),_=(0,n.A)(l().mark((function _callee4(e){var t,r;return l().wrap((function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:return t=null,n.prev=1,n.next=4,p.post("deal",_objectSpread({},e));case 4:return(r=n.sent)&&(0===r.resultCode?t=r.deal:r.message),n.abrupt("return",t);case 9:return n.prev=9,n.t0=n.catch(1),n.abrupt("return",t);case 12:case"end":return n.stop()}}),_callee4,null,[[1,9]])}))),b=(0,n.A)(l().mark((function _callee5(e,t){var r,n,a;return l().wrap((function _callee5$(c){for(;;)switch(c.prev=c.next){case 0:return r=null,c.prev=1,c.next=4,p.post("getDeal",{dealId:e,domain:t});case 4:return n=c.sent,(a=n.data)&&0===a.resultCode&&(r=a.deal),c.abrupt("return",r);case 10:return c.prev=10,c.t0=c.catch(1),c.abrupt("return",r);case 13:case"end":return c.stop()}}),_callee5,null,[[1,10]])}))),f=(0,n.A)(l().mark((function _callee6(e,t,r,n,a){var c,o,s,u;return l().wrap((function _callee6$(l){for(;;)switch(l.prev=l.next){case 0:return c=null,l.prev=1,l.next=4,p.post("getDescription",{domain:e,userId:t,complect:r,infoblocks:n,groups:a});case 4:if(!(o=l.sent)||!o.data||0!==o.data.resultCode){l.next=9;break}return s=o.data.file,u=o.data.fileBase64,l.abrupt("return",{link:s,file:u});case 9:l.next=14;break;case 11:return l.prev=11,l.t0=l.catch(1),l.abrupt("return",c);case 14:case"end":return l.stop()}}),_callee6,null,[[1,11]])}))),d=(0,n.A)(l().mark((function _callee7(e,t,r,n,a){var c,o;return l().wrap((function _callee7$(l){for(;;)switch(l.prev=l.next){case 0:return c=null,l.prev=1,l.next=4,p.post("get/offer",{domain:e,userId:t,complect:r,infoblocks:n,groups:a});case 4:(o=l.sent)&&o.data&&o.data.resultCode,l.next=11;break;case 8:return l.prev=8,l.t0=l.catch(1),l.abrupt("return",c);case 11:case"end":return l.stop()}}),_callee7,null,[[1,8]])}))),i=(0,n.A)(l().mark((function _callee8(e,t,r){var n,a;return l().wrap((function _callee8$(r){for(;;)switch(r.prev=r.next){case 0:return n=null,r.prev=1,r.next=4,p.post("get/offer",{domain:e,userId:t,complect,infoblocks,groups});case 4:(a=r.sent)&&a.data&&a.data.resultCode,r.next=11;break;case 8:return r.prev=8,r.t0=r.catch(1),r.abrupt("return",n);case 11:case"end":return r.stop()}}),_callee8,null,[[1,8]])})));var i,d,f,b,_,g,m,v,h,w,x,y={getCollection:(h=(0,n.A)(l().mark((function _callee9(e,t,r,n){var a,c;return l().wrap((function _callee9$(l){for(;;)switch(l.prev=l.next){case 0:if(a=null,l.prev=1,n){l.next=8;break}return l.next=5,p[t](e);case 5:l.t0=l.sent,l.next=11;break;case 8:return l.next=10,p[t](e,n);case 10:l.t0=l.sent;case 11:if(!(c=l.t0)){l.next=15;break}return c.data&&0===c.data.resultCode&&c.data[r]&&(a=c.data.isCollection?c.data[r].data:c.data[r]),l.abrupt("return",a);case 15:l.next=20;break;case 17:return l.prev=17,l.t1=l.catch(1),l.abrupt("return",a);case 20:case"end":return l.stop()}}),_callee9,null,[[1,17]])}))),function getCollection(e,t,r,n){return h.apply(this,arguments)}),setCollection:(v=(0,n.A)(l().mark((function _callee10(e,t){var r,n,c;return l().wrap((function _callee10$(l){for(;;)switch(l.prev=l.next){case 0:return r=null,l.prev=1,n=(0,a.A)({},e,t),l.next=5,p.post(e,n);case 5:return(c=l.sent)&&0===c.data.resultCode&&(r=c.data.data),l.abrupt("return",r);case 10:return l.prev=10,l.t0=l.catch(1),l.abrupt("return",r);case 13:case"end":return l.stop()}}),_callee10,null,[[1,10]])}))),function setCollection(e,t){return v.apply(this,arguments)}),service:(m=(0,n.A)(l().mark((function _callee11(e,t,r,n){var a,c;return l().wrap((function _callee11$(l){for(;;)switch(l.prev=l.next){case 0:return a=null,l.prev=1,l.next=4,p[t](e,n);case 4:return(c=l.sent)&&c.data&&(0===c.data.resultCode?a=c.data.data?c.data.data[r]:c.data[r]:1===c.data.resultCode&&(c.data.message?console.log("".concat(r," ").concat(c.data.message)):console.log(c))),l.abrupt("return",a);case 9:return l.prev=9,l.t0=l.catch(1),l.abrupt("return",a);case 12:case"end":return l.stop()}}),_callee11,null,[[1,9]])}))),function service(e,t,r,n){return m.apply(this,arguments)})},A=(w=(0,n.A)(l().mark((function _callee12(e,t,r,n,c,o,u,i,d,f,b,_,g,m,v,h,w,x){var y,A,C,I,k,R,S,O,P,D,E,j;return l().wrap((function _callee12$(l){for(;;)switch(l.prev=l.next){case 0:return C=null,I={FIELDS:(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)({},m.dealName.bitrixId,"".concat(t)),m.assigned.bitrixId,r),m.category.bitrixId,m.category.value),m.stage.bitrixId,m.stage.value),m.opened.bitrixId,m.opened.value),"PROBABILITY",30),"OPPORTUNITY",0),"CURRENCY_ID","RUB"),"UF_CRM_5B39D7C2EC0AB",!0),PARAMS:{REGISTER_SONET_EVENT:"Y"}},k=isNaN(+h.contractSupplyPropSuppliesQuantity)?1:+h.contractSupplyPropSuppliesQuantity,R=w?w.contractConsaltingProp:h.contractConsaltingProp,S=w?w.contractConsaltingComment:h.contractConsaltingComment,O={id:n,fields:(y={},(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(y,g.contract.bitrixId,c),g.companyId.bitrixId,o),g.npa.bitrixId,u.npa),g.la.bitrixId,u.la),g.c.bitrixId,u.c),g.sp.bitrixId,u.sp),g.er.bitrixId,i.er),g.per.bitrixId,i.per),g.erinpac.bitrixId,i.erinpac),g.lt.bitrixId,f.lt),(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(y,g.plt.bitrixId,f.plt),g.ltinpac.bitrixId,f.ltinpac),g.freeBlocks.bitrixId,d),g.consalting.bitrixId,b),g.field_14.bitrixId,_),m.category.bitrixId,m.category.value),m.stage.bitrixId,"C".concat(m.category.value,":NEW"))),PARAMS:{REGISTER_SONET_EVENT:"Y"}},P={id:n,fields:(A={},(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(A,v.complectName.bitrixId,h.name),v.abonementTime.bitrixId,1===h.contractCoefficient?null:h.contractCoefficient),v.consalting.bitrixId,R),v.note2.bitrixId,S),v.hdd.bitrixId,h.contractSupplyProp1?h.contractSupplyProp1:""),v.way.bitrixId,h.contractSupplyProp2?h.contractSupplyProp2:""),v.note.bitrixId,h.contractSupplyPropComment?h.contractSupplyPropComment:""),v.note3.bitrixId,h.contractSupplyPropEmail?h.contractSupplyPropEmail:""),v.supply.bitrixId,h.supplyName?h.supplyName:""),v.supplyForContract.bitrixId,h.contractSupplyName?h.contractSupplyName:""),(0,a.A)((0,a.A)((0,a.A)((0,a.A)(A,v.loginsQuantity.bitrixId,h.contractSupplyPropLoginsQuantity?h.contractSupplyPropLoginsQuantity:""),v.contractSupplyPropSuppliesQuantity.bitrixId,k),v.supplyForContract.bitrixId,h.contractSupplyName),v.field_1.bitrixId,h.quantityForKp))},D=x.map((function(e,t){var r=e.prepayment,a=e.price.current,c=e.price.default,l=c-a;return{id:e.id||e.number,priceNetto:c,price:a,discountSum:l,discountTypeId:1,ownerId:n,ownerType:"D",productName:"".concat(e.name," ").concat(e.supply.name),quantity:e.price.quantity||r,customized:"Y",supply:e.supplyName,measureCode:e.price.measure.code,measureId:e.price.measure.id,sort:t}})),E={domain:e,dealId:n,setDealData:I,updateDealInfoblocksData:O,updateDealContractData:P,setProductRowsData:{ownerType:"D",ownerId:n,productRows:D},updateProductRowsData:{id:null,fields:{priceNetto:null,price:null,discountSum:null,discountTypeId:1}}},l.prev=11,l.next=14,p[s.b.POST]("konstructor/bitrix/deal/update",E);case 14:return(j=l.sent)&&j.data&&(0===j.data.resultCode?j.data.data&&(C=j.data.data.dealId):1===j.data.resultCode&&(j.data.message?console.log("".concat(j.data.message)):console.log(j))),l.abrupt("return",C);case 19:return l.prev=19,l.t0=l.catch(11),l.abrupt("return",C);case 22:case"end":return l.stop()}}),_callee12,null,[[11,19]])}))),u.A.create({baseURL:"http://localhost:8000/api",withCredentials:!0,headers:{"content-type":"application/json",accept:"application/json","X-Requested-With":"XMLHttpRequest"}}));x=(0,n.A)(l().mark((function _callee13(e,t,r,n){var a,c;return l().wrap((function _callee13$(l){for(;;)switch(l.prev=l.next){case 0:return a=null,l.prev=1,l.next=4,A[t](e,n);case 4:return(c=l.sent)&&c.data&&(0===c.data.resultCode?a=c.data.data?c.data.data[r]:c.data[r]:1===c.data.resultCode&&(c.data.message?console.log("".concat(r," ").concat(c.data.message)):console.log(c))),l.abrupt("return",a);case 9:return l.prev=9,l.t0=l.catch(1),l.abrupt("return",a);case 12:case"end":return l.stop()}}),_callee13,null,[[1,9]])})))},4003:(e,t,r)=>{r.d(t,{l:()=>A});var n=r(467),a=r(4705),c=r(4756),l=r.n(c),o=r(3953);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,a.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s,u,p,i,d,f,b,_,g,m,v,h,w,x,y,A={getMethod:(y=(0,n.A)(l().mark((function _callee(e,t){var r,n;return l().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return r=null,a.prev=1,a.next=4,o.g9(e,t);case 4:return(n=a.sent)&&n.answer&&n.answer.result&&(r=n.answer.result),a.abrupt("return",r);case 9:return a.prev=9,a.t0=a.catch(1),console.log("error"),console.log(dealResponse),console.log(a.t0),a.abrupt("return",r);case 15:case"end":return a.stop()}}),_callee,null,[[1,9]])}))),function getMethod(e,t){return y.apply(this,arguments)}),getPlacement:(x=(0,n.A)(l().mark((function _callee2(){var e;return l().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.ot.info();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),_callee2)}))),function getPlacement(){return x.apply(this,arguments)}),getCompanyId:(w=(0,n.A)(l().mark((function _callee3(){var e,t;return l().wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,A.getPlacement();case 3:return e=r.sent,t=e.options.ID,r.abrupt("return",Number(t));case 8:return r.prev=8,r.t0=r.catch(0),r.abrupt("return",null);case 11:case"end":return r.stop()}}),_callee3,null,[[0,8]])}))),function getCompanyId(){return w.apply(this,arguments)}),getCurrentUserId:(h=(0,n.A)(l().mark((function _callee4(e){var t,r;return l().wrap((function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:return t=null,n.next=3,(0,o.g9)("crm.company.get",{id:e});case 3:return r=(r=n.sent).answer&&r.answer.result,t=r?r.ASSIGNED_BY_ID:null,n.abrupt("return",t);case 7:case"end":return n.stop()}}),_callee4)}))),function getCurrentUserId(e){return h.apply(this,arguments)}),getCurrentUser:(v=(0,n.A)(l().mark((function _callee5(){var e,t;return l().wrap((function _callee5$(r){for(;;)switch(r.prev=r.next){case 0:return e=null,r.prev=1,r.next=4,(0,o.g9)("user.current");case 4:return(t=r.sent)&&t.answer&&t.answer.result&&t.answer.result.ID&&(e=t.answer.result),r.abrupt("return",e);case 9:return r.prev=9,r.t0=r.catch(1),console.log(r.t0),r.abrupt("return",null);case 13:case"end":return r.stop()}}),_callee5,null,[[1,9]])}))),function getCurrentUser(){return v.apply(this,arguments)}),getResize:(m=(0,n.A)(l().mark((function _callee6(){var e,t;return l().wrap((function _callee6$(r){for(;;)switch(r.prev=r.next){case 0:return e=.9*window.screen.height,t=.73*window.screen.width,r.next=5,(0,o.Ru)(t,e);case 5:r.sent;case 6:case"end":return r.stop()}}),_callee6)}))),function getResize(){return m.apply(this,arguments)}),getResizeCalling:(g=(0,n.A)(l().mark((function _callee7(){return l().wrap((function _callee7$(e){for(;;)switch(e.prev=e.next){case 0:return window.screen.height,window.screen.width,e.next=5,(0,o.eQ)();case 5:e.sent;case 6:case"end":return e.stop()}}),_callee7)}))),function getResizeCalling(){return g.apply(this,arguments)}),getScroll:(_=(0,n.A)(l().mark((function _callee8(){var e,t;return l().wrap((function _callee8$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,console.log("scroll"),r.next=4,(0,o.TC)();case 4:return e=r.sent,console.log(e),r.next=8,(0,o.OO)(100);case 8:t=r.sent,console.log(t),r.next=14;break;case 12:r.prev=12,r.t0=r.catch(0);case 14:case"end":return r.stop()}}),_callee8,null,[[0,12]])}))),function getScroll(){return _.apply(this,arguments)}),getLead:(b=(0,n.A)(l().mark((function _callee9(e){var t,r;return l().wrap((function _callee9$(n){for(;;)switch(n.prev=n.next){case 0:return t=null,console.log("crm.lead.get"),n.prev=2,n.next=5,o.g9("crm.lead.get",{id:e});case 5:return(r=n.sent)&&r.answer&&r.answer.result&&(t=r.answer.result,console.log(t)),n.abrupt("return",t);case 10:return n.prev=10,n.t0=n.catch(2),console.log("error"),console.log(dealResponse),console.log(n.t0),n.abrupt("return",t);case 16:case"end":return n.stop()}}),_callee9,null,[[2,10]])}))),function getLead(e){return b.apply(this,arguments)}),getCompany:(f=(0,n.A)(l().mark((function _callee10(e){var t,r;return l().wrap((function _callee10$(n){for(;;)switch(n.prev=n.next){case 0:return t=null,console.log("crm.company.get"),n.prev=2,n.next=5,o.g9("crm.company.get",{id:e,select:["TITLE","ID","UF_CRM_1706007840","UF_CRM_1706007882","UF_CRM_1706007856"]});case 5:return(r=n.sent)&&r.answer&&r.answer.result&&(t=r.answer.result,console.log(t)),n.abrupt("return",t);case 10:return n.prev=10,n.t0=n.catch(2),console.log("error"),console.log(dealResponse),console.log(n.t0),n.abrupt("return",t);case 16:case"end":return n.stop()}}),_callee10,null,[[2,10]])}))),function getCompany(e){return f.apply(this,arguments)}),getDeal:(d=(0,n.A)(l().mark((function _callee11(e){var t,r;return l().wrap((function _callee11$(n){for(;;)switch(n.prev=n.next){case 0:return t=null,n.prev=1,n.next=4,o.g9("crm.deal.get",{id:e,select:["TITLE","COMPANY_ID","ID","UF_CRM_1695372881","UF_CRM_1695373462","UF_CRM_1695373326"]});case 4:return(r=n.sent)&&r.answer&&r.answer.result&&(t=r.answer.result),n.abrupt("return",t);case 9:return n.prev=9,n.t0=n.catch(1),console.log("error"),console.log(dealResponse),console.log(n.t0),n.abrupt("return",t);case 15:case"end":return n.stop()}}),_callee11,null,[[1,9]])}))),function getDeal(e){return d.apply(this,arguments)}),getDealAndCompany:(i=(0,n.A)(l().mark((function _callee12(){var e,t,r,n,a=arguments;return l().wrap((function _callee12$(c){for(;;)switch(c.prev=c.next){case 0:if(e=a.length>0&&void 0!==a[0]?a[0]:null,t=a.length>1&&void 0!==a[1]?a[1]:null,c.prev=2,r=null,n=null,t||!e){c.next=16;break}return c.next=8,A.getDeal(e);case 8:if(!(r=c.sent)||!r.COMPANY_ID){c.next=14;break}return t=r.COMPANY_ID,c.next=13,A.getCompany(t);case 13:n=c.sent;case 14:c.next=21;break;case 16:if(!t||e){c.next=21;break}return c.next=19,A.getCompany(t);case 19:n=c.sent,r&&r.COMPANY_ID&&(t=r.COMPANY_ID);case 21:return console.log("dealResult"),console.log(r),console.log("currentCompanyId"),console.log(t),console.log("Результаты batch запроса:"),console.log("Компания:",n),console.log("Сделка:",r),c.abrupt("return",{company:n,deal:r});case 31:return c.prev=31,c.t0=c.catch(2),console.error("Произошла ошибка при выполнении запроса",c.t0),c.abrupt("return",{company:null,deal:null});case 35:case"end":return c.stop()}}),_callee12,null,[[2,31]])}))),function getDealAndCompany(){return i.apply(this,arguments)}),getSmart:(p=(0,n.A)(l().mark((function _callee13(e){var t,r;return l().wrap((function _callee13$(n){for(;;)switch(n.prev=n.next){case 0:return t=null,$method="/crm.item.list.json",$data={entityTypeId:e,filter:{"=assignedById":$userId,COMPANY_ID:$companyId}},n.prev=3,n.next=6,o.g9("crm.item.list",{id:dealId});case 6:return(r=n.sent)&&r.answer&&r.answer.result&&(t=r.answer.result.items),n.abrupt("return",t);case 11:return n.prev=11,n.t0=n.catch(3),console.log("error"),console.log(dealResponse),console.log(n.t0),n.abrupt("return",t);case 17:case"end":return n.stop()}}),_callee13,null,[[3,11]])}))),function getSmart(e){return p.apply(this,arguments)}),getDomain:(u=(0,n.A)(l().mark((function _callee14(){var e;return l().wrap((function _callee14$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.xI();case 2:return t.sent,t.next=5,o.FB();case 5:return e=t.sent,t.abrupt("return",e);case 7:case"end":return t.stop()}}),_callee14)}))),function getDomain(){return u.apply(this,arguments)}),updateRecipient:(s=(0,n.A)(l().mark((function _callee15(e,t,r,n,a){var c,s,u,p,i,d,f,b,_;return l().wrap((function _callee15$(l){for(;;)switch(l.prev=l.next){case 0:if(!e&&!t){l.next=28;break}if(!(r||n||a)){l.next=28;break}return c={},s={},r&&(c.UF_CRM_1706007840=r,s.UF_CRM_1695372881=r),n&&(c.UF_CRM_1706007856=n,s.UF_CRM_1695373326=n),a&&(c.UF_CRM_1706007882=a,s.UF_CRM_1695373462=a),u={ID:e,FIELDS:_objectSpread({},s),PARAMS:{REGISTER_SONET_EVENT:"Y"}},p={ID:t,FIELDS:_objectSpread({},c),PARAMS:{REGISTER_SONET_EVENT:"Y"}},i="crm.company.update",d=null,f=null,l.prev=13,l.next=16,o.g9("crm.deal.update",_objectSpread({},u));case 16:return b=l.sent,l.next=19,o.g9(i,_objectSpread({},p));case 19:return _=l.sent,d=b.answer&&b.answer.result,f=_.answer&&_.answer.result,l.abrupt("return",{deal:d,company:f});case 25:return l.prev=25,l.t0=l.catch(13),l.abrupt("return",d);case 28:case"end":return l.stop()}}),_callee15,null,[[13,25]])}))),function updateRecipient(e,t,r,n,a){return s.apply(this,arguments)})}},1715:(e,t,r)=>{var n,a;r.d(t,{b:()=>n}),function(e){e.GET="get",e.POST="post",e.PUT="put",e.DELETE="delete"}(n||(n={})),function(e){e.ENTITY="entity",e.ENTITIES="entities"}(a||(a={}))},9508:(e,t,r)=>{var n;r.d(t,{O:()=>n}),function(e){e.SALES="sales",e.CUP="cup",e.TMC="tmc",e.SERVICE="service",e.EDU="edu",e.GENERAL="general"}(n||(n={}))}},e=>{e.O(0,[227,610,51,996,248,644,484,214],(()=>{return t=6974,e(e.s=t);var t}));e.O()}]);