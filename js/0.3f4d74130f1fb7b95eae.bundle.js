(self.webpackChunkapril_kp=self.webpackChunkapril_kp||[]).push([[0],{2e3:(e,t,r)=>{r.r(t),r.d(t,{default:()=>te});var a=r(885),n=r(6706),c=r(350),l=r(7294),o=r(3379),i=r.n(o),m=r(7795),s=r.n(m),u=r(569),M=r.n(u),g=r(3565),N=r.n(g),d=r(9216),E=r.n(d),D=r(4589),p=r.n(D),I=r(5825),j={};j.styleTagTransform=p(),j.setAttributes=N(),j.insert=M().bind(null,"head"),j.domAPI=s(),j.insertStyleElement=E();i()(I.Z,j);I.Z&&I.Z.locals&&I.Z.locals;var f=r(3637),y=r(5773),x=r(5305),z=r(3280),b=r(3694),A=r(6926),T=r(7896),O=r(9573),h=r(6011),C=r(8732),Z=r(9886),k=r(4610),v=r(9816),S=r(2982),L=r(6495);const Y=function getChartColorsArray(e){return(e=JSON.parse(e)).map((function(e){var t=e.replace(" ","");if(-1===t.indexOf(",")){var r=getComputedStyle(document.documentElement).getPropertyValue(t);return-1!==r.indexOf("#")&&(r=r.replace(" ","")),r||t}var a=e.split(",");if(2===a.length){var n=getComputedStyle(document.documentElement).getPropertyValue(a[0]);return n="rgba("+n+","+a[1]+")"}return t}))};var w=r(1560);w.kL.register.apply(w.kL,(0,S.Z)(w.zX));const Q=function KPIChart(e){var t=e.dataColors,r=e.report,a=Y(t),n=[],c=r[0].kpi.map((function(e){return e.action})),o=r.map((function(e){return e.userName}));r[0].kpi.forEach((function(e,t){var l=0,o=[];r.forEach((function(t){var r;(r=t.kpi.find((function(t){return t.action==e.action&&c.includes(t.action)})))&&(l+=r.count,o.push(r.count))})),l&&n.push({label:e.action,backgroundColor:a[t+1],borderColor:a[t+1],borderWidth:1,hoverBackgroundColor:a[t+1],hoverBorderColor:a[t+1],data:o})}));var i={labels:o,datasets:n};return l.createElement(L.$Q,{width:751,height:300,data:i,options:{scales:{x:{barPercentage:10.9},y:{}}}})};var U=r(7294);const P=function GraficBoard(e){var t=e.report,r=e.isCallings,a=e.size,n=0;return t.forEach((function(e){var t=e.kpi.find((function(e){return"Презентация проведена"==e.action}));t&&(n+=t.count)})),(n/t.length).toFixed(0),U.createElement(x.Z,{lg:a},U.createElement(Z.Z,null,U.createElement(k.Z,null,U.createElement(v.Z,{className:"mb-4"},"Планирование и KPI"),U.createElement("div",{id:"bar",className:"chartjs-render-monitor"},U.createElement(Q,{dataColors:'[\r "rgba(46, 121, 234, 1)", \r "rgba(255, 113, 33, 1)", \r "rgba(151, 103, 200, 1)", \r "rgba(255, 113, 33, 1)", \r "rgb(104, 54, 153)", \r "rgba(23, 80, 165, 1)", \r "rgba(231, 53, 74, 0.8)", \r "rgba(255, 113, 33, 1)", \r "rgba(255, 13, 334, 0.8)", \r "rgba(104, 54, 253, 0.8)",\r "rgba(255, 113, 33, 1)", \r "rgba(218, 255, 33, 0.8)", \r "rgba(96, 33, 255, 0.8)", \r "rgba(151, 103, 200, 0.8)" ]',report:t,isCallings:r})))))};const J="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxnIGlkPSImIzIwODsmIzE1MjsmIzIwODsmIzE4NjsmIzIwODsmIzE5MDsmIzIwODsmIzE4OTsmIzIwODsmIzE4NjsmIzIwODsmIzE3NjsgJiMyMDg7JiMxODA7JiMyMDg7JiMxODc7JiMyMDk7JiMxNDM7ICYjMjA5OyYjMTQxOyYjMjA4OyYjMTg2OyYjMjA5OyYjMTI5OyYjMjA4OyYjMTkxOyYjMjA4OyYjMTkwOyYjMjA5OyYjMTI4OyYjMjA5OyYjMTMwOyYjMjA4OyYjMTc2OyI+DQo8cGF0aCBpZD0iUHJlLUljb24iIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTAgMS41QzUuMzA1MTQgMS41IDEuNSA1LjMwNTE0IDEuNSAxMEMxLjUgMTQuNjk0OSA1LjMwNTE0IDE4LjUgMTAgMTguNUMxNC42OTQ5IDE4LjUgMTguNSAxNC42OTQ5IDE4LjUgMTBDMTguNSA1LjMwNTE0IDE0LjY5NDkgMS41IDEwIDEuNVpNMC41IDEwQzAuNSA0Ljc1Mjg2IDQuNzUyODYgMC41IDEwIDAuNUMxNS4yNDcxIDAuNSAxOS41IDQuNzUyODYgMTkuNSAxMEMxOS41IDE1LjI0NzEgMTUuMjQ3MSAxOS41IDEwIDE5LjVDNC43NTI4NiAxOS41IDAuNSAxNS4yNDcxIDAuNSAxMFpNMTQuNDc4NiA3LjAyMTQ1QzE0LjY3MzggNy4yMTY3MSAxNC42NzM4IDcuNTMzMjkgMTQuNDc4NiA3LjcyODU1TDguODUzNTUgMTMuMzUzNkM4Ljc1NjcyIDEzLjQ1MDQgOC42MjQ0MSAxMy41MDMzIDguNDg3NTEgMTMuNDk5OEM4LjM1MDYxIDEzLjQ5NjQgOC4yMjExMSAxMy40MzcgOC4xMjkyMyAxMy4zMzU1TDUuNzU0MjMgMTAuNzEwNUM1LjU2ODk2IDEwLjUwNTcgNS41ODQ3NyAxMC4xODk1IDUuNzg5NTQgMTAuMDA0MkM1Ljk5NDMxIDkuODE4OTYgNi4zMTA1IDkuODM0NzcgNi40OTU3NyAxMC4wMzk1TDguNTE4MTIgMTIuMjc0OEwxMy43NzE0IDcuMDIxNDVDMTMuOTY2NyA2LjgyNjE4IDE0LjI4MzMgNi44MjYxOCAxNC40Nzg2IDcuMDIxNDVaIiBmaWxsPSIjNzM3QzhDIi8+DQo8L2c+DQo8L3N2Zz4NCg==";const V="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxnIGlkPSImIzIwODsmIzE1MjsmIzIwODsmIzE4NjsmIzIwODsmIzE5MDsmIzIwODsmIzE4OTsmIzIwODsmIzE4NjsmIzIwODsmIzE3NjsgJiMyMDg7JiMxODA7JiMyMDg7JiMxODc7JiMyMDk7JiMxNDM7ICYjMjA5OyYjMTQxOyYjMjA4OyYjMTg2OyYjMjA5OyYjMTI5OyYjMjA4OyYjMTkxOyYjMjA4OyYjMTkwOyYjMjA5OyYjMTI4OyYjMjA5OyYjMTMwOyYjMjA4OyYjMTc2OyI+DQo8cGF0aCBpZD0iUHJlLUljb24iIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTAgMS41QzUuMzA1MTQgMS41IDEuNSA1LjMwNTE0IDEuNSAxMEMxLjUgMTQuNjk0OSA1LjMwNTE0IDE4LjUgMTAgMTguNUMxNC42OTQ5IDE4LjUgMTguNSAxNC42OTQ5IDE4LjUgMTBDMTguNSA1LjMwNTE0IDE0LjY5NDkgMS41IDEwIDEuNVpNMC41IDEwQzAuNSA0Ljc1Mjg2IDQuNzUyODYgMC41IDEwIDAuNUMxNS4yNDcxIDAuNSAxOS41IDQuNzUyODYgMTkuNSAxMEMxOS41IDE1LjI0NzEgMTUuMjQ3MSAxOS41IDEwIDE5LjVDNC43NTI4NiAxOS41IDAuNSAxNS4yNDcxIDAuNSAxMFpNNi44MTYzNyA2LjgxNjQ1QzcuMDExNjMgNi42MjExOSA3LjMyODIxIDYuNjIxMTkgNy41MjM0NyA2LjgxNjQ1TDkuOTk5OTIgOS4yOTI4OUwxMi40NzY0IDYuODE2NDVDMTIuNjcxNiA2LjYyMTE5IDEyLjk4ODIgNi42MjExOSAxMy4xODM1IDYuODE2NDVDMTMuMzc4NyA3LjAxMTcxIDEzLjM3ODcgNy4zMjgyOSAxMy4xODM1IDcuNTIzNTVMMTAuNzA3IDEwTDEzLjE4MzUgMTIuNDc2NEMxMy4zNzg3IDEyLjY3MTcgMTMuMzc4NyAxMi45ODgzIDEzLjE4MzUgMTMuMTgzNkMxMi45ODgyIDEzLjM3ODggMTIuNjcxNiAxMy4zNzg4IDEyLjQ3NjQgMTMuMTgzNkw5Ljk5OTkyIDEwLjcwNzFMNy41MjM0NyAxMy4xODM2QzcuMzI4MjEgMTMuMzc4OCA3LjAxMTYzIDEzLjM3ODggNi44MTYzNyAxMy4xODM2QzYuNjIxMTEgMTIuOTg4MyA2LjYyMTExIDEyLjY3MTcgNi44MTYzNyAxMi40NzY0TDkuMjkyODEgMTBMNi44MTYzNyA3LjUyMzU1QzYuNjIxMTEgNy4zMjgyOSA2LjYyMTExIDcuMDExNzEgNi44MTYzNyA2LjgxNjQ1WiIgZmlsbD0iIzczN0M4QyIvPg0KPC9nPg0KPC9zdmc+DQo=";var F=r(7874),B=r(9404),R=function getRandomColor(e){void 0===e&&(e=null);var t=e,r=["rgba(14, 201, 111, 0.2)","rgba(46, 121, 234, 0.2)","rgba(23, 80, 165, 0.3)","rgba(255, 113, 33, 0.3)","rgba(151, 103, 200, 0.4)","rgba(104, 54, 153, 0.4)","rgba(40, 104, 212, 0.5)","rgba(23, 80, 165, 0.5)","rgba(255, 113, 33, 0.6)","rgba(151, 103, 200, 0.6)","rgba(104, 54, 153, 0.7)"];return t||0===t||(t=Math.floor(Math.random()*r.length)),r[t]};w.kL.register.apply(w.kL,(0,S.Z)(w.zX));const G=function VoximplantChart(e){var t=e.dataColors,r=e.report,a=(e.part,Y(t)),n=[],c=r[0].callings.map((function(e){return e.action})),o=r.map((function(e){return e.userName}));r[0].callings.forEach((function(e,t){var l=0,o=[];r.forEach((function(t){var r;(r=t.callings.find((function(t){return t.action==e.action&&c.includes(t.action)})))&&(l+=r.count,o.push(r.count))})),l&&n.push({label:e.action,backgroundColor:a[t],borderColor:a[t],borderWidth:1,hoverBackgroundColor:a[t],hoverBorderColor:a[t],data:o})}));var i={labels:o,datasets:n};return l.createElement(L.$Q,{width:751,height:300,data:i,options:{scales:{x:{barPercentage:.9},y:{}}}})};var W=r(7294);const H=function VoximplantBoard(e){var t=e.departament,r=e.report,n=e.size,c=0,o=(0,l.useState)(null),i=(0,a.Z)(o,2),m=(i[0],i[1],(0,l.useState)(t.items)),s=(0,a.Z)(m,2);s[0],s[1];return r.forEach((function(e){var t=e.kpi.find((function(e){return"Презентация проведена"==e.action}));t&&(c+=t.count)})),(c/r.length).toFixed(0),W.createElement(x.Z,{lg:n},W.createElement(Z.Z,null,W.createElement(k.Z,null,W.createElement(v.Z,{className:"mb-4"},"Фактические звонки"),W.createElement("div",{id:"bar",className:"chartjs-render-monitor"},W.createElement(G,{dataColors:'[\r "rgba(104, 54, 153, 0.8)", \r "rgba(255, 13, 334, 0.8)", \r "rgba(104, 54, 253, 0.8)",\r "rgba(14, 201, 111, 0.8)", \r "rgba(20, 191, 213, 0.8)", \r "rgba(14, 201, 111, 0.8)", \r "rgba(104, 54, 153, 0.8)", \r "rgba(255, 13, 334, 0.8)", \r "rgba(104, 54, 253, 0.8)",\r "rgba(151, 103, 200, 0.8)",\r "rgba(20, 191, 213, 0.8)", \r "rgba(14, 201, 111, 0.8)"]',report:r,part:1})))))};w.kL.register.apply(w.kL,(0,S.Z)(w.zX));r(7294);var X=function ReportTable(e){var t=e.report;if(t&&t.length){var r=t.map((function(e,t){return l.createElement(b.Z,{key:"report-".concat(e.user.ID,"-").concat(t),sx:{"&:last-child td, &:last-child th":{border:0}}},l.createElement(A.Z,{component:"th",scope:"row",key:"report-".concat(e.user.ID,"-userName"),sx:{minWidth:"190px !important",padding:"3px !important"}},l.createElement("p",{className:"document-prices-cell-content--bold"},e.userName)),e.callings.map((function(e){return l.createElement(A.Z,{align:"right"},l.createElement("p",{className:"document-prices-cell-content"},e.count))})),e.kpi.map((function(e){return l.createElement(A.Z,{align:"right"},l.createElement("p",{className:"document-prices-cell-content"},e.count))})))})),a=l.createElement(b.Z,null,l.createElement(A.Z,{key:"report-table-header-manager",align:"left",sx:{minWidth:"190px !important",padding:"3px !important"}},l.createElement("p",{className:"document-prices-cell-content--bold"},"Менеджер")),t[0].callings.map((function(e,t){return l.createElement(A.Z,{key:"document-price-th-".concat(t),align:"right"},l.createElement("p",{className:"document-prices-cell-content--bold"},e.action))})),t[0].kpi.map((function(e,t){return l.createElement(A.Z,{key:"document-price-th-".concat(t),align:"right"},l.createElement("p",{className:"document-prices-cell-content--bold"},e.action))})));return l.createElement(T.Z,{sx:{marginBottom:1}},l.createElement(O.Z,{size:"small","aria-label":"simple table"},l.createElement(h.Z,{variant:"head"},a),l.createElement(C.Z,null,r)))}return l.createElement("div",null," no report data")};const K=function Report(e){var t=e.date,r=(e.tableheader,e.report),n=(e.detalization,e.departament),c=e.actions,o=e.changeDate,i=e.setCurentDepartamentItem,m=e.setActions;e.setDetalizationProps;document.title="April App | KPI Report Dashboard";var s=(0,l.useState)(!1),u=(0,a.Z)(s,2),M=u[0],g=u[1],N=(0,l.useState)(t.from),d=(0,a.Z)(N,2),E=d[0],D=d[1],p=(0,l.useState)(t.to),I=(0,a.Z)(p,2),j=I[0],b=I[1],A=(0,l.useState)(n.current),T=(0,a.Z)(A,2),O=T[0],h=T[1],C=(0,l.useState)(c.current),Z=(0,a.Z)(C,2),k=Z[0],v=Z[1];(0,l.useEffect)((function(){h(n.current)}),[n.current]),(0,l.useEffect)((function(){v(c.current)}),[c.current]);var S=function dateChangeHandle(e,t){"to"==e?b(t):"from"==e&&D(t)},L=function getFormatteDate(e){return(0,F.WU)(e,"d MMMM yyyy г.",{locale:B.ru})};return l.createElement(l.Fragment,null,l.createElement("div",{className:"page-content"},l.createElement(f.Z,{fluid:!0},l.createElement(y.Z,{className:"report-filter ".concat(M?"d-flex":"d-none","  ")},l.createElement(x.Z,{sm:3},l.createElement("label",{htmlFor:"example-date-input-from",className:"col-md-2 col-form-label filter-label"},"Дата с"),l.createElement("div",{className:"col-md-10"},l.createElement("input",{onChange:function onChange(e){return S("from",e.target.value)},className:"form-control",type:"date",defaultValue:t.from,id:"example-date-input-from",locale:"ru"}))),l.createElement(x.Z,{sm:3},l.createElement("label",{htmlFor:"example-date-input-to",className:"col-md-2 col-form-label filter-label"},"Дата по"),l.createElement("div",{className:"col-md-10"},l.createElement("input",{onChange:function onChange(e){return S("to",e.target.value)},className:"form-control",type:"date",defaultValue:t.to,id:"example-date-input-to"}))),l.createElement(x.Z,{sm:6},l.createElement("label",{className:"col-md-2 col-form-label filter-label"},"Сотрудники"),l.createElement("div",{className:"depart-area"},n&&n.items&&n.items.length&&n.items.map((function(e,t){var r=R(t),a=O.find((function(t){return t.ID===e.ID})),n=a?r:"rgb(238, 242, 244)";return l.createElement(z.Z,{style:{backgroundColor:n,color:"rgb(37, 40, 45)"},size:"sm",className:"filter-item",value:e.ID,onClick:function onClick(t){return function departamentChange(e,t){e.preventDefault(),i(t)}(t,e.ID)}},l.createElement("p",null,e.NAME),l.createElement("img",{className:"filter-item-icon",color:"white",src:a?V:J,alt:""}))}))))),l.createElement(y.Z,{className:"report-filter ".concat(M?"d-flex":"d-none","  ")},l.createElement(x.Z,{sm:12},l.createElement("label",{className:"col-md-2 col-form-label filter-label"},"Действия"),l.createElement("div",{className:"depart-area"},c&&c.items&&c.items.length&&c.items.map((function(e,t){var r=R(t),a=k.find((function(t){return t.id===e.id})),n=a?r:"rgb(238, 242, 244)",c=a?"rgb(37, 40, 45)":"white";return l.createElement(z.Z,{style:{backgroundColor:n,color:c},size:"sm",className:"filter-action-item",value:e.id,onClick:function onClick(t){return function actionsChange(e,t){e.preventDefault(),m(t)}(t,e.id)}},l.createElement("p",null,e.name),l.createElement("img",{className:"filter-item-icon",color:"white",src:a?V:J,alt:""}))}))))),l.createElement(y.Z,{className:"mb-1 report-filter-status"},l.createElement(x.Z,{sm:4,className:"currentDate d-flex align-items-center"},l.createElement("p",{className:"current-date-item"}," c ",L(t.from)," "),l.createElement("p",{className:"current-date-item ml-5"}," по ",L(t.to)," ")),l.createElement(x.Z,{sm:8},l.createElement("div",{className:"\r d-flex filter-status-toggler-wrapper\r justify-content-end\r align-items-center\r pd-5\r ",fluid:!0},l.createElement("div",{className:"\r d-flex filter-btns-wrapper\r justify-content-end\r align-items-center\r pd-0\r m-0"},M&&l.createElement("button",{onClick:function onClick(){return function getFiltredReport(){g(!M),o(E,j)}()},className:"\r filter-status-toggler\r btn btn-warning btn-sm\r pd-0\r mr-10"},"Применить"," "),l.createElement("button",{onClick:function onClick(){return g(!M)},outline:M,className:"\n                                    filter-status-toggler\n                                    btn \n                                    btn-primary \n                                    btn-sm\n                                    pd-0\n                                    m-0"},M?"Спрятать":"Фильтр"))))),l.createElement(y.Z,{className:"mb-1"},l.createElement(X,{report:r})),l.createElement(y.Z,{className:"d-flex \r flex-row\r justify-content-center\r align-items-center\r "},r.length&&l.createElement(H,{departament:n,report:r,isCallings:!0,size:6}),r.length&&l.createElement(P,{report:r,size:6})),l.createElement(y.Z,{className:"mt-3 d-flex \r flex-row\r justify-content-center\r align-items-center\r "}))))};var _=r(1324),$=r(8130);const q=function ReportProccessing(){var e=new Date,t=new Date(e.getTime()+6e4);return document.title="April App | KPI Report",l.createElement(l.Fragment,null,l.createElement(y.Z,null,l.createElement(x.Z,{lg:"12"},l.createElement("div",{className:"text-center"},l.createElement(y.Z,{className:"justify-content-center mt-1"},l.createElement(x.Z,{sm:"4"},l.createElement("div",{className:"maintenance-img"},l.createElement("img",{src:maintanence,alt:"",className:"img-fluid mx-auto d-block"})))),l.createElement("h4",{className:"mt-5"},"Мы конструируем отчет для Вас"),l.createElement("p",{className:"text-muted"},"Это может занять до нескольких минут. Подождите пожалуйста"),l.createElement(y.Z,{className:"justify-content-center mt-5"},l.createElement(x.Z,{md:"8"},l.createElement("div",{className:"counter-number"},l.createElement($.ZP,{date:t,renderer:function renderer(e){e.days,e.hours;var t=e.minutes,r=e.seconds;return e.completed?l.createElement("span",null,"Почти готвово"):l.createElement(l.Fragment,null,l.createElement("div",{className:"coming-box"},t," ",l.createElement("span",null,"Минут"))," ",l.createElement("div",{className:"coming-box"},r," ",l.createElement("span",null,"секунд")))}}))))))))};var ee=r(7294);const te=(0,n.$j)((function mapStateToProps(e,t){var r=e.report.actions,a=e.departament;return{report:e.report.report,detalization:e.report.detalization,date:e.report.date,actions:r,departament:a,isFetched:e.report.isFetched}}),{getReportData:c.ZD,changeDate:c.Mv,setCurentDepartamentItem:_.YH,setCurrentActions:c.uc,setDetalizationProps:c.h})((function ReportContainer(e){var t=e.date,r=e.actions,n=e.departament,c=e.report,o=e.detalization,i=e.isFetched,m=e.getReportData,s=e.changeDate,u=e.setCurentDepartamentItem,M=e.setCurrentActions,g=e.setDetalizationProps,N=(0,l.useState)(c),d=(0,a.Z)(N,2),E=d[0],D=d[1];return(0,l.useEffect)((function(){i||m()}),[i]),(0,l.useEffect)((function(){c&&D(function getFiltredrReport(e,t,r){var a=e.filter((function(e){return t.some((function(t){return t.ID===e.user.ID}))})),n=function _loop_1(e){var t=[];a[e].kpi.forEach((function(e){r.some((function(t){return t.id===e.id}))&&t.push(e)})),a[e].kpi=t};for(var c in a)n(c);return a}(c,n.current,r.current))}),[c,r,n]),i?ee.createElement(K,{date:t,departament:n,actions:r,report:E,detalization:o,changeDate:s,setCurentDepartamentItem:u,setActions:M,setDetalizationProps:g}):ee.createElement(q,null)}))},5825:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(8081),n=r.n(a),c=r(3645),l=r.n(c)()(n());l.push([e.id,"",""]);const o=l}}]);