(self.webpackChunkapril_kp=self.webpackChunkapril_kp||[]).push([[870],{2823:(e,t,r)=>{r.d(t,{L:()=>m,j:()=>h});var n,a,c,u,o,l,i=r(2167),s=r(5861),p=r(4687),f=r.n(p),d=(r(3129),r(2861).Z.create({baseURL:"https://april-hook.ru/api",withCredentials:!0,headers:{"content-type":"application/json",accept:"application/json","X-Requested-With":"XMLHttpRequest"}})),m={getCollection:(c=(0,s.Z)(f().mark((function _callee(e,t,r){var n,a,c,u=arguments;return f().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:if(n=u.length>3&&void 0!==u[3]?u[3]:null,a=null,o.prev=2,n){o.next=9;break}return o.next=6,d[t](e);case 6:o.t0=o.sent,o.next=12;break;case 9:return o.next=11,d[t](e,n);case 11:o.t0=o.sent;case 12:if(!(c=o.t0)){o.next=16;break}return c.data&&0===c.data.resultCode&&c.data[r]&&(a=c.data.isCollection?c.data[r].data:c.data[r]),o.abrupt("return",a);case 16:o.next=21;break;case 18:return o.prev=18,o.t1=o.catch(2),o.abrupt("return",a);case 21:case"end":return o.stop()}}),_callee,null,[[2,18]])}))),function getCollection(e,t,r){return c.apply(this,arguments)}),setCollection:(a=(0,s.Z)(f().mark((function _callee2(e,t){var r,n,a;return f().wrap((function _callee2$(c){for(;;)switch(c.prev=c.next){case 0:return r=null,c.prev=1,n=(0,i.Z)({},e,t),c.next=5,d.post(e,n);case 5:return(a=c.sent)&&0===a.data.resultCode&&(r=a.data.data),c.abrupt("return",r);case 10:return c.prev=10,c.t0=c.catch(1),c.abrupt("return",r);case 13:case"end":return c.stop()}}),_callee2,null,[[1,10]])}))),function setCollection(e,t){return a.apply(this,arguments)}),service:(n=(0,s.Z)(f().mark((function _callee3(e,t,r,n){var a,c;return f().wrap((function _callee3$(u){for(;;)switch(u.prev=u.next){case 0:return a=null,u.prev=1,console.log("hook api"),u.next=5,d[t](e,n);case 5:return c=u.sent,console.log(c),c&&c.data&&0===c.data.resultCode&&(a="data"in c.data?c.data.data[r]:c.data[r]),u.abrupt("return",a);case 11:return u.prev=11,u.t0=u.catch(1),u.abrupt("return",a);case 14:case"end":return u.stop()}}),_callee3,null,[[1,11]])}))),function service(e,t,r,a){return n.apply(this,arguments)})},h={create:(l=(0,s.Z)(f().mark((function _callee4(e,t,r,n,a,c,u,o,l,i,s,p,m){var h,v,b;return f().wrap((function _callee4$(f){for(;;)switch(f.prev=f.next){case 0:return h=null,v={type:e,auth:{domain:t},company_id:r,deadline:n,responsible:a,created:c,name:u,comment:o,crm:l,company:i,smart:s,sale:p,isOneMore:m},f.prev=2,f.next=5,d.post("task/warm",v);case 5:return(b=f.sent)&&b.data&&0===b.data.resultCode&&(h=b.data),f.abrupt("return",h);case 10:return f.prev=10,f.t0=f.catch(2),f.abrupt("return",h);case 13:case"end":return f.stop()}}),_callee4,null,[[2,10]])}))),function create(e,t,r,n,a,c,u,o,i,s,p,f,d){return l.apply(this,arguments)}),fail:(o=(0,s.Z)(f().mark((function _callee5(e,t,r,n,a){var c,u,o;return f().wrap((function _callee5$(l){for(;;)switch(l.prev=l.next){case 0:return c=null,u={auth:{domain:e},company_id:t,placement:r,smart:a,responsible:n},console.log("fail"),console.log(u),l.prev=4,l.next=7,d.post("task/fail",u);case 7:return(o=l.sent)&&o.data&&0===o.data.resultCode&&(c=o.data.result),l.abrupt("return",c);case 12:return l.prev=12,l.t0=l.catch(4),l.abrupt("return",c);case 15:case"end":return l.stop()}}),_callee5,null,[[4,12]])}))),function fail(e,t,r,n,a){return o.apply(this,arguments)}),presentationDone:(u=(0,s.Z)(f().mark((function _callee6(e,t,r,n,a,c){var u,o,l;return f().wrap((function _callee6$(i){for(;;)switch(i.prev=i.next){case 0:return u=null,o={auth:{domain:e},company_id:t,placement:r,company:a,smart:c,responsibleId:n},console.log("presentation/done"),console.log(o),i.prev=4,i.next=7,d.post("presentation/done",o);case 7:return(l=i.sent)&&l.data&&0===l.data.resultCode&&(u=l.data.result),i.abrupt("return",u);case 12:return i.prev=12,i.t0=i.catch(4),i.abrupt("return",u);case 15:case"end":return i.stop()}}),_callee6,null,[[4,12]])}))),function presentationDone(e,t,r,n,a,c){return u.apply(this,arguments)})}},6097:(e,t,r)=>{r.d(t,{hP:()=>I,Wr:()=>O,XN:()=>T,gT:()=>_});var n=r(5861),a=r(2167),c=r(4687),u=r.n(c),o=r(3129),l="e0336d3b27299e405a344d2475627c5810eab829a4e5c1214e452e20519d5984",i=r(4353),s=r(2861);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=s.Z.create({baseURL:o.h0?"http://localhost:8000/api":"https://april-online.ru/api",withCredentials:!0,headers:(0,a.Z)((0,a.Z)((0,a.Z)({"content-type":"application/json",accept:"application/json"},"accept","application/json"),"X-Requested-With","XMLHttpRequest"),"X-API-KEY",l)});s.Z.create({baseURL:o.h0?"http://localhost:8000":"https://april-online.ru",withCredentials:!0,headers:{"content-type":"application/json",accept:"application/json","X-Requested-With":"XMLHttpRequest"}});var f,d,m,h,v,b,y,g,N,w,P,O={getCurrentUser:(b=(0,n.Z)(u().mark((function _callee3(){var e,t,r;return u().wrap((function _callee3$(n){for(;;)switch(n.prev=n.next){case 0:return e=null,n.prev=1,n.next=4,p.get("profile");case 4:return t=n.sent,(r=t.data)&&(0===r.resultCode?e=r.deal:r.message),n.abrupt("return",e);case 10:return n.prev=10,n.t0=n.catch(1),n.abrupt("return",e);case 13:case"end":return n.stop()}}),_callee3,null,[[1,10]])}))),function getCurrentUser(){return b.apply(this,arguments)}),setDeal:(v=(0,n.Z)(u().mark((function _callee4(e){var t,r;return u().wrap((function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:return t=null,n.prev=1,n.next=4,p.post("deal",_objectSpread({},e));case 4:return(r=n.sent)&&(0===r.resultCode?t=r.deal:r.message),n.abrupt("return",t);case 9:return n.prev=9,n.t0=n.catch(1),n.abrupt("return",t);case 12:case"end":return n.stop()}}),_callee4,null,[[1,9]])}))),function setDeal(e){return v.apply(this,arguments)}),getDeal:(h=(0,n.Z)(u().mark((function _callee5(e,t){var r,n,a;return u().wrap((function _callee5$(c){for(;;)switch(c.prev=c.next){case 0:return r=null,c.prev=1,c.next=4,p.post("getDeal",{dealId:e,domain:t});case 4:return n=c.sent,(a=n.data)&&0===a.resultCode&&(r=a.deal),c.abrupt("return",r);case 10:return c.prev=10,c.t0=c.catch(1),c.abrupt("return",r);case 13:case"end":return c.stop()}}),_callee5,null,[[1,10]])}))),function getDeal(e,t){return h.apply(this,arguments)}),getDescription:(m=(0,n.Z)(u().mark((function _callee6(e,t,r,n,a){var c,o,l,i;return u().wrap((function _callee6$(u){for(;;)switch(u.prev=u.next){case 0:return c=null,u.prev=1,u.next=4,p.post("getDescription",{domain:e,userId:t,complect:r,infoblocks:n,groups:a});case 4:if(!(o=u.sent)||!o.data||0!==o.data.resultCode){u.next=9;break}return l=o.data.file,i=o.data.fileBase64,u.abrupt("return",{link:l,file:i});case 9:u.next=14;break;case 11:return u.prev=11,u.t0=u.catch(1),u.abrupt("return",c);case 14:case"end":return u.stop()}}),_callee6,null,[[1,11]])}))),function getDescription(e,t,r,n,a){return m.apply(this,arguments)}),getOffer:(d=(0,n.Z)(u().mark((function _callee7(e,t,r,n,a){var c,o;return u().wrap((function _callee7$(u){for(;;)switch(u.prev=u.next){case 0:return c=null,u.prev=1,u.next=4,p.post("get/offer",{domain:e,userId:t,complect:r,infoblocks:n,groups:a});case 4:(o=u.sent)&&o.data&&o.data.resultCode,u.next=11;break;case 8:return u.prev=8,u.t0=u.catch(1),u.abrupt("return",c);case 11:case"end":return u.stop()}}),_callee7,null,[[1,8]])}))),function getOffer(e,t,r,n,a){return d.apply(this,arguments)}),getTemplate:(f=(0,n.Z)(u().mark((function _callee8(e,t,r){var n,a;return u().wrap((function _callee8$(r){for(;;)switch(r.prev=r.next){case 0:return n=null,r.prev=1,r.next=4,p.post("get/offer",{domain:e,userId:t,complect,infoblocks,groups});case 4:(a=r.sent)&&a.data&&a.data.resultCode,r.next=11;break;case 8:return r.prev=8,r.t0=r.catch(1),r.abrupt("return",n);case 11:case"end":return r.stop()}}),_callee8,null,[[1,8]])}))),function getTemplate(e,t,r){return f.apply(this,arguments)})},_={getCollection:(N=(0,n.Z)(u().mark((function _callee9(e,t,r,n){var a,c;return u().wrap((function _callee9$(u){for(;;)switch(u.prev=u.next){case 0:if(a=null,u.prev=1,n){u.next=8;break}return u.next=5,p[t](e);case 5:u.t0=u.sent,u.next=11;break;case 8:return u.next=10,p[t](e,n);case 10:u.t0=u.sent;case 11:if(!(c=u.t0)){u.next=15;break}return c.data&&0===c.data.resultCode&&c.data[r]&&(a=c.data.isCollection?c.data[r].data:c.data[r]),u.abrupt("return",a);case 15:u.next=20;break;case 17:return u.prev=17,u.t1=u.catch(1),u.abrupt("return",a);case 20:case"end":return u.stop()}}),_callee9,null,[[1,17]])}))),function getCollection(e,t,r,n){return N.apply(this,arguments)}),setCollection:(g=(0,n.Z)(u().mark((function _callee10(e,t){var r,n,c;return u().wrap((function _callee10$(u){for(;;)switch(u.prev=u.next){case 0:return r=null,u.prev=1,n=(0,a.Z)({},e,t),u.next=5,p.post(e,n);case 5:return(c=u.sent)&&0===c.data.resultCode&&(r=c.data.data),u.abrupt("return",r);case 10:return u.prev=10,u.t0=u.catch(1),u.abrupt("return",r);case 13:case"end":return u.stop()}}),_callee10,null,[[1,10]])}))),function setCollection(e,t){return g.apply(this,arguments)}),service:(y=(0,n.Z)(u().mark((function _callee11(e,t,r,n){var a,c;return u().wrap((function _callee11$(u){for(;;)switch(u.prev=u.next){case 0:return a=null,u.prev=1,u.next=4,p[t](e,n);case 4:return(c=u.sent)&&c.data&&(0===c.data.resultCode?a=c.data.data?c.data.data[r]:c.data[r]:1===c.data.resultCode&&(c.data.message?console.log("".concat(r," ").concat(c.data.message)):console.log(c))),u.abrupt("return",a);case 9:return u.prev=9,u.t0=u.catch(1),u.abrupt("return",a);case 12:case"end":return u.stop()}}),_callee11,null,[[1,9]])}))),function service(e,t,r,n){return y.apply(this,arguments)})},T={updateDeal:(w=(0,n.Z)(u().mark((function _callee12(e,t,r,n,c,o,l,s,f,d,m,h,v,b,y,g,N,w,P){var O,_,T,E,I,S,C,A,x,R,k,U,D,j;return u().wrap((function _callee12$(u){for(;;)switch(u.prev=u.next){case 0:return T=null,E="gsr.bitrix24.ru"===e||"april-dev.bitrix24.ru"===e,I=(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},b.dealName.bitrixId,"".concat(t)),b.opened.bitrixId,b.opened.value),"PROBABILITY",30),"OPPORTUNITY",0),"CURRENCY_ID","RUB"),"UF_CRM_5B39D7C2EC0AB",!0),E||(I[b.assigned.bitrixId]=r,I[b.category.bitrixId]=b.category.value,I[b.stage.bitrixId]=b.stage.value),S={FIELDS:I,PARAMS:{REGISTER_SONET_EVENT:"Y"}},C=isNaN(+g.contractSupplyPropSuppliesQuantity)?1:+g.contractSupplyPropSuppliesQuantity,A=N?N.contractConsaltingProp:g.contractConsaltingProp,x=N?N.contractConsaltingComment:g.contractConsaltingComment,R={id:n,fields:(O={},(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)(O,v.contract.bitrixId,c),v.companyId.bitrixId,o),v.npa.bitrixId,l.npa),v.la.bitrixId,l.la),v.c.bitrixId,l.c),v.sp.bitrixId,l.sp),v.er.bitrixId,s.er),v.per.bitrixId,s.per),v.erinpac.bitrixId,s.erinpac),v.lt.bitrixId,d.lt),(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)(O,v.plt.bitrixId,d.plt),v.ltinpac.bitrixId,d.ltinpac),v.freeBlocks.bitrixId,f),v.consalting.bitrixId,m),v.field_14.bitrixId,h)),PARAMS:{REGISTER_SONET_EVENT:"Y"}},E||(I[b.category.bitrixId]=b.category.value,I[b.stage.bitrixId]="C".concat(b.category.value,":NEW")),k={id:n,fields:(_={},(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)(_,y.complectName.bitrixId,g.name),y.abonementTime.bitrixId,1===g.contractCoefficient?null:g.contractCoefficient),y.consalting.bitrixId,A),y.note2.bitrixId,x),y.hdd.bitrixId,g.contractSupplyProp1?g.contractSupplyProp1:""),y.way.bitrixId,g.contractSupplyProp2?g.contractSupplyProp2:""),y.note.bitrixId,g.contractSupplyPropComment?g.contractSupplyPropComment:""),y.note3.bitrixId,g.contractSupplyPropEmail?g.contractSupplyPropEmail:""),y.supply.bitrixId,g.supplyName?g.supplyName:""),y.supplyForContract.bitrixId,g.contractSupplyName?g.contractSupplyName:""),(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)(_,y.loginsQuantity.bitrixId,g.contractSupplyPropLoginsQuantity?g.contractSupplyPropLoginsQuantity:""),y.contractSupplyPropSuppliesQuantity.bitrixId,C),y.supplyForContract.bitrixId,g.contractSupplyName),y.field_1.bitrixId,g.quantityForKp))},U=w.map((function(e,t){var r=e.prepayment,a=e.price.current,c=e.price.default,u=c-a;return{id:e.id||e.number,priceNetto:c,price:a,discountSum:u,discountTypeId:1,ownerId:n,ownerType:"D",productName:"".concat(e.name," ").concat(e.supply.name),quantity:e.price.quantity||r,customized:"Y",supply:e.supplyName,measureCode:e.price.measure.code,measureId:e.price.measure.id,sort:t}})),D={domain:e,dealId:n,setDealData:S,updateDealInfoblocksData:R,updateDealContractData:k,setProductRowsData:{ownerType:"D",ownerId:n,productRows:U},updateProductRowsData:{id:null,fields:{priceNetto:null,price:null,discountSum:null,discountTypeId:1}},placement:P},u.prev=15,u.next=18,p[i.F.POST]("konstructor/bitrix/deal/update",D);case 18:return(j=u.sent)&&j.data&&(0===j.data.resultCode?j.data.data&&(T=j.data.data.dealId):1===j.data.resultCode&&(j.data.message?console.log("".concat(j.data.message)):console.log(j))),u.abrupt("return",T);case 23:return u.prev=23,u.t0=u.catch(15),u.abrupt("return",T);case 26:case"end":return u.stop()}}),_callee12,null,[[15,23]])}))),function updateDeal(e,t,r,n,a,c,u,o,l,i,s,p,f,d,m,h,v,b,y){return w.apply(this,arguments)})},E=s.Z.create({baseURL:"http://localhost:8000/api",withCredentials:!0,headers:{"content-type":"application/json",accept:"application/json","X-Requested-With":"XMLHttpRequest","X-API-KEY":l}}),I={service:(P=(0,n.Z)(u().mark((function _callee13(e,t,r,n){var a,c;return u().wrap((function _callee13$(u){for(;;)switch(u.prev=u.next){case 0:return a=null,u.prev=1,u.next=4,E[t](e,n);case 4:return(c=u.sent)&&c.data&&(0===c.data.resultCode?a=c.data.data?c.data.data[r]:c.data[r]:1===c.data.resultCode&&(c.data.message?console.log("".concat(r," ").concat(c.data.message)):console.log(c))),u.abrupt("return",a);case 9:return u.prev=9,u.t0=u.catch(1),u.abrupt("return",a);case 12:case"end":return u.stop()}}),_callee13,null,[[1,9]])}))),function service(e,t,r,n){return P.apply(this,arguments)})}},1596:(e,t,r)=>{r.d(t,{L:()=>R});var n=r(5861),a=r(2167),c=r(4687),u=r.n(c),o=r(4084);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l,i,s,p,f,d,m,h,v,b,y,g,N,w,P,O,_,T,E,I,S,C,A,x=function getchunksDescriptionChunks(e,t,r,n){var c=[],u=[];return r.forEach((function(e,t){u.push(e)})),c.push(["crm.deal.update",{ID:e,FIELDS:(0,a.Z)({},t[n].bitrixId,[])}]),c.push(["crm.deal.update",{ID:e,FIELDS:(0,a.Z)({},t[n].bitrixId,[])}]),["crm.deal.update",{ID:e,FIELDS:(0,a.Z)({},t[n].bitrixId,u)}]},R={getMethod:(A=(0,n.Z)(u().mark((function _callee(e,t){var r,n,a,c,o=arguments;return u().wrap((function _callee$(u){for(;;)switch(u.prev=u.next){case 0:if(r=o.length>2&&void 0!==o[2]?o[2]:null,n=null,a=null,u.prev=3,!__IN_BITRIX__){u.next=10;break}return u.next=7,callMethod(e,t);case 7:a=u.sent,u.next=14;break;case 10:return c={domain:r,method:e,bxData:t},u.next=13,hookAPI.service("bitrix/method",API_METHOD.POST,"result",c);case 13:n=u.sent;case 14:return a&&a.answer&&a.answer.result&&(n=a.answer.result),u.abrupt("return",n);case 18:return u.prev=18,u.t0=u.catch(3),console.log("error"),console.log(a),console.log(u.t0),u.abrupt("return",n);case 24:case"end":return u.stop()}}),_callee,null,[[3,18]])}))),function getMethod(e,t){return A.apply(this,arguments)}),getPlacement:(C=(0,n.Z)(u().mark((function _callee2(){var e;return u().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.k$.info();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),_callee2)}))),function getPlacement(){return C.apply(this,arguments)}),getCompanyId:(S=(0,n.Z)(u().mark((function _callee3(){var e,t;return u().wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,R.getPlacement();case 3:return e=r.sent,t=e.options.ID,r.abrupt("return",Number(t));case 8:return r.prev=8,r.t0=r.catch(0),r.abrupt("return",null);case 11:case"end":return r.stop()}}),_callee3,null,[[0,8]])}))),function getCompanyId(){return S.apply(this,arguments)}),getCurrentUserId:(I=(0,n.Z)(u().mark((function _callee4(e){var t,r;return u().wrap((function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:return t=null,n.next=3,o.OC("crm.company.get",{id:e});case 3:return r=(r=n.sent).answer&&r.answer.result,t=r?r.ASSIGNED_BY_ID:null,n.abrupt("return",t);case 7:case"end":return n.stop()}}),_callee4)}))),function getCurrentUserId(e){return I.apply(this,arguments)}),getCurrentUser:(E=(0,n.Z)(u().mark((function _callee5(){var e,t;return u().wrap((function _callee5$(r){for(;;)switch(r.prev=r.next){case 0:return e=null,r.prev=1,r.next=4,o.OC("user.current");case 4:return(t=r.sent)&&t.answer&&t.answer.result&&t.answer.result.ID&&(e=t.answer.result),r.abrupt("return",e);case 9:return r.prev=9,r.t0=r.catch(1),console.log(r.t0),r.abrupt("return",null);case 13:case"end":return r.stop()}}),_callee5,null,[[1,9]])}))),function getCurrentUser(){return E.apply(this,arguments)}),getResize:(T=(0,n.Z)(u().mark((function _callee6(){var e,t;return u().wrap((function _callee6$(r){for(;;)switch(r.prev=r.next){case 0:return e=.9*window.screen.height,t=.73*window.screen.width,r.next=5,o.tL(t,e);case 5:r.sent;case 6:case"end":return r.stop()}}),_callee6)}))),function getResize(){return T.apply(this,arguments)}),getResizeCalling:(_=(0,n.Z)(u().mark((function _callee7(){var e,t;return u().wrap((function _callee7$(r){for(;;)switch(r.prev=r.next){case 0:return e=.6*window.screen.height,t=.8*window.screen.width,r.next=5,o.tL(t,e);case 5:r.sent;case 6:case"end":return r.stop()}}),_callee7)}))),function getResizeCalling(){return _.apply(this,arguments)}),getScroll:(O=(0,n.Z)(u().mark((function _callee8(){var e,t;return u().wrap((function _callee8$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,console.log("scroll"),r.next=4,o.ck();case 4:return e=r.sent,console.log(e),r.next=8,o.Jt(100);case 8:t=r.sent,console.log(t),r.next=14;break;case 12:r.prev=12,r.t0=r.catch(0);case 14:case"end":return r.stop()}}),_callee8,null,[[0,12]])}))),function getScroll(){return O.apply(this,arguments)}),getCompany:(P=(0,n.Z)(u().mark((function _callee9(e){var t,r;return u().wrap((function _callee9$(n){for(;;)switch(n.prev=n.next){case 0:return t=null,console.log("crm.company.get"),n.prev=2,n.next=5,o.OC("crm.company.get",{id:e,select:["TITLE","ID","UF_CRM_1706007840","UF_CRM_1706007882","UF_CRM_1706007856"]});case 5:return(r=n.sent)&&r.answer&&r.answer.result&&(t=r.answer.result,console.log(t)),n.abrupt("return",t);case 10:return n.prev=10,n.t0=n.catch(2),console.log("error"),console.log(dealResponse),console.log(n.t0),n.abrupt("return",t);case 16:case"end":return n.stop()}}),_callee9,null,[[2,10]])}))),function getCompany(e){return P.apply(this,arguments)}),getDeal:(w=(0,n.Z)(u().mark((function _callee10(e){var t,r;return u().wrap((function _callee10$(n){for(;;)switch(n.prev=n.next){case 0:return t=null,n.prev=1,n.next=4,o.OC("crm.deal.get",{id:e,select:["TITLE","COMPANY_ID","ID","UF_CRM_1695372881","UF_CRM_1695373462","UF_CRM_1695373326"]});case 4:return(r=n.sent)&&r.answer&&r.answer.result&&(t=r.answer.result),n.abrupt("return",t);case 9:return n.prev=9,n.t0=n.catch(1),console.log("error"),console.log(dealResponse),console.log(n.t0),n.abrupt("return",t);case 15:case"end":return n.stop()}}),_callee10,null,[[1,9]])}))),function getDeal(e){return w.apply(this,arguments)}),getDealAndCompany:(N=(0,n.Z)(u().mark((function _callee11(){var e,t,r,n,a=arguments;return u().wrap((function _callee11$(c){for(;;)switch(c.prev=c.next){case 0:if(e=a.length>0&&void 0!==a[0]?a[0]:null,t=a.length>1&&void 0!==a[1]?a[1]:null,c.prev=2,r=null,n=null,t||!e){c.next=16;break}return c.next=8,R.getDeal(e);case 8:if(!(r=c.sent)||!r.COMPANY_ID){c.next=14;break}return t=r.COMPANY_ID,c.next=13,R.getCompany(t);case 13:n=c.sent;case 14:c.next=21;break;case 16:if(!t||e){c.next=21;break}return c.next=19,R.getCompany(t);case 19:n=c.sent,r&&r.COMPANY_ID&&(t=r.COMPANY_ID);case 21:return console.log("dealResult"),console.log(r),console.log("currentCompanyId"),console.log(t),console.log("Результаты batch запроса:"),console.log("Компания:",n),console.log("Сделка:",r),c.abrupt("return",{company:n,deal:r});case 31:return c.prev=31,c.t0=c.catch(2),console.error("Произошла ошибка при выполнении запроса",c.t0),c.abrupt("return",{company:null,deal:null});case 35:case"end":return c.stop()}}),_callee11,null,[[2,31]])}))),function getDealAndCompany(){return N.apply(this,arguments)}),getSmart:(g=(0,n.Z)(u().mark((function _callee12(e){var t,r;return u().wrap((function _callee12$(n){for(;;)switch(n.prev=n.next){case 0:return t=null,$method="/crm.item.list.json",$data={entityTypeId:e,filter:{"=assignedById":$userId,COMPANY_ID:$companyId}},n.prev=3,n.next=6,o.OC("crm.item.list",{id:dealId});case 6:return(r=n.sent)&&r.answer&&r.answer.result&&(t=r.answer.result.items),n.abrupt("return",t);case 11:return n.prev=11,n.t0=n.catch(3),console.log("error"),console.log(dealResponse),console.log(n.t0),n.abrupt("return",t);case 17:case"end":return n.stop()}}),_callee12,null,[[3,11]])}))),function getSmart(e){return g.apply(this,arguments)}),addDeal:(y=(0,n.Z)(u().mark((function _callee13(e,t,r){var n,c,l;return u().wrap((function _callee13$(u){for(;;)switch(u.prev=u.next){case 0:if(n=null,!r.dealName){u.next=16;break}return c={FIELDS:(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({ID:56767},r.dealName.bitrixId,"".concat(e)),r.assigned.bitrixId,t),r.category.bitrixId,r.category.value),r.stage.bitrixId,r.stage.value),r.opened.bitrixId,r.opened.value),"PROBABILITY",30),"OPPORTUNITY",0),"CURRENCY_ID","RUB"),"UF_CRM_5B39D7C2EC0AB",!0),PARAMS:{REGISTER_SONET_EVENT:"Y"}},u.prev=3,u.next=6,o.OC("crm.deal.add",_objectSpread({},c));case 6:return l=u.sent,n=l.answer&&l.answer.result,u.abrupt("return",n);case 11:return u.prev=11,u.t0=u.catch(3),u.abrupt("return",n);case 14:u.next=16;break;case 16:case"end":return u.stop()}}),_callee13,null,[[3,11]])}))),function addDeal(e,t,r){return y.apply(this,arguments)}),setProducts:(b=(0,n.Z)(u().mark((function _callee14(e,t){var r,n,a;return u().wrap((function _callee14$(c){for(;;)switch(c.prev=c.next){case 0:return r=null,n=t.map((function(t,r){var n=t.prepayment,a=t.price.default,c=(parseFloat(t.price.discount.amount.toFixed(2)),t.price.discount.precent,{id:t.id||t.number,priceNetto:a,ownerId:e,ownerType:"D",productName:"".concat(t.name," ").concat(t.supply.name),quantity:t.price.quantity||n,customized:"Y",supply:t.supplyName,measureCode:t.price.measure.code,measureId:t.price.measure.id,sort:r});return console.log("setProducts"),console.log(c),c})),c.prev=2,c.next=5,o.OC("crm.item.productrow.set",{ownerType:"D",ownerId:e,productRows:n});case 5:return a=c.sent,r=a.answer&&a.answer.result,c.abrupt("return",r);case 10:return c.prev=10,c.t0=c.catch(2),c.abrupt("return",r);case 13:case"end":return c.stop()}}),_callee14,null,[[2,10]])}))),function setProducts(e,t){return b.apply(this,arguments)}),updateProduct:(v=(0,n.Z)(u().mark((function _callee15(e,t){var r,n,a,c,l;return u().wrap((function _callee15$(u){for(;;)switch(u.prev=u.next){case 0:return r=null,t.price.discount.precent,n=t.price.current,a=t.price.default,c={priceNetto:a,price:n,discountSum:a-n,discountTypeId:1},console.log("updateProduct"),console.log(c),u.prev=8,u.next=11,o.OC("crm.item.productrow.update",{id:e.id,fields:_objectSpread({},c)});case 11:return l=u.sent,r=l.answer&&l.answer.result,u.abrupt("return",r);case 16:return u.prev=16,u.t0=u.catch(8),u.abrupt("return",r);case 19:case"end":return u.stop()}}),_callee15,null,[[8,16]])}))),function updateProduct(e,t){return v.apply(this,arguments)}),setProductsFields:(h=(0,n.Z)(u().mark((function _callee16(e,t,r,n){var c,l,i,s,p,f,d,m;return u().wrap((function _callee16$(u){for(;;)switch(u.prev=u.next){case 0:return l=isNaN(+r.contractSupplyPropSuppliesQuantity)?1:+r.contractSupplyPropSuppliesQuantity,i=n?n.contractConsaltingProp:r.contractConsaltingProp,s=n?n.contractConsaltingComment:r.contractConsaltingComment,c={},(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)(c,t.complectName.bitrixId,r.name),t.abonementTime.bitrixId,1===r.contractCoefficient?null:r.contractCoefficient),t.consalting.bitrixId,i),t.note2.bitrixId,s),t.hdd.bitrixId,r.contractSupplyProp1?r.contractSupplyProp1:""),t.way.bitrixId,r.contractSupplyProp2?r.contractSupplyProp2:""),t.note.bitrixId,r.contractSupplyPropComment?r.contractSupplyPropComment:""),t.note3.bitrixId,r.contractSupplyPropEmail?r.contractSupplyPropEmail:""),t.supply.bitrixId,r.supplyName?r.supplyName:""),t.supplyForContract.bitrixId,r.contractSupplyName?r.contractSupplyName:""),p=(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)(c,t.loginsQuantity.bitrixId,r.contractSupplyPropLoginsQuantity?r.contractSupplyPropLoginsQuantity:""),t.contractSupplyPropSuppliesQuantity.bitrixId,l),t.supplyForContract.bitrixId,r.contractSupplyName),t.field_1.bitrixId,r.quantityForKp),f={ID:e,FIELDS:_objectSpread({},p),PARAMS:{REGISTER_SONET_EVENT:"Y"}},d=null,u.prev=6,u.next=9,o.OC("crm.deal.update",_objectSpread({},f));case 9:return m=u.sent,d=m.answer&&m.answer.result,u.abrupt("return",d);case 14:return u.prev=14,u.t0=u.catch(6),u.abrupt("return",d);case 17:case"end":return u.stop()}}),_callee16,null,[[6,14]])}))),function setProductsFields(e,t,r,n){return h.apply(this,arguments)}),updateDeal:(m=(0,n.Z)(u().mark((function _callee17(e,t,r,n,c,l,i,s,p,f,d){var m,h,v,b,y;return u().wrap((function _callee17$(u){for(;;)switch(u.prev=u.next){case 0:return m={},(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)(m,f.contract.bitrixId,t),f.companyId.bitrixId,r),f.npa.bitrixId,n.npa),f.la.bitrixId,n.la),f.c.bitrixId,n.c),f.sp.bitrixId,n.sp),f.er.bitrixId,c.er),f.per.bitrixId,c.per),f.erinpac.bitrixId,c.erinpac),f.lt.bitrixId,i.lt),h=(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)(m,f.plt.bitrixId,i.plt),f.ltinpac.bitrixId,i.ltinpac),f.freeBlocks.bitrixId,l),f.consalting.bitrixId,s),f.field_14.bitrixId,p),d.category.bitrixId,d.category.value),d.stage.bitrixId,"C".concat(d.category.value,":NEW")),v={ID:e,FIELDS:_objectSpread({},h),PARAMS:{REGISTER_SONET_EVENT:"Y"}},b=null,u.prev=4,u.next=7,o.OC("crm.deal.update",_objectSpread({},v));case 7:return y=u.sent,b=y.answer&&y.answer.result,u.abrupt("return",b);case 12:return u.prev=12,u.t0=u.catch(4),u.abrupt("return",b);case 15:case"end":return u.stop()}}),_callee17,null,[[4,12]])}))),function updateDeal(e,t,r,n,a,c,u,o,l,i,s){return m.apply(this,arguments)}),setFile:(d=(0,n.Z)(u().mark((function _callee18(e,t,r){var n;return u().wrap((function _callee18$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.S1();case 3:return e.sent,e.next=6,o.v0();case 6:return e.next=8,o.ge();case 8:return e.sent,n="<a href='".concat(r,"'>Описание</a> "),e.next=12,o.OC("crm.timeline.comment.add",{fields:{ENTITY_ID:t,ENTITY_TYPE:"deal",COMMENT:n}});case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),_callee18,null,[[0,14]])}))),function setFile(e,t,r){return d.apply(this,arguments)}),updateDealDescription:(f=(0,n.Z)(u().mark((function _callee19(e,t,r,n,a,c){var o,l,i,s,p;return u().wrap((function _callee19$(u){for(;;)switch(u.prev=u.next){case 0:return o=[],l=x(e,c,t,"disnpa"),i=x(e,c,r,"disc"),s=x(e,c,a,"disfree"),p=x(e,c,n,"disltc"),o.push(l[0]),o.push(l[1]),o.push(l[2]),o.push(l[3]),o.push(i[0]),o.push(i[1]),o.push(i[2]),o.push(i[3]),o.push(s[0]),o.push(s[1]),o.push(s[2]),o.push(s[3]),o.push(p[0]),o.push(p[1]),o.push(p[2]),o.push(p[3]),u.abrupt("return",window.BX24.callBatch&&new Promise((function(e,t){window.BX24.callBatch(o,(function(r){r[0]?e(r):t(!1)}))})));case 22:case"end":return u.stop()}}),_callee19)}))),function updateDealDescription(e,t,r,n,a,c){return f.apply(this,arguments)}),updateDealDescriptionTwo:(p=(0,n.Z)(u().mark((function _callee20(e,t,r){var n,a;return u().wrap((function _callee20$(c){for(;;)switch(c.prev=c.next){case 0:return n=[],a=x(e,r,t,"disnpa2"),n.push(a[0]),n.push(a[1]),n.push(a[2]),n.push(a[3]),c.abrupt("return",window.BX24.callBatch&&new Promise((function(e,t){window.BX24.callBatch(n,(function(r){r[0]?e(r):t(!1)}))})));case 7:case"end":return c.stop()}}),_callee20)}))),function updateDealDescriptionTwo(e,t,r){return p.apply(this,arguments)}),updateDealDescriptionThree:(s=(0,n.Z)(u().mark((function _callee21(e,t,r,n,c){var o;return u().wrap((function _callee21$(t){for(;;)switch(t.prev=t.next){case 0:return(o=[]).push(["crm.deal.update",{ID:e,FIELDS:(0,a.Z)({},c.disc2.bitrixId,r)}]),t.abrupt("return",window.BX24.callBatch&&new Promise((function(e,t){window.BX24.callBatch(o,(function(r){r[0]?e(r):t(!1)}))})));case 3:case"end":return t.stop()}}),_callee21)}))),function updateDealDescriptionThree(e,t,r,n,a){return s.apply(this,arguments)}),getDomain:(i=(0,n.Z)(u().mark((function _callee22(){var e;return u().wrap((function _callee22$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.v0();case 2:return t.sent,t.next=5,o.ge();case 5:return e=t.sent,t.abrupt("return",e);case 7:case"end":return t.stop()}}),_callee22)}))),function getDomain(){return i.apply(this,arguments)}),updateRecipient:(l=(0,n.Z)(u().mark((function _callee23(e,t,r,n,a){var c,l,i,s,p,f,d,m,h;return u().wrap((function _callee23$(u){for(;;)switch(u.prev=u.next){case 0:if(!e&&!t){u.next=28;break}if(!(r||n||a)){u.next=28;break}return c={},l={},r&&(c.UF_CRM_1706007840=r,l.UF_CRM_1695372881=r),n&&(c.UF_CRM_1706007856=n,l.UF_CRM_1695373326=n),a&&(c.UF_CRM_1706007882=a,l.UF_CRM_1695373462=a),i={ID:e,FIELDS:_objectSpread({},l),PARAMS:{REGISTER_SONET_EVENT:"Y"}},s={ID:t,FIELDS:_objectSpread({},c),PARAMS:{REGISTER_SONET_EVENT:"Y"}},p="crm.company.update",f=null,d=null,u.prev=13,u.next=16,o.OC("crm.deal.update",_objectSpread({},i));case 16:return m=u.sent,u.next=19,o.OC(p,_objectSpread({},s));case 19:return h=u.sent,f=m.answer&&m.answer.result,d=h.answer&&h.answer.result,u.abrupt("return",{deal:f,company:d});case 25:return u.prev=25,u.t0=u.catch(13),u.abrupt("return",f);case 28:case"end":return u.stop()}}),_callee23,null,[[13,25]])}))),function updateRecipient(e,t,r,n,a){return l.apply(this,arguments)})}},5729:(e,t,r)=>{r.d(t,{Ho:()=>B,GO:()=>H,I4:()=>G});var n,a,c,u,o,l,i,s,p,f,d,m,h,v,b,y,g,N,w,P,O=r(2167),_=r(5861),T=r(4687),E=r.n(T),I=r(3977),S="AIzaSyCX-e_5LuVuDKUKnsM0y6gRTFcqHW9PFLs",C="april-garant.firebaseapp.com",A="april-garant",x="april-garant.appspot.com",R="415478492885",k="1:415478492885:web:201a14c5fc5b9d6c54bc5c",U="G-CPMC1RPMB1",D=r(9828),j=r(5687),Z=r(5667),L={apiKey:S,authDomain:C,projectId:A,storageBucket:x,messagingSenderId:R,appId:k,measurementId:U},F=(0,I.ZF)(L),M=(0,D.ad)(F),Y=(0,Z.$C)(F),H=((0,D.ad)(F),s=(0,_.Z)(E().mark((function _callee(e,t,r){var n;return E().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n=(0,Z.V1)(Y,"getAprilData"),a.next=4,n({name:e,email:t,domain:r,fields:[],products:[],number:0});case 4:return a.sent,a.abrupt("return",client.data);case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),_callee,null,[[0,8]])}))),i=(0,_.Z)(E().mark((function _callee2(e,t){var r,n;return E().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,D.JU)(M,"clients",e),t.next=3,(0,D.QT)(r);case 3:(n=t.sent).exists()?n.data():console.log("No such document!");case 6:case"end":return t.stop()}}),_callee2)}))),l=(0,_.Z)(E().mark((function _callee3(){var e,t;return E().wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return e=[],r.prev=1,t=(0,D.IO)((0,D.hJ)(M,"clients"),(0,D.Xo)("name")),r.next=5,(0,D.PL)(t);case 5:return r.sent.forEach((function(t){var r=t.data();e.push(r)})),console.log("get clients"),r.abrupt("return",e);case 11:return r.prev=11,r.t0=r.catch(1),console.log(r.t0),r.abrupt("return",e);case 15:case"end":return r.stop()}}),_callee3,null,[[1,11]])}))),o=(0,_.Z)(E().mark((function _callee4(e){var t,r;return E().wrap((function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:return t=void 0,n.prev=1,r=(0,D.IO)((0,D.hJ)(M,"clients"),(0,D.ar)("number","==",e)),n.next=5,(0,D.PL)(r);case 5:return n.sent.forEach((function(r){r.data().number===e&&(t=r.data())})),n.abrupt("return",t);case 10:return n.prev=10,n.t0=n.catch(1),console.log(n.t0),n.abrupt("return",t);case 14:case"end":return n.stop()}}),_callee4,null,[[1,10]])}))),u=(0,_.Z)(E().mark((function _callee5(e,t){var r,n,a,c;return E().wrap((function _callee5$(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,n=(0,D.IO)((0,D.hJ)(M,"clients"),(0,D.ar)("number","==",e)),u.next=4,(0,D.PL)(n);case 4:return u.sent.forEach((function(t){t.data().number===e&&(a=(0,D.JU)(M,"clients",t.id))})),u.next=8,(0,D.r7)(a,{products:t});case 8:return c=(0,D.IO)((0,D.hJ)(M,"clients"),(0,D.ar)("number","==",e)),u.next=11,(0,D.PL)(c);case 11:return u.sent.forEach((function(t){t.data().number===e&&(r=t.data())})),u.abrupt("return",r);case 16:return u.prev=16,u.t0=u.catch(0),console.log(u.t0),u.abrupt("return",r);case 20:case"end":return u.stop()}}),_callee5,null,[[0,16]])}))),c=(0,_.Z)(E().mark((function _callee6(e,t){var r,n,a,c;return E().wrap((function _callee6$(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,n=(0,D.IO)((0,D.hJ)(M,"clients"),(0,D.ar)("number","==",t)),u.next=4,(0,D.PL)(n);case 4:return u.sent.forEach((function(e){e.data().number===t&&(a=(0,D.JU)(M,"clients",e.id))})),u.next=8,(0,D.r7)(a,{fields:e});case 8:return c=(0,D.IO)((0,D.hJ)(M,"clients"),(0,D.ar)("number","==",t)),u.next=11,(0,D.PL)(c);case 11:return u.sent.forEach((function(e){e.data().number===t&&(r=e.data())})),u.abrupt("return",r);case 16:return u.prev=16,u.t0=u.catch(0),console.log(u.t0),u.abrupt("return",r);case 20:case"end":return u.stop()}}),_callee6,null,[[0,16]])}))),a=(0,_.Z)(E().mark((function _callee9(e){var t,r,n,a;return E().wrap((function _callee9$(c){for(;;)switch(c.prev=c.next){case 0:return t=(0,D.IO)((0,D.hJ)(M,"clients"),(0,D.Xo)("name")),c.next=3,(0,D.PL)(t);case 3:return c.sent.docs.forEach(function(){var t=(0,_.Z)(E().mark((function _callee8(t){var r;return E().wrap((function _callee8$(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,D.hJ)((0,D.JU)(M,"clients",t.id),"products"),n.next=3,(0,D.PL)(r);case 3:n.sent.docs.forEach(function(){var t=(0,_.Z)(E().mark((function _callee7(t){return E().wrap((function _callee7$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,D.pl)((0,D.JU)(r,t.id),e,{merge:!0});case 2:case"end":return n.stop()}}),_callee7)})));return function(e){return t.apply(this,arguments)}}());case 5:case"end":return n.stop()}}),_callee8)})));return function(e){return t.apply(this,arguments)}}()),r=(0,D.IO)((0,D.hJ)(M,"clients"),(0,D.Xo)("name")),c.next=8,(0,D.PL)(r);case 8:return n=c.sent,a=[],n.forEach((function(e){var t=e.data();a.push(t)})),c.abrupt("return",a);case 12:case"end":return c.stop()}}),_callee9)}))),n=(0,_.Z)(E().mark((function _callee10(e){var t,r,n,a;return E().wrap((function _callee10$(c){for(;;)switch(c.prev=c.next){case 0:return t=null,r=[],c.prev=3,n=(0,D.IO)((0,D.hJ)(M,"clients"),(0,D.ar)("number","==",e)),c.next=7,(0,D.PL)(n);case 7:return c.sent.forEach((function(r){r.data().number===e&&(r.data(),t=r.id)})),a=(0,D.IO)((0,D.hJ)(M,"ClientProducts"),(0,D.ar)("clientId","==",t)),c.next=12,(0,D.PL)(a);case 12:return c.sent.forEach((function(e){var t=e.data();r.push(t)})),c.abrupt("return",r);case 17:c.prev=17,c.t0=c.catch(3),console.log(c.t0);case 20:return c.abrupt("return",r);case 21:case"end":return c.stop()}}),_callee10,null,[[3,17]])}))),d=(0,_.Z)(E().mark((function _callee11(){var e,t;return E().wrap((function _callee11$(r){for(;;)switch(r.prev=r.next){case 0:return e=[],r.prev=1,t=(0,D.IO)((0,D.hJ)(M,"fields"),(0,D.Xo)("number")),r.next=5,(0,D.PL)(t);case 5:return r.sent.forEach((function(t){var r=t.data();e.push(r)})),r.abrupt("return",e);case 10:r.prev=10,r.t0=r.catch(1),console.log(r.t0);case 13:return r.abrupt("return",e);case 14:case"end":return r.stop()}}),_callee11,null,[[1,10]])}))),f=(0,_.Z)(E().mark((function _callee12(e){var t,r,n,a;return E().wrap((function _callee12$(c){for(;;)switch(c.prev=c.next){case 0:for(c.prev=0,t=(0,D.qs)(M),r={},n=null,a=0;a<e.length;a++)r=e[a],n=(0,D.JU)(M,"fields","".concat(e[a].id)),t.set(n,r,"".concat(e[a].id));return c.next=7,t.commit();case 7:c.next=12;break;case 9:c.prev=9,c.t0=c.catch(0),console.error(c.t0);case 12:case"end":return c.stop()}}),_callee12,null,[[0,9]])}))),p=(0,_.Z)(E().mark((function _callee13(e,t,r){var n,a,c;return E().wrap((function _callee13$(u){for(;;)switch(u.prev=u.next){case 0:return n=(0,D.JU)(M,"fields","".concat(e)),u.next=3,(0,D.pl)(n,(0,O.Z)({},"".concat(r),t),{merge:!0});case 3:return a=[],u.next=6,(0,D.QT)(n);case 6:return(c=u.sent).exists()&&(a=c.data()),u.abrupt("return",a);case 9:case"end":return u.stop()}}),_callee13)}))),{getVersion:(h=(0,_.Z)(E().mark((function _callee14(){var e,t,r;return E().wrap((function _callee14$(n){for(;;)switch(n.prev=n.next){case 0:return e=!1,n.prev=1,t=(0,Z.V1)(Y,"getVersion"),n.next=5,t();case 5:return 0===(r=n.sent.data).resultCode&&(e=r.data.version),n.abrupt("return",e);case 10:return n.prev=10,n.t0=n.catch(1),n.abrupt("return",e);case 13:case"end":return n.stop()}}),_callee14,null,[[1,10]])}))),function getVersion(){return h.apply(this,arguments)}),getData:(m=(0,_.Z)(E().mark((function _callee15(e){var t,r;return E().wrap((function _callee15$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=(0,Z.V1)(Y,"getApril"),n.next=4,t(e);case 4:return(r=n.sent).data.resultCode,n.abrupt("return",r.data);case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}}),_callee15,null,[[0,9]])}))),function getData(e){return m.apply(this,arguments)})}),G={getCollection:(b=(0,_.Z)(E().mark((function _callee16(e){var t,r;return E().wrap((function _callee16$(n){for(;;)switch(n.prev=n.next){case 0:return t=[],n.prev=1,r=(0,D.IO)((0,D.hJ)(M,e),(0,D.Xo)("number")),n.next=5,(0,D.PL)(r);case 5:return n.sent.forEach((function(e){var r=e.data();t.push(r)})),n.abrupt("return",t);case 10:return n.prev=10,n.t0=n.catch(1),console.log(n.t0),n.abrupt("return",t);case 14:case"end":return n.stop()}}),_callee16,null,[[1,10]])}))),function getCollection(e){return b.apply(this,arguments)}),setCollection:(v=(0,_.Z)(E().mark((function _callee17(e,t){var r,n,a,c,u;return E().wrap((function _callee17$(o){for(;;)switch(o.prev=o.next){case 0:for(o.prev=0,r=(0,D.qs)(M),n=null,a=0;a<t.length;a++)c=t[a],n=(0,D.JU)(M,e,"".concat(t[a].number)),r.set(n,c,"".concat(t[a].number));return o.next=6,r.commit();case 6:return o.next=8,G.getCollection(e);case 8:return u=o.sent,o.abrupt("return",u);case 12:o.prev=12,o.t0=o.catch(0),console.error(o.t0);case 15:case"end":return o.stop()}}),_callee17,null,[[0,12]])}))),function setCollection(e,t){return v.apply(this,arguments)})},B=(g=(0,_.Z)(E().mark((function _callee19(){var e,t,r;return E().wrap((function _callee19$(n){for(;;)switch(n.prev=n.next){case 0:return e=new j.hJ,(t=(0,j.v0)()).languageCode="ru",n.next=5,(0,j.rh)(t,e).then((function(e){return e.user})).catch((function(e){var t=e.message;j.hJ.credentialFromError(e),console.log(t)}));case 5:return r=t.currentUser,n.abrupt("return",r);case 7:case"end":return n.stop()}}),_callee19)}))),y=(0,_.Z)(E().mark((function _callee20(){var e,t;return E().wrap((function _callee20$(r){for(;;)switch(r.prev=r.next){case 0:return e=(0,j.v0)(),t=null,(0,j.Aj)(e,(function(e){e&&(t=e)})),r.abrupt("return",t);case 4:case"end":return r.stop()}}),_callee20)}))),{addDeal:(P=(0,_.Z)(E().mark((function _callee21(e){var t,r,n;return E().wrap((function _callee21$(a){for(;;)switch(a.prev=a.next){case 0:return t=null,a.prev=1,r=(0,Z.V1)(Y,"setDeal"),a.next=5,r(e);case 5:return(n=a.sent)&&n.data&&(t=n.data),a.abrupt("return",t);case 10:return a.prev=10,a.t0=a.catch(1),console.log(a.t0),a.abrupt("return",t);case 14:case"end":return a.stop()}}),_callee21,null,[[1,10]])}))),function addDeal(e){return P.apply(this,arguments)}),getDeal:(w=(0,_.Z)(E().mark((function _callee22(e,t){var r,n,a;return E().wrap((function _callee22$(c){for(;;)switch(c.prev=c.next){case 0:return r=null,c.prev=1,n=(0,Z.V1)(Y,"getDeal"),c.next=5,n({dealId:e,domain:t});case 5:return(a=c.sent)&&a.data&&a.data.data&&a.data.data.deal&&0===a.data.resultCode?r=a.data.data.deal:a&&a.data&&a.data.data&&1===a.data.resultCode&&a.data.data&&console.log(a.data.data),c.abrupt("return",r);case 10:return c.prev=10,c.t0=c.catch(1),console.log(c.t0),c.abrupt("return",r);case 14:case"end":return c.stop()}}),_callee22,null,[[1,10]])}))),function getDeal(e,t){return w.apply(this,arguments)}),deleteDeal:(N=(0,_.Z)(E().mark((function _callee23(){return E().wrap((function _callee23$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,deleteDoc((0,D.JU)(M,"cities","DC"));case 2:case"end":return e.stop()}}),_callee23)}))),function deleteDeal(){return N.apply(this,arguments)})})},9891:(e,t,r)=>{r.d(t,{i:()=>i});var n=r(5861),a=r(4687),c=r.n(a),u=r(2861),o=u.Z.create({baseURL:"https://script.google.com/macros/s",headers:{"Content-Type":"text/plain;charset=utf-8"}}),l=u.Z.create({headers:{"Content-Type":"text/plain;charset=utf-8"}});o.defaults.redirect="follow",l.defaults.redirect="follow";var i={getInitialData:function getInitialData(e){return(0,n.Z)(c().mark((function _callee(){var t;return c().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.get("/".concat(e,"/exec"));case 3:if(!(t=r.sent).data){r.next=6;break}return r.abrupt("return",t.data);case 6:r.next=10;break;case 8:r.prev=8,r.t0=r.catch(0);case 10:case"end":return r.stop()}}),_callee,null,[[0,8]])})))()},getToken:function getToken(e){return(0,n.Z)(c().mark((function _callee2(){var t;return c().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l.get("https://script.google.com/macros/s/AKfycbymfb_P5F7tUxh_-btwe4WyIVB0Lrqa4w1Np7jsqOQJ5JxjJjBNvxZXWJf0NlUVoVK6JA/exec?domain=".concat(e));case 3:if(!(t=r.sent).data){r.next=6;break}return r.abrupt("return",t.data.token);case 6:r.next=10;break;case 8:r.prev=8,r.t0=r.catch(0);case 10:case"end":return r.stop()}}),_callee2,null,[[0,8]])})))()}}},3641:(e,t,r)=>{r.d(t,{j:()=>f});var n=r(2167),a=r(5861),c=r(4687),u=r.n(c);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var o,l,i,s,p,f={getData:(p=(0,a.Z)(u().mark((function _callee(e){var t,r;return u().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return r=null,n.prev=1,t=window.localStorage,r=t.getItem(e),n.abrupt("return",r);case 7:return n.prev=7,n.t0=n.catch(1),console.log("Ваш браузер не поддерживает использование localStorage или он отключен. Некоторые функции могут быть ограничены. Обратитесь к Админимстратору."),n.abrupt("return",r);case 11:case"end":return n.stop()}}),_callee,null,[[1,7]])}))),function getData(e){return p.apply(this,arguments)}),getParsedData:(s=(0,a.Z)(u().mark((function _callee2(e){var t,r,n;return u().wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return r=null,a.prev=1,t=window.localStorage,r=t.getItem(e),n=JSON.parse(r),a.abrupt("return",n);case 8:return a.prev=8,a.t0=a.catch(1),console.log("Ваш браузер не поддерживает использование localStorage или он отключен. Некоторые функции могут быть ограничены. Обратитесь к Админимстратору."),a.abrupt("return",r);case 12:case"end":return a.stop()}}),_callee2,null,[[1,8]])}))),function getParsedData(e){return s.apply(this,arguments)}),setData:(i=(0,a.Z)(u().mark((function _callee3(e,t){var r,n,a,c;return u().wrap((function _callee3$(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,n=JSON.stringify(_objectSpread({},e)),(r=window.localStorage).setItem(t,n),a=r.getItem(t),c=JSON.parse(a),u.abrupt("return",c);case 9:return u.prev=9,u.t0=u.catch(0),console.log("Ваш браузер не поддерживает использование localStorage или он отключен. Некоторые функции могут быть ограничены. Обратитесь пожалуйста к разработчику"),u.abrupt("return",null);case 13:case"end":return u.stop()}}),_callee3,null,[[0,9]])}))),function setData(e,t){return i.apply(this,arguments)}),setReportData:(l=(0,a.Z)(u().mark((function _callee4(e,t){var r,n,a,c;return u().wrap((function _callee4$(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,n=JSON.stringify(e),(r=window.localStorage).setItem(t,n),a=r.getItem(t),c=JSON.parse(a),u.abrupt("return",c);case 9:return u.prev=9,u.t0=u.catch(0),console.log("Ваш браузер не поддерживает использование localStorage или он отключен. Некоторые функции могут быть ограничены. Обратитесь пожалуйста к разработчику"),u.abrupt("return",null);case 13:case"end":return u.stop()}}),_callee4,null,[[0,9]])}))),function setReportData(e,t){return l.apply(this,arguments)}),removeData:(o=(0,a.Z)(u().mark((function _callee5(e){return u().wrap((function _callee5$(t){for(;;)switch(t.prev=t.next){case 0:try{window.localStorage.removeItem(e),console.log("Данные с ключом '".concat(e,"' были удалены из localStorage."))}catch(e){console.log("Ошибка при удалении данных из localStorage: ",e)}case 1:case"end":return t.stop()}}),_callee5)}))),function removeData(e){return o.apply(this,arguments)})}},6068:(e,t,r)=>{r.d(t,{g:()=>c});var n=r(2167);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var a=function getCurrentPrice(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=Number(e)*Number(t);return r=Number(r.toFixed(2))},c=function getPackegeServicePrice(e,t){var r=_objectSpread({},e);return t?r.price=a(r.price,t.prepayment):(r.currentProduct=r.productId,r.price=a(r.price)),r}},5168:(e,t,r)=>{r.d(t,{X:()=>n});var n=function pushDescription(e,t,r,n,a){r.value.some((function(e){return e.checked&&e.description}))&&(t.push({groupId:a,groupName:r.groupsName}),r.value.forEach((function(t){if(t.checked&&t.description){var r=t.title||t.name;e.push({groupId:a,infoblockId:n,name:r,description:t.description}),n++}})),a++)}},8611:(e,t,r)=>{r.d(t,{W:()=>a});var n=r(2167);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var a=function erCheckUncheck(e,t){var r=e[0].value.map((function(e,r){return t.packetsEr.includes(r)?(e.checked=!0,e.weight=1):(e.checked=!1,e.weight=0),_objectSpread({},e)})),n=e[1].value.map((function(e,r){return t.ers.includes(r)?(e.checked=!0,e.weight=.5):t.ersInPacket.includes(r)?(e.checked=!0,e.weight=0):(e.checked=!1,e.weight=0),_objectSpread({},e)}));return[_objectSpread(_objectSpread({},e[0]),{},{value:r}),_objectSpread(_objectSpread({},e[1]),{},{value:n})]}},9624:(e,t,r)=>{r.d(t,{u:()=>c});var n=r(2982),a=r(2167);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=function checkUncheckAndFieldsFree(e,t){var r=_objectSpread({},e);if(r.value=(0,n.Z)(e.value),t){var a=[];r.url="",r.value=r.value.map((function(e,r){var n=!0;return t.freeBlocks.includes(r)?(a.push(e.name),n=!0):(a=a.filter((function(t){return t!==e.name})),n=!1),_objectSpread(_objectSpread({},e),{},{checked:n})})),r.fields=a}else r.value.forEach((function(e){e.checked=!1})),r.fields=[];return r}},8957:(e,t,r)=>{r.d(t,{U:()=>c,j:()=>a});var n=r(2167);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var a=function checkUncheck(e,t){return e.map((function(e){return e.value=e.value.map((function(e){return t.filling.includes(e.name)?e.checked?e:_objectSpread(_objectSpread({},e),{},{checked:!0}):e.checked?_objectSpread(_objectSpread({},e),{},{checked:!1}):e})),e}))},c=function uncheckBlocks(e){return e.map((function(e){return e.value=e.value.map((function(e){return e.checked?_objectSpread(_objectSpread({},e),{},{checked:!1}):e})),e}))}},6230:(e,t,r)=>{r.d(t,{v:()=>u,z:()=>o});var n=r(2167),a=r(826);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=function updateState(e,t,r,n,a){return _objectSpread(_objectSpread({},e),{},{weightLt:t,ltIncluded:r,display:n,current:a})},u=function checkUncheckLt(e,t){return e.map((function(e,r){return(t&&(t.lt.includes(r)||t.ltInPacket.includes(r)))!==e.checked?_objectSpread(_objectSpread({},e),{},{checked:!e.checked}):e}))},o=function weightLt(e,t){var r=e.value.map((function(e){return _objectSpread({},e)})),n=_objectSpread(_objectSpread({},e),{},{value:r});if(!t)return n;var u=n.value.reduce((function(e,r,n){return t.ltInPacket.includes(n)?r.checked&&(e.weightLt+=r.weight):t.lt.includes(n)&&r.checked&&e.ltIncluded++,e}),{weightLt:0,ltIncluded:0}),weightLt=u.weightLt,o=u.ltIncluded,l=weightLt>0?"flex":"none",i=n.packages[weightLt];return c(n,weightLt,o,l,i||(0===weightLt?null:{name:a.yC,index:0,weight:weightLt,description:"",productId:0,productSix:0,productEleven:0,msk:0,regions:0,price:0}))}},1046:(e,t,r)=>{r.d(t,{Co:()=>p,Gs:()=>i,HW:()=>s,WN:()=>l,XV:()=>c,tv:()=>o,uA:()=>u});var n=r(2982),a=r(2167);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=function fillingInfoblocks(e,t,r){var a=e;return e&&(a=_objectSpread(_objectSpread({},e),{},{filling:(0,n.Z)(e.filling)}),e.isChanging&&(t?(a.filling.forEach((function(t,n){var c=e.noChanged&&e.noChanged.some((function(e){return e===t}));t!==r||c||"Предприятие PRO"===a.title&&"Справочник промышленника"===r||"Справочник нормативно-технической документации по строительству. Дополнительные материалы"===r||"Справочник промышленника. Дополнительные материалы"===r||("Справочник нормативно-технической документации по строительству"===r?a.filling=a.filling.filter((function(e){return"Справочник нормативно-технической документации по строительству"!==e&&"Справочник нормативно-технической документации по строительству. Дополнительные материалы"!==e})):"Справочник промышленника"===r?a.filling=a.filling.filter((function(e){return"Справочник промышленника"!==e&&"Справочник промышленника. Дополнительные материалы"!==e})):a.filling.splice(n,1))})),"Практика арбитражных апелляционных судов округов"!==r&&"Практика арбитражных судов округов"!==r&&"Практика высших судебных органов"!==r||(a.freeBlocks=l(a,7)),"Практика судов общей юрисдикции"===r&&(a.freeBlocks=l(a,6))):("Справочник нормативно-технической документации по строительству. Дополнительные материалы"==r||"Справочник промышленника. Дополнительные материалы"==r||("Справочник нормативно-технической документации по строительству"===r?(a.filling.push(r),a.filling.push("Справочник нормативно-технической документации по строительству. Дополнительные материалы")):"Справочник промышленника"===r?(a.filling.push(r),a.filling.push("Справочник промышленника. Дополнительные материалы")):a.filling.push(r)),"Практика арбитражных апелляционных судов округов"!==r&&"Практика арбитражных судов округов"!==r&&"Практика высших судебных органов"!==r||a.freeBlocks.includes(7)||a.freeBlocks.push(7),"Практика судов общей юрисдикции"===r&&(a.freeBlocks.includes(6)||a.freeBlocks.push(6))))),a},u=function fillingEr(e,t,r,a){var c=(0,n.Z)(e.ers),u=(0,n.Z)(e.packetsEr),o=(0,n.Z)(e.ersInPacket),l=t.filter((function(e,t){return u.includes(t)}));return!0===r?(c=c.filter((function(e){return e!==a})),"Офис"!==e.title&&o.includes(a)?t.forEach((function(e,t){if(e.including.includes(a)&&l.some((function(t){return t.name===e.name}))){u=u.filter((function(e){return e!==t})),o=o.filter((function(t){return!e.including.includes(t)}));var r=e.including.filter((function(e){return e!==a}));c=(0,n.Z)(new Set(c.concat(r)))}})):("Офис"===e.title&&!o.includes(a)||"Офис"!==e.title&&!o.includes(a))&&(c=c.filter((function(e){return e!==a})))):c.includes(a)||c.push(a),_objectSpread(_objectSpread({},e),{},{ers:c,packetsEr:u,ersInPacket:o})},o=function fillingPketsEr(e,t,r,a){var c=(0,n.Z)(e.packetsEr),u=(0,n.Z)(e.ers),o=(0,n.Z)(e.ersInPacket),l=t[a].including,i=function setErInPacketsEr(e,t){var r=[];return t.forEach((function(t,a){e.includes(a)&&(r=(0,n.Z)(new Set(r.concat(t.including))))})),r};return e.isChanging&&("Офис"!==e.title?function changePaketsInState(e,t){!0===e?(c=[],o=[]):(c=[t],o=(0,n.Z)(l))}(r,a):(window.alert("в комплекте Гарант-Офис должны содержаться два любых Пакета ЭР"),!0===r?0===action.index?(u=[],o=i(c=[1,2],t)):1===action.index?(u=[],o=i(c=[0,2],t)):2===action.index&&(u=[],o=i(c=[0,1],t)):0===a?(u=[],o=i(c=[0,2],t)):1===a?(u=[],o=i(c=[0,1],t)):2===a&&(u=[],o=i(c=[1,2],t)))),u=u.filter((function(e){return!l.includes(e)})),e.packetsEr=c,e.ers=u,e.ersInPacket=o,_objectSpread({},e)},l=function fillingFreeblocksWithUncheck(e,t){var r=[];return e.freeBlocks.forEach((function(n){7===t&&t===n?(e.filling.includes("Практика арбитражных судов округов")||e.filling.includes("Практика арбитражных апелляционных судов округов")||e.filling.includes("Практика высших судебных органов"))&&r.push(n):6===t&&t===n?e.filling.includes("Практика судов общей юрисдикции")&&r.push(n):10===t&&t===n||12===t&&t===n?(e.consaltingProduct.includes(1)||e.consaltingProduct.includes(2))&&r.push(n):11===t&&t===n?e.consaltingProduct.includes(2)&&r.push(n):t!==n&&r.push(n)})),r},i=function fillingLt(e,t,r){var a=_objectSpread({},e);a.lt=(0,n.Z)(a.lt),a.ltInPacket=(0,n.Z)(a.ltInPacket);var c,u=function currentWeightOfIncludedLT(e){return e.lt.length};a&&("Офис"===a.title||"exzak"===a.name?!1===a.lt.includes(r)?!1===t?(c=u(a))>=5?a.ltInPacket.push(r):a.lt.push(r):a.ltInPacket.forEach((function(e,t){e===r&&a.ltInPacket.splice(t,1)})):!1===t||(a.lt.forEach((function(e,t){e===r&&a.lt.splice(t,1)})),(c=u(a))<5&&(a.ltInPacket.length>0?(a.lt.push(a.ltInPacket[a.ltInPacket.length-1]),a.ltInPacket.splice(a.ltInPacket.length-1,1)):window.alert("В комплекте ".concat(a.fullTitle," должно быть минимум 5 сервисов Legal Tech, сейчас их ").concat(c," в комплекте")))):"Эксперт PRO"!==a.title?!1===a.lt.includes(r)&&(!1===t?a.ltInPacket.push(r):a.ltInPacket.forEach((function(e,t){e===r&&a.ltInPacket.splice(t,1)}))):"Эксперт PRO"===a.title&&3!==r&&(t?0===a.ltInPacket.length?a.lt=[3]:(a.lt.includes(r)&&(a.lt=a.lt.filter((function(e){return e!=r}))),a.ltInPacket.includes(r)&&(a.ltInPacket=a.ltInPacket.filter((function(e){return e!=r})))):a.lt.length>1?a.ltInPacket.push(r):a.lt.push(r)));return _objectSpread({},a)},s=function fillingConsalting(e,t,r){if(0!==r&&e&&!e.withConsalting){var a=_objectSpread({},e);return a.consalting=(0,n.Z)(e.consalting),a.consaltingProduct=(0,n.Z)(e.consaltingProduct),t?(a.consaltingProduct.includes(r)&&(a.consaltingProduct=[]),a.freeBlocks=a.freeBlocks.filter((function(e){return 10!==e&&9!==e&&8!==e}))):(a.consaltingProduct=[r],1===r?([8,10].forEach((function(e){return a.freeBlocks.includes(e)?null:a.freeBlocks.push(e)})),a.freeBlocks.includes(9)&&(a.freeBlocks=a.freeBlocks.filter((function(e){return 9!==e})))):2===r&&[8,9,10].forEach((function(e){return a.freeBlocks.includes(e)?null:a.freeBlocks.push(e)}))),a}return e},p=function fillingStar(e,t,r){if(e&&18!==e.number&&0===r){var n=_objectSpread({},e);return n.star=t?[]:[0],n}return e}},8659:(e,t,r)=>{r.d(t,{e:()=>u,t:()=>c});var n=r(2167),a=r(1418);r(3095);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=function setUniversalPrices(e,t,r){var n={};return e.forEach((function(e){n[e.region]={internet:{internet:[]},proxima:{proxima:[]}}})),e.forEach((function(e){t.forEach((function(t){r.forEach((function(r){if("internet"===t.type){if(r.shortName===a.D3.internet){var c=_objectSpread(_objectSpread(_objectSpread({},e),t),r);n[e.region][t.type][r.shortName].push(c)}}else if("proxima"===t.type&&r.shortName===a.D3.proxima){var u=_objectSpread(_objectSpread(_objectSpread({},e),t),r);n[e.region][t.type][r.shortName].push(u)}}))}))})),n},u=function calculatePrice(e,t,r,n,a){var c=0;return c=t.withAbs?t.abs*a.abs*n.coefficient:t.price,Number(c.toFixed(2))}},4806:(e,t,r)=>{r.d(t,{l:()=>n});var n=function getWeight(e,t,r,n){var a=0,c=0,u=0;return e.forEach((function(e){e.value.forEach((function(e){!0===e.checked&&(a+=e.weight)}))})),r.forEach((function(e){e.value.forEach((function(e){!0===e.checked&&(c+=e.weight)}))})),u=a+c,t&&t.length&&(u+=.5*(t.length-1)),u}},2447:(e,t,r)=>{var n,a,c,u,o,l,i,s,p,f,d,m;r.d(t,{B5:()=>m,HV:()=>p,xG:()=>n}),function(e){e.ProfBuh="buh",e.ProfBuhgos="buhgos",e.ProfUr="ur",e.ProfExpert="expert",e.ProfOffice="office",e.ProfGlavbuh="glavbuh",e.ProfGlavbuhgos="glavbuhgos",e.ProfPred="company",e.ProfPredPro="companyPro",e.Classic="classic",e.ClassicPlus="classicPlus",e.Universal="un",e.UniversalPlus="unPlus",e.Professional="professional",e.Master="master",e.Analitik="analitik",e.AnalitikPlus="analitikPlus",e.Maximum="maximum",e.Default="default"}(n||(n={})),function(e){e.ProfBuh="Бухгалтер",e.ProfBuhgos="Бухгалтер госсектора",e.ProfUr="Юрист",e.ProfExpert="Эксперт PRO",e.ProfOffice="Офис",e.ProfGlavbuh="Главный Бухгалтер",e.ProfGlavbuhgos="Главный Бухгалтер госсектора",e.ProfPred="Предприятие",e.ProfPredPro="Предприятие PRO",e.Classic="Классик",e.ClassicPlus="Классик+",e.Universal="Универсал",e.UniversalPlus="Универсал+",e.Professional="Профессионал",e.Master="Мастер",e.Analitik="Аналитик",e.AnalitikPlus="Аналитик+",e.Maximum="Максимум",e.Default="Универсальный комплект"}(a||(a={})),function(e){e.ProfBuh="Гарант-Бухгалтер",e.ProfBuhgos="Гарант-Бухгалтер госсектора",e.ProfUr="Гарант-Юрист",e.ProfExpert="Гарант-Эксперт PRO",e.ProfOffice="Гарант-Офис",e.ProfGlavbuh="Гарант-Главный Бухгалтер",e.ProfGlavbuhgos="Гарант-Главный Бухгалтер госсектора",e.ProfPred="Гарант-Предприятие",e.ProfPredPro="Гарант-Предприятие PRO",e.Classic="Гарант-Классик",e.ClassicPlus="Гарант-Классик+",e.Universal="Гарант-Универсал",e.UniversalPlus="Гарант-Универсал+",e.Professional="Гарант-Профессионал",e.Master="Гарант-Мастер",e.Analitik="Гарант-Аналитик",e.AnalitikPlus="Гарант-Аналитик+",e.Maximum="Гарант-Максимум"}(c||(c={})),function(e){e.ProfBuh="Бухгалтер",e.ProfBuhgos="Бухгалтер госсектора",e.ProfUr="Юрист",e.ProfExpert="Эксперт PRO",e.ProfOffice="Офис",e.ProfGlavbuh="Гл. Бухгалтер",e.ProfGlavbuhgos="Гл. Бухгалтер госсектора",e.ProfPred="Предприятие",e.ProfPredPro="Предприятие PRO",e.Classic="Классик",e.ClassicPlus="Классик+",e.Universal="Универсал",e.UniversalPlus="Универсал+",e.Professional="Профессионал",e.Master="Мастер",e.Analitik="Аналитик",e.AnalitikPlus="Аналитик+",e.Maximum="Максимум"}(u||(u={})),function(e){e.Small="Советы Экспертов",e.Medium="Правовой Консалтинг"}(o||(o={})),function(e){e.Small="Правовой Консалтинг. Советы экспертов. Проверки, налоги, право",e.Medium="Правовой консалтинг. Премиум"}(l||(l={})),function(e){e.Small="Гарант Legal-Tech. Малый Пакет",e.Medium="Гарант Legal-Tech. Средний Пакет",e.Big="Гарант Legal-Tech. Большой Пакет"}(i||(i={})),function(e){e.Small="Малый Пакет",e.Medium="Средний Пакет",e.Big="Большой Пакет"}(s||(s={})),function(e){e.PROF="prof",e.UNIVERSAL="universal",e.LT="lt",e.LT_PACKAGE="package",e.CONSALTING="consalting",e.STAR="star"}(p||(p={})),function(e){e.STAR="Система торговых аналитических решений"}(f||(f={})),function(e){e.STAR="Стар"}(d||(d={})),function(e){e.PROF="prof",e.UNIVERSAL="universal"}(m||(m={}))},4974:(e,t,r)=>{var n;r.d(t,{e:()=>n}),function(e){e.internet="internet",e.proxima="proxima",e.abonHalf="abonHalf",e.abonYear="abonYear",e.licHalf="licHalf",e.licYear="licYear",e.abonTwoYears="abonTwoYears",e.licTwoYears="licTwoYears"}(n||(n={}))},9516:(e,t,r)=>{var n,a,c,u,o;r.d(t,{MK:()=>u,WL:()=>o,X:()=>c,fu:()=>n}),function(e){e.RECIPIENT="recipient",e.POSITION="position",e.RECIPIENT_CASE="recipientCase",e.POSITION_CASE="positionCase",e.INN="inn",e.COMPANY_NAME="companyName",e.ADRESS="companyAdress",e.CLIENT_TYPE="clientType"}(n||(n={})),function(e){e.PHRASE="salePhrase"}(a||(a={})),function(e){e.NAME="nameCase",e.POSITION="wordCase"}(c||(c={})),function(e){e.D="дательный"}(u||(u={})),function(e){e.PROVIDER="provider",e.RECIPIENT="recipient"}(o||(o={}))},7470:(e,t,r)=>{var n,a,c,u,o,l,i,s,p,f,d,m,h,v,b;r.d(t,{Ap:()=>o,B:()=>l,CN:()=>i,Dj:()=>h,Dv:()=>f,G9:()=>a,H3:()=>u,I5:()=>m,Md:()=>v,N1:()=>s,Pn:()=>c,fB:()=>b,hk:()=>p,sz:()=>d,yN:()=>n}),function(e){e.NAME="name",e.PREPAYMENT="prepayment",e.QUANTITY="quantity",e.DEFAULT_QUANTITY="defaultquantity",e.CONTRACT_QUANTITY="contractquantity",e.DISCOUNT_PRECENT="discountprecent",e.DISCOUNT_AMOUNT="discountamount",e.DEFAULT="default",e.CURRENT="current",e.DEFAULT_MONTH="defaultmonth",e.CURRENT_MONTH="currentmonth",e.PREPAYMENT_SUM="prepaymentsum",e.QUANTITY_SUM="quantitysum",e.CONTRACT_SUM="contractsum",e.MEASURE="measure",e.MEASURE_CODE="measureCode",e.CONTRACT="contract",e.SUPPLY="supply",e.SUPPLY_FOR_OFFER="supplyForOffer"}(n||(n={})),function(e){e.NAME="Наименование",e.QUANTITY="Количество",e.SUM="Сумма",e.DEFAULT_QUANTITY="Количество изначальное",e.DISCOUNT_PRECENT="Скидка, %",e.DISCOUNT_AMOUNT="Скидка в рублях",e.DEFAULT="Цена по прайсу",e.CURRENT="Цена",e.DEFAULT_MONTH="Цена по прайсу в месяц",e.CURRENT_MONTH="Цена в месяц",e.QUANTITY_SUM="Сумма Количество",e.CONTRACT_QUANTITY="При заключении договора от",e.PREPAYMENT_QUANTITY="При внесении предоплаты от",e.CONTRACT_SUM="Сумма за весь период обслуживания",e.PREPAYMENT_SUM="Сумма предоплаты",e.MEASURE="Единица",e.MEASURE_CODE="Кодовое обозначение единицы",e.CONTRACT="contract",e.SUPPLY="Количество доступов",e.SUPPLY_FOR_OFFER="Версия"}(a||(a={})),function(e){e.MONTH="month",e.YEAR="year",e.MEASURE="measure",e.PRICE="price",e.DISCOUNT="discount",e.STYLE="style",e.SUPPLY="supply"}(c||(c={})),function(e){e.SHOW="show",e.UNSHOW="unshow",e.INVOICE="invoice"}(u||(u={})),function(e){e.TEMPLATE="template",e.PROVIDER="provider",e.RECIPIENT="recipient"}(o||(o={})),function(e){e.NO="no",e.SMALL="small",e.MEDIUM="medium",e.BIG="big"}(l||(l={})),function(e){e.LIST="list",e.TABLE="table",e.TABLE_WITH_GROUP="tableWithGroup"}(i||(i={})),function(e){e.NO="Нет",e.SMALL="Мало",e.MEDIUM="Средне",e.BIG="Много"}(s||(s={})),function(e){e.NO="no",e.YES="yes"}(p||(p={})),function(e){e.NO="Нет",e.YES="Да"}(f||(f={})),function(e){e.LIST="Список",e.TABLE="Таблица",e.TABLE_WITH_GROUP="Таблица с разделами"}(d||(d={})),function(e){e.PROVIDER="provider",e.COMPANY_TYPE="clientType"}(m||(m={})),function(e){e.MONTH="мес.",e.ABON_6="абон. 6 мес.",e.ABON_12="абон. 12 мес.",e.ABON_24="абон. 24 мес.",e.LIC_6="лиц. 6 мес.",e.LIC_12="лиц. 12 мес.",e.LIC_24="лиц. 24 мес."}(h||(h={})),function(e){e.STYLE="style",e.DESCRIPTION="description",e.WITH_STAMP="withStamps",e.WITH_MANAGER="withManager",e.IS_PRICE_FIRST="isPriceFirst"}(v||(v={})),function(e){e.STYLE="Стиль инфоблоков",e.DESCRIPTION="Количество описания наполнения",e.WITH_STAMP="С подписями и печатями",e.WITH_MANAGER="Контакты менеджера",e.IS_PRICE_FIRST="Сначала цена, потом инфоблоки"}(b||(b={}))},4353:(e,t,r)=>{var n,a;r.d(t,{F:()=>n}),function(e){e.GET="get",e.POST="post",e.PUT="put",e.DELETE="delete"}(n||(n={})),function(e){e.ENTITY="entity",e.ENTITIES="entities"}(a||(a={}))},8816:(e,t,r)=>{var n,a;r.d(t,{p:()=>a}),function(e){e.INTERNET="Интернет",e.PROXIMA="Проксима"}(n||(n={})),function(e){e.UNIVERSAL="Универсальная линейка",e.PROF="ПРОФ"}(a||(a={}))},1965:(e,t,r)=>{var n,a,c,u;r.d(t,{Cs:()=>a,bV:()=>u,ju:()=>c,zt:()=>n}),function(e){e.GENRAL="general",e.ALTERNATIVE="alternative"}(n||(n={})),function(e){e.ROWS="rows",e.SET="set"}(a||(a={})),function(e){e.PRECENT="precent",e.AMOUNT="amount"}(c||(c={})),function(e){e.PRICE="price",e.QUANTITY="quantity",e.DISCOUNT="discount",e.DISCOUNT_AMOUNT="discountAmount",e.MEASURE="measure",e.ONMONTH="onmonth",e.SUM="sum"}(u||(u={}))},1103:(e,t,r)=>{var n;r.d(t,{p:()=>n}),function(e){e.GARANT="garant",e.LT="lt",e.CONSALTING="consalting",e.STAR="star"}(n||(n={}))},8942:(e,t,r)=>{var n;r.d(t,{z:()=>n}),function(e){e.INTERNET="internet",e.PROXIMA="proxima"}(n||(n={}))},3594:(e,t,r)=>{r.d(t,{y:()=>n});var __assign=function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},__assign.apply(this,arguments)},__spreadArray=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,c=t.length;a<c;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},n=function getDocumentInfoblocks(e,t,r,n,c,u){var o=[];return a(e,t,r,n,c,u).forEach((function(e){e.forEach((function(e){var t=e.groupsName;e.value.forEach((function(r){if(r.checked){var n=o.find((function(e){return e.groupsName==t}));n?n.value.push(r):o.push(__assign(__assign({},e),{value:[r]}))}}))}))})),o},a=function filterGroups(e,t,r,n,a,c){var u=__assign({},t),o=__assign({},e[1]),l=[],i=[],s=__spreadArray([],e[1].value,!0),p=__spreadArray([],e,!0);return t.value&&t.value.length&&t.value.forEach((function(e){e.isLa?i.push(e):l.push(e)})),i&&i.length&&i.forEach((function(e){return s.push(e)})),u.value=l,o.value=s,p[1]=o,[p,[u],r,[n],[a],[c]]}},4194:(e,t,r)=>{r.d(t,{v:()=>a});var n=r(9163),a=function getInitialQuestions(e,t){var r;return(r={})[n.wQ.ONE]={id:0,title:"Сделать счет ?",isActive:e,value:!1,isAnswered:!0},r[n.wQ.MANY]={id:1,title:"Сделать счета для всех товаров ?",isActive:t,value:!1,isAnswered:!0},r[n.wQ.PRESENTATION]={id:2,title:"Документы в продолжение презентации ?",isActive:!0,value:!1,isAnswered:!0},r}},5063:(e,t,r)=>{r.d(t,{IU:()=>l,NJ:()=>a,Ux:()=>s,o2:()=>i});var n=r(7470),a=function getMonthTitle(e){var t=e%10,r=e%100;return"".concat(e,1===t&&11!==r?" месяца":" месяцев")},c=function getMonthTitleAccusative(e){var t=e%10,r=e%100;return"".concat(e,1===t&&11!==r?" месяц":2!==t&&3!==t&&4!==t||r>=12&&r<=14?" месяцев":" месяца")},u=function getLicenseTitleAccusative(e){var t=e<=20?["одну","две","три","четыре","пять","шесть","семь","восемь","девять","десять","одиннадцать","двенадцать","тринадцать","четырнадцать","пятнадцать","шестнадцать","семнадцать","восемнадцать","девятнадцать","двадцать"][e-1]:e,r=e%10,n=e%100;return"".concat(t,1===r&&11!==n?" лицензию":2!==r&&3!==r&&4!==r||n>=12&&n<=14?" лицензий":" лицензии")},o=function getSubscriptionTitleAccusative(e){var t=e<=20?["один","два","три","четыре","пять","шесть","семь","восемь","девять","десять","одиннадцать","двенадцать","тринадцать","четырнадцать","пятнадцать","шестнадцать","семнадцать","восемнадцать","девятнадцать","двадцать"][e-1]:e,r=e%10,n=e%100;return"".concat(t,1===r&&11!==n?" абонемент":2!==r&&3!==r&&4!==r||n>=12&&n<=14?" абонементов":" абонемента")},l=function getFullMeasureValue(e,t){var r="",a="",l="";switch(e){case n.Dj.MONTH:return t&&(a=c(t),r="".concat(a)),r;case n.Dj.ABON_6:return 6,a=c(6),r="абонемент на ".concat(a),t&&(l=o(t),r="".concat(l," на ").concat(a)),r;case n.Dj.ABON_12:return 12,a=c(12),r="абонемент на ".concat(a),t&&(l=o(t),r="".concat(l," на ").concat(a)),r;case n.Dj.ABON_24:return 24,a=c(24),r="абонемент на ".concat(a),t&&(l=o(t),r="".concat(l," на ").concat(a)),r;case n.Dj.LIC_6:return 6,a=c(6),r="лицензию на ".concat(a),t&&(l=u(t),r="".concat(l," на ").concat(a)),r;case n.Dj.LIC_12:return 12,a=c(12),r="лицензию на ".concat(a),t&&(l=u(t),r="".concat(l," на ").concat(a)),r;case n.Dj.LIC_24:return 24,a=c(24),r="лицензию на ".concat(a),t&&(l=u(t),r="".concat(l," на ").concat(a)),r;default:return r}},i=function getDiscountPrecentVisual(e){return Number((100-100*e).toFixed(2))},s=function getCurrentDate(){var e=new Date,t=e.getFullYear(),r=e.getMonth(),n=e.getDate();return"".concat(n.toString().padStart(2,"0")," ").concat(["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][r]," ").concat(t," г.")}},3710:(e,t,r)=>{r.d(t,{AC:()=>f,Gr:()=>u,Rb:()=>l,aF:()=>i,ey:()=>s,y$:()=>p});var n=r(6375),a=r(7470),c=r(5063),__assign=function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},__assign.apply(this,arguments)},u=function getPriceCellsFromSets(e,t,r,a,c){var u={general:[],alternative:[],total:[]},l=[];l=(0,n.EK)(a.prof,l),l=(0,n.EK)(a.universal,l);var i=!1,s=!1,p=[];return[e,t].forEach((function(e){e.forEach((function(e){1!==e.price.discount.precent&&(s=!0),p.push(e.contract.number)}))})),p.forEach((function(e,t){e!==p[t-1]&&(i=!0)})),e.map((function(e,t){var r=o(e,l,c,i,s);u.general.push(r)})),t.map((function(e,t){var r=o(e,l,c,i,s);u.alternative.push(r)})),r.map((function(e,t){var r=o(e,l,c,i,s);u.total.push(r)})),u},o=function getDocumentPriceRow(e,t,r,n,c){var u={name:e.name,cells:[],target:e.type},o=r.find((function(t){return t.number==e.supply.number}));for(var l in u.cells.push({name:a.G9.NAME,code:a.yN.NAME,isActive:!0,type:"string",order:0,defaultValue:e.name,value:e.name+" "+e.supply.name,target:e.type}),u.cells.push({name:a.G9.SUPPLY,code:a.yN.SUPPLY,isActive:!1,type:"string",order:0,defaultValue:e.supply.name,value:e.supply.name,target:e.type,supply:o}),u.cells.push({name:a.G9.SUPPLY_FOR_OFFER,code:a.yN.SUPPLY_FOR_OFFER,isActive:!1,type:"string",order:0,value:e.supply.forkp,defaultValue:e.supply.forkp,target:e.type,supply:o}),e.price){var i=t.find((function(t){return t.number===e.price[a.yN.MEASURE].contractNumber}));if("default"===l)u.cells.push({name:a.G9.DEFAULT,code:a.yN.DEFAULT,isActive:c,target:e.type,type:"string",order:1,defaultValue:d(e.price[l]),value:d(e.price[l])});else if(l===a.yN.CURRENT)u.cells.push({name:a.G9.CURRENT,code:a.yN.CURRENT,isActive:!0,target:e.type,type:"string",order:3,defaultValue:d(e.price[l]),value:d(e.price[l])});else if(l===a.yN.MEASURE)u.cells.push({name:a.G9.MEASURE,code:a.yN.MEASURE,isActive:!0,target:e.type,type:"string",order:5,defaultValue:e.price[l].name,value:e.price[l].name}),u.cells.push({name:a.G9.CONTRACT,code:a.yN.CONTRACT,isActive:!1,type:"contract",order:10,defaultValue:i||null,value:i||null,target:e.type});else if(l===a.yN.QUANTITY)u.cells.push({name:a.G9.QUANTITY,code:a.yN.QUANTITY,isActive:!0,target:e.type,type:"string",order:4,defaultValue:e.price[l],value:e.price[l]}),u.cells.push({name:a.G9.DEFAULT_QUANTITY,code:a.yN.DEFAULT_QUANTITY,isActive:!1,target:e.type,type:"string",order:4,defaultValue:e.price[l],value:e.price[l]});else if("month"===l){var s=i?parseFloat((e.price[a.yN.CURRENT]/i.prepayment).toFixed(2)):0;u.cells.push({name:a.G9.CURRENT_MONTH,code:a.yN.CURRENT_MONTH,isActive:!1,target:e.type,type:"string",order:3,defaultValue:d(s),value:d(s)});var p=i?e.price[a.yN.DEFAULT]/i.prepayment:0;u.cells.push({name:a.G9.DEFAULT_MONTH,code:a.yN.DEFAULT_MONTH,isActive:!1,target:e.type,type:"string",order:1,defaultValue:d(p),value:d(p)})}else"discount"===l?(u.cells.push({name:a.G9.DISCOUNT_PRECENT,code:a.yN.DISCOUNT_PRECENT,isActive:c,target:e.type,type:"string",order:2,defaultValue:d(e.price[l].precent),value:d(e.price[l].precent)}),u.cells.push({name:a.G9.DISCOUNT_AMOUNT,code:a.yN.DISCOUNT_AMOUNT,isActive:!1,target:e.type,type:"string",order:2,defaultValue:e.price[l].amount,value:e.price[l].amount})):"sum"===l?u.cells.push({name:a.G9.SUM,code:a.yN.PREPAYMENT_SUM,isActive:!0,target:e.type,type:"string",order:8,defaultValue:d(e.price[l]),value:d(e.price[l])}):"year"===l&&u.cells.push({name:a.G9.CONTRACT_SUM,code:a.yN.CONTRACT_SUM,isActive:!0,target:e.type,type:"string",order:9,defaultValue:d(e.price[l]),value:d(e.price[l])})}return u},l=function changeCellsFromMeasure(e,t,r,n){var c=__assign({},e);for(var u in c)c[u]=c[u].map((function(e){var r=e.cells.find((function(e){return e.name===a.G9.DEFAULT})),c=e.cells.find((function(e){return e.name===a.G9.DEFAULT_MONTH})),u=(e.cells.find((function(e){return e.name===a.G9.CURRENT_MONTH})),e.cells.find((function(e){return e.name===a.G9.CONTRACT}))),o=(parseFloat((r.value/u.value.prepayment).toFixed(2)),e.cells.find((function(e){return e.name===a.G9.DEFAULT_QUANTITY}))),l=e.cells.find((function(e){return e.name===a.G9.QUANTITY}));return e.cells=e.cells.map((function(e){if(e.name===a.G9.CURRENT)return __assign(__assign({},e),{isActive:t});if(e.name===a.G9.CURRENT_MONTH)return __assign(__assign({},e),{isActive:!t});if(e.name===a.G9.DEFAULT){var i=!(n&&!c.isActive)&&t;return __assign(__assign({},e),{isActive:i})}if(e.name===a.G9.DEFAULT_MONTH){var s=!t&&r.isActive;return __assign(__assign({},e),{isActive:s})}if(e.name===a.G9.DISCOUNT_PRECENT)return __assign({},e);if(e.name===a.G9.QUANTITY){var p=o.value,f=l;return t||(p=0!==u.value.number&&1!==u.value.number?u.value.prepayment*f.value:u.value.prepayment),__assign(__assign({},e),{value:p})}return e.name===a.G9.MEASURE?__assign(__assign({},e),{value:t?u.value.measureName:"мес."}):e})),e}));return c},i=function changeCellsDefaultPrice(e,t,r,n){var c=__assign({},e);for(var u in c)c[u]=c[u].map((function(e){e.cells.find((function(e){return e.name===a.G9.CURRENT_MONTH}));return e.cells=e.cells.map((function(e){if(e.name===a.G9.DEFAULT){var c=!n&&!r&&!t;return __assign(__assign({},e),{isActive:c})}if(e.name===a.G9.DEFAULT_MONTH){var u=!(!n&&!r)&&!t;return __assign(__assign({},e),{isActive:u})}return e})),e}));return c},s=function changeCellsDiscount(e,t){var r=__assign({},e);for(var n in r)r[n]=r[n].map((function(e){e.cells.find((function(e){return e.name===a.G9.CURRENT_MONTH}));return e.cells=e.cells.map((function(e){return e.name===a.G9.DISCOUNT_PRECENT?__assign(__assign({},e),{isActive:!t}):e})),e}));return r},p=function changeCellsFromYear(e,t,r,n){var u=n==a.H3.INVOICE,o=__assign({},e);for(var l in o)o[l]=o[l].map((function(e){e.cells.find((function(e){return e.name===a.G9.CURRENT_MONTH})),e.cells.find((function(e){return e.name===a.G9.DEFAULT}));var o=e.cells.find((function(e){return e.name===a.G9.CONTRACT})),l=e.cells.find((function(e){return e.name===a.G9.DEFAULT_QUANTITY}));return e.cells=e.cells.map((function(e){if(e.code===a.yN.QUANTITY){var i=a.G9.QUANTITY,s=Number((l.value*o.value.prepayment).toFixed(2)),p=(0,c.NJ)(s);return n===a.H3.SHOW?(i=a.G9.CONTRACT_QUANTITY,s=Number((l.value*o.value.prepayment).toFixed(2)),p=(0,c.NJ)(s)):n===a.H3.UNSHOW?i=a.G9.PREPAYMENT_QUANTITY:n===a.H3.INVOICE&&(s=l,p=l.value),__assign(__assign({},e),{name:i,value:p})}if(e.code===a.yN.PREPAYMENT_SUM){var f=a.G9.SUM;return n===a.H3.SHOW?f=a.G9.CONTRACT_SUM:n===a.H3.UNSHOW&&(f=a.G9.PREPAYMENT_SUM),__assign(__assign({},e),{name:f})}if(e.code===a.yN.MEASURE){var d=!0;return(n===a.H3.SHOW||n===a.H3.UNSHOW)&&(d=!1),__assign(__assign({},e),{isActive:d})}return e.name===a.G9.CURRENT?__assign(__assign({},e),{isActive:u}):e.name===a.G9.CURRENT_MONTH?__assign(__assign({},e),{isActive:!u}):e.name===a.G9.DEFAULT?__assign(__assign({},e),{isActive:u&&t}):e.name===a.G9.DEFAULT_MONTH?__assign(__assign({},e),{isActive:!u&&t&&r}):e})),e}));return o},f=function changeCellsFromSupply(e,t,r,n,c,u,o,l){var i=__assign({},e);if(t)for(var s in i)i[s]=i[s].map((function(e){var r=e.cells.find((function(e){return e.name===a.G9.SUPPLY})),n=e.cells.find((function(e){return e.name===a.G9.SUPPLY_FOR_OFFER}));e.cells.find((function(e){return e.name===a.G9.CONTRACT}));return e.cells=e.cells.map((function(e){if(e.name===a.G9.NAME){var c="";t===a.H3.UNSHOW?c=r.defaultValue:t===a.H3.SHOW&&(c=n.defaultValue);var u=e.defaultValue+" "+c;return __assign(__assign({},e),{value:u})}return e.name===a.G9.SUPPLY||e.name===a.G9.SUPPLY_FOR_OFFER?__assign({},e):e})),e}));return i},d=function getRoundPrice(e){return Number(e.toFixed(2))}},1423:(e,t,r)=>{r.d(t,{An:()=>o,Jd:()=>l,Kk:()=>i,Xy:()=>a,a4:()=>u,vv:()=>c});var n=r(7470),__assign=function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},__assign.apply(this,arguments)},a=function updateOptionsFromCells(e,t,r,a,c,u,o,l){var i=__assign({},t);return r!==n.Pn.YEAR?(i[r].status!==a&&(i[r]=__assign({},i[r]),i[r].status=a),e.general[0].cells.map((function(t){if(t.name===n.G9.CURRENT_MONTH)t.isActive?(i.month=__assign({},i.month),i.month.status=n.H3.UNSHOW):(i.month=__assign({},i.month),i.month.status=n.H3.SHOW);else if(t.name===n.G9.DEFAULT||t.name===n.G9.DEFAULT_MONTH){var a=e.general[0].cells.find((function(e){return e.name===n.G9.DEFAULT})),s=e.general[0].cells.find((function(e){return e.name===n.G9.DEFAULT_MONTH}));a&&s&&(u?(a.isActive||s.isActive?(i.price=__assign({},i.price),i.price.status=n.H3.UNSHOW):o||(i.price=__assign({},i.price),i.price.status=n.H3.SHOW),i.price.isActive=!0):(i.price.status=n.H3.UNSHOW,i.price.isActive=!1))}else t.name===n.G9.DISCOUNT_PRECENT?u?(l||t.isActive?(i.discount=__assign({},i.discount),i.discount.status=n.H3.UNSHOW):o||l||t.isActive||(i.discount=__assign({},i.discount),i.discount.status=n.H3.SHOW),i.discount.isActive=!0):(i.discount.status=n.H3.UNSHOW,i.discount.isActive=!1):t.name===n.G9.SUPPLY&&r===n.Pn.SUPPLY&&(c===n.H3.SHOW?(i.supply=__assign({},i.supply),i.supply.status=n.H3.UNSHOW):c===n.H3.UNSHOW?(i.supply=__assign({},i.supply),i.supply.status=n.H3.INVOICE):c===n.H3.INVOICE&&(i.supply=__assign({},i.supply),i.supply.status=n.H3.SHOW))}))):(i.year=__assign({},i.year),i.year.status=c),i},c=function getIsMix(e){var t=[];for(var r in e)e[r].forEach((function(e){var r=e.cells.find((function(e){return e.code===n.yN.CONTRACT}));t.push(r.value.number)}));return!t.every((function(e){return 0===e||1===e}))},u=function getIsAbonOrLic(e){var t=[];for(var r in e)e[r].forEach((function(e){var r=e.cells.find((function(e){return e.code===n.yN.CONTRACT}));t.push(r.value.number)}));return t.every((function(e){return e>1}))},o=function getIsDiscount(e){var t=!1;for(var r in e)e[r].forEach((function(e){var r=e.cells.find((function(e){return e.code===n.yN.DISCOUNT_PRECENT}));r&&r.value&&1!==r.value&&(t=!0)}));return t},l=function getInitialOptions(e,t,r,a){return{year:a.priceYear||{name:n.Pn.YEAR,show:"Показать сумму за весь период обслуживания",unshow:"Показать сумму предоплаты",invoice:"Показать количество и сумму",status:n.H3.INVOICE,isYear:!0,isActive:!0},price:a.priceDefault||{name:n.Pn.PRICE,show:"Показать цену по прайсу",unshow:"Скрыть цену по прайсу",status:t?n.H3.UNSHOW:n.H3.SHOW,isYear:!1,isActive:!0},discount:a.priceDiscount||{name:n.Pn.DISCOUNT,show:"Показать скидку",unshow:"Скрыть скидку",status:t?n.H3.UNSHOW:n.H3.SHOW,isYear:!1,isActive:!0},measure:{name:n.Pn.MEASURE,show:"Сделать единицу измерения - месяцы",unshow:"Вернуть единицы измерения по умолчанию",status:n.H3.SHOW,isYear:!1,isActive:e},supply:a.priceSupply||{name:n.Pn.SUPPLY,show:"Показать ОД развёрнуто",unshow:"Сократить информацию об ОД",invoice:"Убрать ОД",status:n.H3.SHOW,isYear:!1,isActive:!0}}},i=function getDocumentPriceInitialData(e,t,r){var a={isInvoice:!0,isDefaultShow:e,isTable:!0,isOneMeasure:!t,isDiscountShow:e,isSupplyLong:!1,prepaymentStyle:n.H3.INVOICE};return r&&((a=__assign({},r)).isOneMeasure=!t),a}},4650:(e,t,r)=>{r.d(t,{X:()=>a});var n=r(6097),__awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(a,c){function fulfilled(e){try{step(n.next(e))}catch(e){c(e)}}function rejected(e){try{step(n.throw(e))}catch(e){c(e)}}function step(e){e.done?a(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))},__generator=function(e,t){var r,n,a,c,u={label:0,sent:function sent(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function verb(o){return function(l){return function step(o){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(u=0)),u;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,n=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(a=u.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){u.label=o[1];break}if(6===o[0]&&u.label<a[1]){u.label=a[1],a=o;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(o);break}a[2]&&u.ops.pop(),u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},a=function getRecipientCase(e,t,r){return __awaiter(void 0,void 0,void 0,(function(){return __generator(this,(function(a){switch(a.label){case 0:return[4,n.gT.service(r,"post",r,{word:e,wordCase:t})];case 1:return[2,a.sent()||""]}}))}))}},630:(e,t,r)=>{r.d(t,{CI:()=>u,ad:()=>a,di:()=>c});var n=r(9516),a=function getWithLetter(e){var t=!1;return e&&e.fields.forEach((function(e){"isLetter"==e.code&&"false"!==e.value&&"0"!==e.value&&""!==e.value&&"undefined"!==e.value&&"null"!==e.value&&null!==e.value&&0!==e.value&&void 0!==e.value&&!1!==e.value&&(t=!0)})),t},c=function getHaveLetter(e){var t=!1;return e&&e.fields.forEach((function(e){"isLetter"==e.code&&e.isActive&&e.isClient&&(t=!0)})),t},u=function getRecipientData(e,t,r,a){var c;return(c={})[n.fu.COMPANY_NAME]=a,c[n.fu.INN]=e,c[n.fu.POSITION]=r,c[n.fu.POSITION_CASE]="",c[n.fu.RECIPIENT]=t,c[n.fu.RECIPIENT_CASE]="",c[n.fu.ADRESS]="",c.code=n.WL.RECIPIENT,c.type="",c}},6375:(e,t,r)=>{r.d(t,{EK:()=>u,I_:()=>l,eY:()=>o});var n=r(2447),a=r(4974),c=r(8942),__spreadArray=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,c=t.length;a<c;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},u=function getArrayContracts(e,t){var r=__spreadArray([],t,!0);for(var n in e)if("internet"===n||"proxima"===n){var a=function _loop_1(t){var a=e[n][t];r.find((function(e){return e.number==a.number}))||r.push(a)};for(var c in e[n])a(c)}return r},o=function getFiltredContracts(e,t,r,n){var a=[];return a=u(e,a),a=u(t,a),l(r,n,a)},l=function filterContracts(e,t,r){var u=[];return r.forEach((function(r){e.type===c.z.INTERNET?(t!==n.B5.PROF||r.shortName!==a.e.internet&&r.shortName!==a.e.abonHalf&&r.shortName!==a.e.abonYear&&r.shortName!==a.e.abonTwoYears&&r.shortName!==a.e.licHalf&&r.shortName!==a.e.licYear&&r.shortName!==a.e.licTwoYears)&&(t!==n.B5.UNIVERSAL||r.shortName!==a.e.internet&&r.shortName!==a.e.licHalf&&r.shortName!==a.e.licYear&&r.shortName!==a.e.licTwoYears)||u.push(r):e.type===c.z.PROXIMA&&10!==e.number?r.shortName!==a.e.proxima&&r.shortName!==a.e.licHalf&&r.shortName!==a.e.licYear&&r.shortName!==a.e.licTwoYears||u.push(r):"proxima"===e.type&&10===e.number&&r.shortName===a.e.proxima&&u.push(r)})),u}},9978:(e,t,r)=>{r.d(t,{$F:()=>P,Fc:()=>E,GB:()=>p,Gv:()=>s,Rj:()=>T,TB:()=>_,Vi:()=>v,k0:()=>f,kK:()=>O,n1:()=>d,qw:()=>b,tx:()=>h,wC:()=>y,xo:()=>w});var n=r(2447),a=r(1965),c=r(1103),u=r(8075),o=r(8816),l=r(6375),i=r(2766),__assign=function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},__assign.apply(this,arguments)},__spreadArray=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,c=t.length;a<c;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},s=function getRowFromProduct(e,t,r,n,u){var o,l=0,s=(t.prepayment,t.discount),p=!1;t.withAbs?l=t.type===c.p.CONSALTING?Number(t.abs)*Number(r.abs):Number(t.abs)*Number(r.abs)*Number(n.coefficient):(0!==t.contractNumber&&1!==t.contractNumber&&!0,"msk"===r.name&&(p=!0),l=(0,i.ik)(u,t,p)),o=(l=Number(l)*t.contractCoefficient)*Number(s);var f=Number((Number(l)/Number(t.contractCoefficient)).toFixed(2)),d=Number((o-l).toFixed(2)),m=l,h=o,v=t.discount,b=o;t.isFreeStar&&(h=0,d=l,v=1,b=0,f=0);var y={default:m,current:h,measure:{id:t.measureId,code:t.measureCode,type:t.contractCoefficient,name:t.measureName,contractNumber:t.contractNumber},month:f,quantity:1,discount:{precent:v,amount:d,current:a.ju.PRECENT},sum:b};return{number:t.number,name:t.name,shortName:t.complectName,type:e,productType:t.type,id:!1,setId:0,isUpdating:!1,complect:{type:t.complectType,number:t.complectNumber},contract:{name:t.contractName,number:t.contractNumber},supply:{name:t.supplyName,forkp:t.quantityForKp,number:n.number,type:n.type},price:y}},p=function getDataForInitialProductRow(e,t){var r=e.profs,n=e.universals,u=__spreadArray(__spreadArray([],r,!0),n.complects,!0),o=e.legalTech.packages,i=[],p=o&&N(c.p.LT);for(var d in i.push(p),o)i.push(o[d]);var h=e.legalTech.current||i[0],v=e.consalting.packages,y=[],g=v&&N(c.p.CONSALTING);for(var d in y.push(g),v)y.push(v[d]);var w=e.consalting.current||y[0],P=N(c.p.STAR),O=P&&[P,e.star.package],_=e.star&&e.star.current||P,T=e.od.all,E=e.contract.prof,I=e.contract.universal,S=e.contract.current,C=e.od.currentOd,A=e.currentComplect,x=e.global.currentRegion,R=e.products.current,k=e.price,U=[];U=(0,l.EK)(E,U),U=(0,l.EK)(I,U);var D=s(t,R,x,C,k),j=A&&A.type,Z=f(j,T),L=(0,l.eY)(E,I,C,j);u=m(u,S,C,t,e.products.prof,e.products.universal);var F=b(e.rows.sets[a.zt.GENRAL][0]);return F.rows.garant=F.rows.garant.filter((function(e){return 0===e.id})),{complects:{name:"Комплект",current:A,items:u},lt:{name:"Legal Tech",current:h,items:i},consalting:{name:"Консалтинг",current:w,items:y},star:{name:"Дополнительно",current:_,items:O,order:5},contracts:{name:"Тип договора",current:S,items:U,filtred:L},supplies:{name:"Вид поставки",current:C,items:T,filtred:Z},target:t,row:D,set:F,region:x,isActive:!0}},f=function filterSupplies(e,t){var r=[];return t.forEach((function(t){(e===n.B5.PROF&&0!==t.number&&9!==t.number||e===n.B5.UNIVERSAL)&&r.push(t)})),r},d=function getCurrentRowsProp(e,t){return e.find((function(e){return e.number===t}))},m=function getFiltredComplects(e,t,r,c,l,i){var s=__spreadArray([],e,!0);return c===a.zt.GENRAL?(s=[],e.forEach((function(e){var a=e.type===n.B5.PROF?o.p.PROF:o.p.UNIVERSAL;(0,u.PJ)(l,i,e.number,r.number,t.shortName,a)&&s.push(e)})),s):s},h=function getRowsArrayFromSets(e,t){var r=[];return e.forEach((function(e){if(e.show||!t)for(var n in e.rows)"garant"!==n&&"lt"!==n&&"consalting"!==n&&"star"!==n||e.rows[n].map((function(e){return r.push(e)}));else e.total.forEach((function(e){return r.push(e)}))})),r},v=function getRowsCurrentClean(){return{complects:{name:"Комплект",current:null,items:[],order:0},supplies:{name:"Вид поставки",current:null,items:[],filtred:[],order:1},contracts:{name:"Тип договора",current:null,items:[],filtred:[],order:2},lt:{name:"Legal Tech",current:null,items:[],order:4},consalting:{name:"Консалтинг",current:null,items:[],order:3},star:{name:"Дополнительно",current:null,items:[],order:5},row:null,region:null,target:a.zt.GENRAL,isActive:!1,set:null}},b=function getSpreadSet(e){var t={garant:e.rows.garant.map((function(e){return y(e)})),lt:e.rows.lt.map((function(e){return y(e)})),consalting:e.rows.consalting.map((function(e){return y(e)})),star:e.rows.star.map((function(e){return y(e)}))},r=e.total.map((function(e){return y(e)}));return __assign(__assign({},e),{rows:t,total:r})},y=function getSpreadRow(e){var t=g(e.price);return __assign(__assign({},e),{supply:__assign({},e.supply),contract:__assign({},e.contract),complect:__assign({},e.complect),price:t})},g=function getSpreadRowPrice(e){return __assign(__assign({},e),{measure:__assign({},e.measure),discount:__assign({},e.discount)})},N=function getNoserviceSelectItem(e){return{number:3,name:"не выбирать",description:"",fullName:"не выбирать",msk:0,regions:0,type:e,isNoService:!0}},w=function getAllRowsFromSets(e,t){var r=[];for(var n in e)e[n].forEach((function(e){if(t)e.total.forEach((function(e){return r.push(e)}));else for(var n in e.rows)e.rows[n].forEach((function(e){return r.push(e)}))}));return r},P=function getGeneralRowsFromSets(e,t){var r=[];if(t)e.total.forEach((function(e){return r.push(e)}));else for(var n in e.rows)e.rows[n].forEach((function(e){return r.push(e)}));return r},O=function changeRowsPropInSet(e,t,r){var n=b(e);switch(t){case"isTotal":return n;case"isUpdating":for(var a in n.rows)n.rows[a]=n.rows[a].map((function(e){return e[t]=r,e}));return n.total[0].isUpdating=r,n;default:return e}},_=function unupdatingAllRows(e){var t=__assign({},e);return t.general=t.general.map((function(e){var t=__assign({},e);return t.show=!1,O(t,"isUpdating",!1)})),t.alternative=t.alternative.map((function(e){var t=__assign({},e);return t.show=!1,O(t,"isUpdating",!1)})),t},T=function getIsSomeSet(e){var t=!1;for(var r in e)e[r].forEach((function(e){var r=0;for(var n in e.rows)e.rows[n].forEach((function(e){return r++})),r>1&&(t=!0)}));return t},E=function getIsGeneralCanAdd(e){var t=!0;return e.forEach((function(e){e.rows.garant.length>1&&(t=!1)})),t}},8075:(e,t,r)=>{r.d(t,{Jg:()=>b,PJ:()=>p,aK:()=>h,kG:()=>m,lJ:()=>v,vG:()=>f});var n=r(2447),a=r(4974),c=r(8816),u=r(1103),o=r(8942),l=r(1965),i=r(9978),s=r(2766),__assign=function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},__assign.apply(this,arguments)},p=function getCurrentProduct(e,t,r,n,u,o){var l=null;return o===c.p.PROF?l=e[u].find((function(e){return e.supplyNumber===n&&e.complectNumber===r})):o===c.p.UNIVERSAL&&u!==a.e.abonHalf&&u!==a.e.abonYear&&u!==a.e.abonTwoYears&&(l=t[u].find((function(e){return e.supplyNumber===n&&e.complectNumber===r}))),l},f=function getCurrentServiceProduct(e,t,r,a,c){void 0===c&&(c=null);var u=null;if(e&&(a.forEach((function(r){r.complectNumber===e.number&&((0!==t.number&&1!==t.number||0!==r.contractNumber)&&t.number!==r.contractNumber||(u=__assign({},r)))})),u))if(!u.withPrice||e.type!==n.HV.LT_PACKAGE&&e.type!==n.HV.STAR)e.type===n.HV.CONSALTING&&u.abs&&(u.price=Number((u.abs*r.abs*u.prepayment).toFixed(2)));else{var o="regions";o="msk"===r.name?r.name:"regions",e.hasOwnProperty(o)&&(u.price=Number((e[o]*u.prepayment*u.contractCoefficient).toFixed(2)),e.type===n.HV.STAR&&c&&c.withStar&&(u.isFreeStar=!0))}return u},d=function productGenerate(e,t,r,c,o,l,i,s,p,f,d){void 0===p&&(p=null),void 0===f&&(f=null);var m=!1,h=!1;if(i.shortName!==a.e.licHalf&&i.shortName!==a.e.licYear&&i.shortName!==a.e.licTwoYears||(m=!0),i.shortName!==a.e.abonHalf&&i.shortName!==a.e.abonYear&&i.shortName!==a.e.abonTwoYears||(h=!0),null!==t&&l&&"garant"===s){var v=d,b=!1;return"universal"===t.type&&(b=!0),N(e,t.fullName,s,t.number,t.name,t.withConsalting,t.type,t.abs,l.number,l.name,l.type,l.quantityForKp,l,m,h,i.aprilName,i.shortName,i.number,i.measureNumber,i.measureId,i.measureCode,i.measureName,i.measureFullName,i.prepayment,i.discount,p,f,!1,b,d,v,!1,!1)}return"lt"===s&&r?N(e,"".concat(r.fullName),s,r.number,r.name,!1,n.HV.LT_PACKAGE,!1,!1,"",!1,"",!1,m,h,i.aprilName,i.shortName,i.number,i.measureNumber,i.measureId,i.measureCode,i.measureName,i.measureFullName,i.prepayment,1,"","",!0,!1,d,d,r.msk,r.regions):s===u.p.STAR&&o?N(e,"".concat(o.fullName),s,o.number,o.name,!1,n.HV.STAR,!1,!1,"",!1,"",!1,m,h,i.aprilName,i.shortName,i.number,i.measureNumber,i.measureId,i.measureCode,i.measureName,i.measureFullName,i.prepayment,1,"","",!0,!1,d,d,o.msk,o.regions):"consalting"===s&&c?N(e,"".concat(c.title),s,c.number,c.name,!0,n.HV.CONSALTING,c.abs,!1,"",!1,"",!1,m,h,i.aprilName,i.shortName,i.number,i.measureNumber,i.measureId,i.measureCode,i.measureName,i.measureFullName,i.prepayment,1,p,f,!1,!0,!1,!1,!1,!1):null},m=function generateGarantProducts(e,t,r,c,l,i,s){var p={prof:{internet:[],proxima:[],abonHalf:[],abonYear:[],abonTwoYears:[],licHalf:[],licYear:[],licTwoYears:[]},universal:{internet:[],proxima:[],licHalf:[],licYear:[],licTwoYears:[]}},f=s?1:0;return t.forEach((function(t){r.forEach((function(r){c.forEach((function(c){var s=null,m="",h="",v=null;if(t.type===n.B5.PROF&&r.type===o.z.PROXIMA&&10!==r.number&&(c.shortName===a.e.licHalf||c.shortName===a.e.licYear||c.shortName===a.e.licTwoYears)||t.type===n.B5.PROF&&r.type===o.z.INTERNET&&(c.shortName===a.e.internet||c.shortName===a.e.abonHalf||c.shortName===a.e.abonYear||c.shortName===a.e.abonTwoYears||c.shortName===a.e.licHalf||c.shortName===a.e.licYear||c.shortName===a.e.licTwoYears)||t.type===n.B5.PROF&&r.type===o.z.PROXIMA&&c.shortName===a.e.proxima){var b=l.prof.find((function(e){if(e.complectNumber===t.number&&e.supplyNumber===r.number&&e.region===f)return e}));if(r.type===o.z.PROXIMA&&(1===r.number||0===r.number||11===r.number||10===r.number)&&t.number,b&&b.price){if(s=b.price*c.prepayment,s=Number(s.toFixed(2)),t.withConsalting){var y=g(c.shortName,i[1]);m=y.prop,h=y.comment}(v=d(e,t,null,null,null,r,c,u.p.GARANT,m,h,s))&&(p[t.type][c.shortName]&&Array.isArray(p[t.type][c.shortName])?(p[t.type][c.shortName].push(v),e++):(p[t.type][c.shortName]=[v],e++))}}else if(t.type===n.B5.UNIVERSAL&&10!==r.number&&(c.shortName===a.e.licHalf||c.shortName===a.e.licYear||c.shortName===a.e.licTwoYears)||t.type===n.B5.UNIVERSAL&&r.type===o.z.INTERNET&&c.shortName===a.e.internet||t.type===n.B5.UNIVERSAL&&r.type===o.z.PROXIMA&&c.shortName===a.e.proxima){var N=d(e,t,null,null,null,r,c,u.p.GARANT,"","",!1);N&&(p[t.type][c.shortName]&&Array.isArray(p[t.type][c.shortName])?(p[t.type][c.shortName].push(N),e++):(p[t.type][c.shortName]=[N],e++))}}))}))})),p},h=function generateServiceProducts(e,t,r,a,c){var o=[];return a?a.forEach((function(r){t.forEach((function(t){if(0!==r.number){var n=g(t.shortName,r),a=n.prop,c=n.comment,l=d(e,null,null,r,null,null,t,u.p.CONSALTING,a,c,!1);l&&(o.push(l),e++)}}))})):r?r.forEach((function(r){t.forEach((function(t){if(r.type===n.HV.LT_PACKAGE){var a=d(e,null,r,null,null,null,t,u.p.LT,null,null,!1);a&&(o.push(a),e++)}}))})):c&&c.forEach((function(r){t.forEach((function(t){if(r.type===n.HV.STAR){var a=d(e,null,null,null,r,null,t,u.p.STAR,null,null,!1);a&&(o.push(a),e++)}}))})),o},v=function getUpdatedSetFromNewRow(e,t,r,n,a,c,o,p,f){void 0===n&&(n=!1),void 0===a&&(a=!0);var d=r?(0,i.qw)(r):{id:e,rows:{garant:[],lt:[],consalting:[],star:[]},total:[],show:n},m=r&&(t.id||0===t.id)?__assign({},(0,i.wC)(t)):__assign(__assign({},(0,i.wC)(t)),{id:d.rows[t.productType].length-1,setId:d.id}),h=!1,v=d&&d.total&&d.total.length>0&&d.total[0].price.quantity;if(o===l.zt.GENRAL)if(a){if(m.id=0,d.rows[t.productType]=[m],f){var b=(0,i.wC)(f);b.id=d.rows[u.p.GARANT].length,d.rows[u.p.GARANT].push(b)}}else a||(c?d.rows[t.productType].some((function(e){return e.id===t.id}))&&(d.rows[t.productType]=d.rows[t.productType].map((function(e){return e.id===t.id&&e.price.quantity!==t.price.quantity&&(h=!0),e.id===t.id?t:e}))):(m.id=d.rows[t.productType].length,d.rows[t.productType].push(m)));else o!==l.zt.ALTERNATIVE||p||(a||c&&d.rows[t.productType].some((function(e){return e.id===t.id}))&&(d.rows[t.productType]=d.rows[t.productType].map((function(e){return e.id===t.id&&e.price.quantity!==t.price.quantity&&(h=!0),e.id===t.id?t:e}))),d.rows[t.productType]=[m]);var g=[];for(var N in d.rows)if(Object.prototype.hasOwnProperty.call(d.rows,N)){var w=N;d.rows["".concat(w)].forEach((function(e){e.setId=d.id,h&&(v=t.price.quantity),v&&(e.price=(0,s.uT)(l.bV.QUANTITY,v,e.price)),g.push(e)}))}return d.total=y(g),d},b=function getUpdatedSetFromDeleteRow(e,t,r){var n=(0,i.qw)(e);if(n.rows[r]=n.rows[r].filter((function(e){return e.id!==t})),!(n.rows[u.p.GARANT].length>0))return null;var a=(0,i.tx)([n],!1);return n.total=y(a),n},y=function getTotalFromRows(e){var t=[],r=__assign({},e[0]);return r.price=__assign({},e[0].price),e.forEach((function(e,t){t>0&&(r.name+=" + ".concat(e.name),r.shortName+=" + ".concat(e.shortName),r.price.default+=e.price.default,r.price.current+=e.price.current,r.price.sum+=e.price.sum)})),r.price.default=r.price.default,r.price.current=r.price.current,r.price.sum=r.price.sum,r.price=(0,s.uT)(l.bV.SUM,r.price.sum,r.price),t.push(r),t},g=function getConsaltingCommentsFromContract(e,t){var r=t.contractProp,n=t.contractComment;return e===a.e.abonHalf||e===a.e.abonYear||e===a.e.abonTwoYears?(r=t.acontractProp,n=t.acontractComment):e!==a.e.licHalf&&e!==a.e.licYear&&e!==a.e.licTwoYears||(r=t.lcontractProp,n=t.lcontractComment),{prop:r,comment:n}},N=function getProduct(e,t,r,n,a,c,u,o,l,i,s,p,f,d,m,h,v,b,y,g,N,w,P,O,_,T,E,I,S,C,A,x,R){return{number:e,name:"".concat(t),productId:null,type:r,complectNumber:n,complectName:a,withConsalting:c,complectType:u,abs:o,supplyNumber:l,supplyName:i,supplyType:s,quantityForKp:p,contractSupplyName:f?d?f.lcontractName:m?f.acontractName:f.contractName:"",contractSupplyProp1:f?f.contractProp1:"",contractSupplyProp2:f?d?f.lcontractProp2:f.contractProp2:"",contractSupplyPropComment:f?d?f.lcontractPropComment:m?f.acontractPropComment:f.contractPropComment:"",contractSupplyPropEmail:f?d?f.lcontractPropEmail:f.contractPropEmail:"",contractSupplyPropLoginsQuantity:f?f.contractPropLoginsQuantity:"",contractSupplyPropSuppliesQuantity:f?f.contractPropSuppliesQuantity:"",contractName:h,contractShortName:v,contractNumber:b,measureNumber:y,measureId:g,measureCode:N,measureName:w,measureFullName:P,prepayment:1,contractCoefficient:O,discount:_,contractConsaltingProp:T,contractConsaltingComment:E,withPrice:I,withAbs:S,price:C,totalPrice:A,mskPrice:x,regionsPrice:R}}},2766:(e,t,r)=>{r.d(t,{PJ:()=>i,ik:()=>l,uT:()=>o});var n=r(2447),a=r(1965),c=r(1103),u=(r(9978),function(){return u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},u.apply(this,arguments)}),o=function calculateTotalPrice(e,t,r){var n=u({},r);switch(console.log(e),console.log(t),console.log(r),e){case a.bV.PRICE:var c=t,o=c*n.quantity,l=n.default*n.quantity-o,i=c/n.default,s=a.ju.PRECENT;return n=u(u({},n),{current:c,sum:o,default:parseFloat(n.default.toFixed(2)),discount:{precent:i,amount:l,current:s}}),console.log("price"),console.log(n),n;case a.bV.QUANTITY:var p="string"==typeof t?parseFloat(t):t;if(p<100&&p>0){var f=n.current*p,d=0!==f?f*n.discount.precent:n.default,m=a.ju.PRECENT;n=u(u({},n),{default:parseFloat(n.default.toFixed(2)),quantity:parseFloat(p.toFixed(0)),sum:f,discount:{precent:n.discount.precent,amount:d,current:m}})}return console.log("q"),console.log(n),n;case a.bV.DISCOUNT:var h=t;if(h<500&&h>-1500){var v=h/(n.default*n.quantity)*100,b=parseFloat(h.toFixed(2)),y=n.default-h/n.quantity,g=n.default*n.quantity-h,N=a.ju.AMOUNT;if(n.discount.current===a.ju.PRECENT)v=(100-t)/100,g=(y=n.default*v)*n.quantity,b=parseFloat((n.default*n.quantity-g).toFixed(2)),N=a.ju.PRECENT;n=u(u({},n),{default:n.default,current:y,sum:g,discount:{precent:v,amount:b,current:N}})}return console.log("DISCOUNT"),console.log(n),n;case a.bV.SUM:var w=t,P=w/n.quantity,O=P/n.default,_=parseFloat((n.default*n.quantity-w).toFixed(2)),T=n.discount.current;return O>-50&&O<50&&(n=u(u({},n),{default:parseFloat(n.default.toFixed(2)),sum:w,current:P,month:P,discount:{precent:O,amount:_,current:T}})),console.log("SUM"),console.log(n),n;case"CALCULATE_SET":var E=t,I=E/n.quantity,S=I/n.default,C=parseFloat((n.default*n.quantity-E).toFixed(2)),A=n.discount.current;return console.log("CALCULATE_SET"),console.log(u(u({},n),{default:n.default,sum:E,current:n.default,month:I,discount:{precent:S,amount:C,current:A}})),u(u({},n),{default:n.default,sum:E,current:n.default,month:I,discount:{precent:S,amount:C,current:A}});default:return n}},l=function getProfPrice(e,t,r){var a,u=r?1:0;return t.complectType===n.HV.PROF?(a=e[n.HV.PROF].find((function(e){if(e.complectNumber===t.complectNumber&&e.supplyNumber===t.supplyNumber&&e.region===u)return e})))&&a.price?a.price:0:(t.type===c.p.LT||t.type===c.p.STAR)&&(a=r?t.mskPrice:t.regionsPrice)||0},i=function changeRowOptionsTypes(e,t){var r=u({},t);if(r.price=u({},t.price),"discount"===e){var n=u({},t.price.discount),c=n.current;n.current=c===a.ju.AMOUNT?a.ju.PRECENT:a.ju.AMOUNT,r.price.discount=n}return r}}},e=>{e.O(0,[840,972,846,217,566,19,643,492,640,822,336,977,211,944,311,962,30,514,172,383],(()=>{return t=9147,e(e.s=t);var t}));e.O()}]);