(self.webpackChunkapril_kp=self.webpackChunkapril_kp||[]).push([[962],{8981:(e,t,r)=>{r.d(t,{ZP:()=>l,_3:()=>u,te:()=>c});var n=r(4572);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var o={inProgress:!0,inComponent:!1},i="PRELOADER",a="SET_COMPONENT_PRELOADER",c=function setPreloader(e){return{type:i,bool:e}},u=function setComponentPreloader(e){return{type:a,bool:e}};const l=function preloader(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return e.inProgress!==t.bool?_objectSpread(_objectSpread({},e),{},{inProgress:t.bool}):e;case a:return e.inComponent!==t.bool?_objectSpread(_objectSpread({},e),{},{inComponent:t.bool}):e;default:return e}}},5623:(e,t,r)=>{r.d(t,{Lw:()=>i,Xh:()=>c,mc:()=>a,td:()=>o});var n=r(3138),o="RESET",i="RESET_UNIVERSAL",a=function reset(){return{type:o}},c=function resetUniversal(){return function(e,t){e(a()),e((0,n.lr)())}}},7975:(e,t,r)=>{r.d(t,{D:()=>g,Eb:()=>S,Sg:()=>h,ZP:()=>I,sm:()=>_});var n=r(4572),o=r(5861),i=r(4687),a=r.n(i),c=r(2447),u=r(6097),l=r(5168),s=r(4806),p=r(3138),d=r(9978),f=r(1103),T=r(6630);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v={resultItems:[{title:"Комплект",id:"complect__name",type:"base",value:""},{title:"",id:"complect__error",type:"base",value:""},{title:"Вес",id:"blocksWeight",type:"base",value:""},{title:"Количество доступов",id:"pod",type:"base",value:""},{title:"Legal Tech в комплекте",id:"complect__name",type:"base",value:""},{title:"Стоимость Комплекта Гарант",id:"complect__price",type:"base",value:""},{title:"Legal Tech",id:"complect__lt",type:"withLt",value:"Legal Tech"},{title:"Вес LT",id:"complect__lt",type:"withLt",value:""},{title:"Стоимость LT",id:"complect__lt",type:"withLt",value:"0. 00 p"},{title:"Консалтинг",id:"consalting",type:"withConsalting",value:""},{title:"Стоимость Консалтинга",id:"consalting",type:"withConsalting",value:"0. 00 p"},{title:"Стоимость СТАР",id:"star",type:"star",value:"0. 00 p"},{title:"Общая Стоимость",id:"complect__lt",type:"total",value:"0. 00 p"},{title:"Описание комплекта",id:"description",type:"description",value:""}],isDescriptionGetting:!1,description:null,file:null,link:null},b="SET_RESULT",y="SET_REMEMBER_RESULT",O="SET_DESCRIPTION_FILE",E="DELETE_DESCRIPTION_FILE",R="SET_DESCRIPTION_FETCHING_STATUS",m=function setDescriptionFile(e,t){return{type:O,link:e,file:t}},g=function deleteDescriptionFile(){return{type:E}},_=function setDescriptionFetchingStatus(e){return{type:R,status:e}},h=function getResult(e){return function(t,r){var n=r(),o=n.global.currentComplectsType,i=n.universals.complects,a=n.result.resultItems[2].value,u=n.currentComplect,l=n.infoblocks,v=n.encyclopedias,y=n.legalTech,O=(n.star,u.title||u.name),E=n.region.current.inComplect,R=(0,s.l)(l,E,v,o),m=n.od.currentOd.contractPropSuppliesQuantity,g=y.ltIncluded,_=(0,d.tx)(n.rows.sets.general),h=null,S=null,I=null,D=null;_.length>0&&_.forEach((function(e){var t=e.totalPrice||e.price.current;e.productType===c.HV.LT||e.productType===c.HV.LT_PACKAGE||"legalTech"===e.productType||e.productType===f.p.LT?S=Number(t.toFixed(2)):e.productType===c.HV.CONSALTING||e.productType===f.p.CONSALTING?I=e:e.productType===c.HV.STAR?("+",h=Number(t.toFixed(2))):0===e.id&&(D=Number(t.toFixed(2)))})),"Эксперт PRO"===u.name&&g<2&&(g="LT собран неверно");var P=y.current,N=P&&P.name,L=P&&P.weight,C=0,A=0,w=null;I&&(C=I.totalPrice||I.price.sum||I.price.current,A=I&&C?Number(C.toFixed(2)):0,w=I?I.shortName||I.name:"");var F=Number(D+S+A+h),j=Number(F.toFixed(2)),U=u.type;R!==a&&"universal"===U&&t(e?(0,p.ur)(R,o,i,[]):(0,T.NO)(!0));var k=!1;(17!==u.number&&u.weight!==R||17==u.number&&R<u.weight)&&(k=p.VU),t(function setResult(e){return{type:b,values:e}}([{title:"Комплект",value:O},{title:"",value:k},{title:"Вес",value:R},{title:"Количество доступов",value:m},{title:"Legal Tech в комплекте",value:g},{title:"Стоимость",value:D},{title:"Legal Tech",value:N},{title:"Вес LT",value:L},{title:"Стоимость LT",value:S},{title:"Консалтинг",value:w},{title:"Стоимость Консалтинга",value:A},{title:"Стоимость СТАР",value:h},{title:"Общая Стоимость",value:j},{title:"Описание комплекта",value:""}]))}},S=function getDescription(){return function(){var e=(0,o.Z)(a().mark((function _callee(e,t){var r,n,o,i,c,s,p,d;return a().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(r=t(),n=r.app.domain,o=r.app.user,!(i=r.products.current)){a.next=20;break}return c={complectName:i.name,supply:i.quantityForKp},s=[],p=[],0,0,r.infoblocks.forEach((function(e){(0,l.X)(s,p,e,0,0)})),(0,l.X)(s,p,r.freeBlocks,0,0),(0,l.X)(s,p,r.encyclopedias[1],0,0),(0,l.X)(s,p,r.legalTech,0,0),(0,l.X)(s,p,r.consalting,0,0),(0,l.X)(s,p,r.star,0,0),a.next=18,u.Wr.getDescription(n,o,c,s,p);case 18:(d=a.sent).link&&e(m(d.link,d.file));case 20:e(_(!1));case 21:case"end":return a.stop()}}),_callee)})));return function(t,r){return e.apply(this,arguments)}}()};const I=function result(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:var r=e.resultItems.map((function(e,r){return _objectSpread(_objectSpread({},e),{},{value:t.values[r].value})}));return _objectSpread(_objectSpread({},e),{},{resultItems:r});case y:return t.result;case O:return _objectSpread(_objectSpread({},e),{},{description:t.link,link:t.link,file:t.file});case E:return e.description?_objectSpread(_objectSpread({},e),{},{description:null}):e;case R:return e.isDescriptionGetting!==t.status?_objectSpread(_objectSpread({},e),{},{isDescriptionGetting:t.status}):e;default:return e}}},350:(e,t,r)=>{r.d(t,{Mv:()=>R,ZD:()=>E,ZP:()=>_,h:()=>g,uc:()=>m});var n,o,i=r(6097),a=r(1324),c=r(7874),u=r(3595),l=r(3641),s=r(6678),__assign=function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},__assign.apply(this,arguments)},__awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n.throw(e))}catch(e){i(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))},__generator=function(e,t){var r,n,o,i,a={label:0,sent:function sent(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(c){return function(u){return function step(c){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,n=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}},__spreadArray=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};!function(e){e.FROM="from",e.TO="to"}(o||(o={}));var p=function getInitialDate(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1);return{first:(0,c.WU)(t,"yyyy-MM-dd"),current:(0,c.WU)(e,"yyyy-MM-dd")}},d={data:null,filter:null,actions:{items:[],current:[]},calling:null,date:(n={},n[o.FROM]=p().first,n[o.TO]=p().current,n.inProcess=!1,n),report:[],detalization:{report:null,action:null},isFetched:!1,isInitialized:!1},f=function setFetchedReport(e,t,r,n){return{type:"report/SET_FITCHED_REPORT",report:e,dateFieldId:t,actionFieldId:r,userFieldId:n}},T=function setFetchedFilter(e){return{type:"report/SET_FITCHED_FILTER",filter:e}},v=function setFetchedActions(e){return{type:"report/SET_FITCHED_ACTIONS",actions:e}},b=function setCurrentDate(e,t){return{type:"report/SET_CURRENT_DATE",from:e,to:t}},y=function setCurrentActions(e){return{type:"report/SET_CURRENT_ACTIONS",actions:e}},O=function setReportDetalizationCurrent(e){return{type:"report/SET_DETALIZATION_REPORT_CURRENT",report:e}},E=function getReportData(e){return void 0===e&&(e=null),function(e,t){return __awaiter(void 0,void 0,void 0,(function(){var r,n,o,p,d,b,y,E,R,m,g,_,h,S,I,D,P,N,L,C,A,w,F,j,U,k,Z,M,G;return __generator(this,(function(x){switch(x.label){case 0:return r=t(),n=r.app.domain,o=r.departament.current,p=null,o.length?(p=o,[3,7]):[3,1];case 1:return[4,l.j.getData("departament")];case 2:return(d=x.sent())?(p=JSON.parse(d),[3,6]):[3,3];case 3:return b={domain:n},[4,i.gT.service("bitrix/departament","post","departament",b)];case 4:return p=x.sent(),[4,l.j.setReportData(p,"departament")];case 5:x.sent(),x.label=6;case 6:p&&e(a._D.setFetchedDepartament(p)),x.label=7;case 7:return y=[],p&&p.map((function(e){return y.push(e.ID)})),E="",y,R="",m={},g="",_=r.report.date,h=(0,u.D)(_.from),S=(0,u.D)(_.to),I=(0,c.WU)(h,"dd.MM.yyyy"),D=(0,c.WU)(S,"dd.MM.yyyy"),P={domain:n,filters:{callDuration:60,callStartDateFrom:I,callStartDateTo:D,userId:1,userIds:y}},[4,l.j.getData("filter")];case 8:return x.sent(),N=null,[4,i.gT.service("bitrix/filter","post","filter",P)];case 9:return N=x.sent(),[4,l.j.setReportData(N,"filter")];case 10:if(x.sent(),L=[],!N)return[3,13];for(w in C=[],A=null,N)C.push(N[w]),"Действие"===N[w].NAME&&(R=N[w].FIELD_ID,m=N[w].DISPLAY_VALUES_FORM,N[w].DISPLAY_VALUES_FORM&&(A=N[w].DISPLAY_VALUES_FORM)),"Дата"===N[w].NAME&&(g=N[w].FIELD_ID),"S:employee"===N[w].TYPE&&(E=N[w].FIELD_ID);return F={domain:n,filters:{dateFrom:I,dateTo:D,userIds:y,departament:p,userFieldId:E,dateFieldId:g,actionFieldId:R,currentActions:m}},[4,l.j.getData("report")];case 11:return x.sent(),j=null,[4,i.gT.service("bitrix/report","post","report",F)];case 12:if((j=x.sent())&&e(f(j,g,R,E)),A&&A instanceof Object)for(U in A)k={id:Number(U),name:A[U]},L.push(k);e(v(L)),e(T(C)),x.label=13;case 13:if(!p||!p.length)return[3,17];Z=0,x.label=14;case 14:return Z<p.length?[4,s.r.getUserReport(p[Z].ID,L,I,D)]:[3,17];case 15:x.sent(),x.label=16;case 16:return Z++,[3,14];case 17:return M=p&&s.r.getData([L[0]],I,D,[p[0]]),[4,s.r.getPeriodsReport(M)];case 18:return G=x.sent(),e(O(G)),[2]}}))}))}},R=function changeDate(e,t){return function(r,n){return __awaiter(void 0,void 0,void 0,(function(){return __generator(this,(function(n){return r(b(e,t)),[2]}))}))}},m=function setCurrentActions(e){return function(t,r){return __awaiter(void 0,void 0,void 0,(function(){var n,o,i,a,c,u;return __generator(this,(function(l){return n=r().report.actions,o=n.items,i=n.current,a=i.find((function(t){return t.id===e})),c=__spreadArray([],n.current,!0),a?c=c.filter((function(t){return t.id!==e})):(u=o.find((function(t){return t.id===e})))&&c.push(u),t(y(c)),[2]}))}))}},g=function setDetalizationProps(e,t){return function(r,n){return __awaiter(void 0,void 0,void 0,(function(){var i,a,c,u,l,p,d,f,T,v,b,y;return __generator(this,(function(E){switch(E.label){case 0:switch(i=n(),a=i.departament.items,c=i.report.actions.items,u=null===(y=i.report.detalization.report)||void 0===y?void 0:y.user,l=i.report.detalization.action,p=i.report.date[o.FROM],d=i.report.date[o.TO],e){case"user":f=a.find((function(e){return e.ID===t})),console.log("setDetalizationProps searchingUser"),console.log(f),u=f||null;break;case"action":console.log("setDetalizationProps actions"),console.log(t),console.log(c),T=c.find((function(e){return e.id===Number(t)})),l=T||null}return v=u&&s.r.getData([l],p,d,[u]),[4,s.r.getPeriodsReport(v)];case 1:return b=E.sent(),r(O(b)),[2]}}))}))}};const _=function report(e,t){var r,n;switch(void 0===e&&(e=d),t.type){case"report/SET_FITCHED_FILTER":return __assign(__assign({},e),{filter:t.filter});case"report/SET_FITCHED_ACTIONS":return __assign(__assign({},e),{actions:__assign(__assign({},e.actions),{items:t.actions,current:t.actions}),detalization:__assign(__assign({},e.detalization),{action:t.actions.length?t.actions[0]:null})});case"report/SET_DETALIZATION_ACTION_CURRENT":return __assign(__assign({},e),{detalization:__assign(__assign({},e.detalization),{action:t.action})});case"report/SET_DETALIZATION_REPORT_CURRENT":return __assign(__assign({},e),{detalization:__assign(__assign({},e.detalization),{report:t.report})});case"report/SET_FITCHED_REPORT":return __assign(__assign({},e),{report:t.report,isFetched:!0,isInitialized:!0});case"report/SET_USER_REPORT":var i=!1,a=e.report.map((function(e){return e.user.ID==t.report.user.ID?(i=!0,t.report):e}));return i||a.push(t.report),__assign(__assign({},e),{report:a});case"report/SET_FITCHED_CALLINGS":return __assign(__assign({},e),{calling:t.callings});case"report/SET_CHANGED_DATE":var c=e.date["".concat(t.typeOfDate)]===t.value;return __assign(__assign({},e),{date:__assign(__assign({},e.date),(r={},r["".concat(t.typeOfDate)]=t.value,r)),isFetched:c});case"report/SET_CURRENT_DATE":var u=e.date[o.FROM]!==t.from||e.date[o.TO]==t.to;return __assign(__assign({},e),{date:__assign(__assign({},e.date),(n={},n[o.FROM]=t.from,n[o.TO]=t.to,n)),isFetched:!u});case"report/SET_CURRENT_ACTIONS":return __assign(__assign({},e),{actions:__assign(__assign({},e.actions),{current:t.actions})});default:return e}}},7585:(e,t,r)=>{r.d(t,{IF:()=>o,Nd:()=>d,XW:()=>l,c4:()=>s,ln:()=>n,op:()=>p});var n,o,i=r(8981),a=r(882),__assign=function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},__assign.apply(this,arguments)};!function(e){e.GLOBAL="global",e.KONSTRUCTOR="konstructor",e.PRODUCTS="products",e.TEMPLATE="template",e.DOCUMENT="document",e.REPORT="report",e.CALLING="calling",e.TRANSKRIBATION="transcribation",e.FINISH="finish"}(n||(n={})),function(e){e.KONSTRUCTOR="konstructor",e.REPORT="report",e.CALLING="calling",e.TRANSKRIBATION="transcribation"}(o||(o={}));var c={routes:[{id:0,name:"Начальные настройки",route:n.GLOBAL},{id:1,name:"Конструктор",route:n.KONSTRUCTOR},{id:2,name:"Цены и сравнение комплектов",route:n.PRODUCTS},{id:3,name:"Выбор Шаблона",route:n.TEMPLATE},{id:4,name:"Документ",route:n.DOCUMENT},{id:5,name:"Отчет",route:n.REPORT},{id:6,name:"Звонки",route:n.CALLING},{id:7,name:"Транскрибация",route:n.TRANSKRIBATION},{id:8,name:"Финиш",route:n.FINISH}],current:{id:0,name:"Начальные настройки",route:n.GLOBAL},previous:null,next:null},u=function setCurrentRoute(e){return{type:"router/SET_CURRENT",id:e}},l=function setInitialRoute(e,t){return function(r,i){var a=i().rows.sets.general[0];switch(e){case o.KONSTRUCTOR:r(s(t&&a?n.DOCUMENT:n.GLOBAL));break;case o.CALLING:r(s(n.CALLING));break;case o.REPORT:r(s(n.REPORT));break;case o.TRANSKRIBATION:r(s(n.TRANSKRIBATION))}}},s=function navigate(e){return function(t,r){console.log("navigate "+e);var n=r().router.routes.find((function(t){return t.route===e}));if(n){var o=n.id;t(u(o))}t((0,i.te)(!1))}},p=function back(){return function(e,t){var r=t(),o=r.router.routes,i=r.router.current,c=(r.router.previous,null),l=null;if(i)switch(null==i?void 0:i.route){case n.KONSTRUCTOR:l=n.GLOBAL;break;case n.PRODUCTS:l=n.KONSTRUCTOR;break;case n.DOCUMENT:e((0,a.XH)()),l=n.PRODUCTS;break;case n.REPORT:l=n.REPORT;break;case n.CALLING:l=n.CALLING}if(l&&(c=o.find((function(e){return e.route===l}))),c){var s=c.id;e(u(s))}}},d=function router(e,t){if(void 0===e&&(e=c),"router/SET_CURRENT"===t.type){var r=e.routes.find((function(e){return e.id==t.id})),n=e.current,o=e.previous;return r?__assign(__assign({},e),{current:r,previous:n,next:o}):e}return e}},5105:(e,t,r)=>{r.d(t,{Z:()=>x});var n=r(4890),o=r(3894),i=r(3095),a=r(1625),c=r(1418),u=r(8981),l=r(3138),s=r(4115),p=r(7097),d=r(3535),f=r(7998),T=r(8203),v=r(1132),b=r(826),y=r(4952),O=r(7975),E=r(283),R=r(6457),m=r(5926),g=r(2561),_=r(8286),h=r(538),S=r(3780),I=r(7413),D=r(2658),P=r(4470),N=r(6630),L=r(6814),C=r(9163),A=r(786),w=r(7585),F=r(350),j=r(1324),U=r(8307),k=r(3077),Z=r(4618),M=r(7968),G=(0,n.UY)({app:a.ZP,display:k.ZP,router:w.Nd,global:i.ZP,preloader:u.ZP,currentComplect:l.BL,profs:s.Z,universals:p.Z,od:d.od,infoblocks:f.ZP,encyclopedias:T.ZP,consalting:v.ZP,legalTech:b.ZP,star:I.ZP,freeBlocks:y.Z,result:O.ZP,price:E.ZP,deal:g.ZP,contract:c.LJ,dealName:m.s,field:_.E,bitrix:h.n,products:R.RB,rows:S.Dw,document:D.t,documentPrice:P.Q6,documentInfoblocks:L.E9,documentInvoice:C.mi,region:Z.Z,remember:N.DE,departament:j.ZP,report:F.ZP,calling:U.ZP,entity:A.ZP,event:M.W});const x=(0,n.MT)(G,(0,n.md)(o.Z))}}]);