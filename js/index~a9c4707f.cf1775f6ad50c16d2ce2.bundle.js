(self.webpackChunkapril_crm=self.webpackChunkapril_crm||[]).push([[260],{2331:(e,t,r)=>{r.d(t,{iY:()=>n});var n="AKfycby3bH62ant92_XJUwZw2iccfDobaEPq_2Wf0K0pi7bAqEiHtIXySYjW3_o2p77ifh1O2A"},7349:(e,t,r)=>{r.d(t,{M:()=>s});var n=r(467),a=r(4756),c=r.n(a),l=r(6266).A.create({baseURL:"https://script.google.com/macros/s",headers:{"content-type":"application/json"}});l.defaults.redirect="follow";var s={get:function get(e){return(0,n.A)(c().mark((function _callee(){var t;return c().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l.get("/".concat(e,"/exec?action=data"));case 3:if(!(t=r.sent).data){r.next=6;break}return r.abrupt("return",t.data);case 6:r.next=10;break;case 8:r.prev=8,r.t0=r.catch(0);case 10:case"end":return r.stop()}}),_callee,null,[[0,8]])})))()},incrementParticipants:function incrementParticipants(e){return(0,n.A)(c().mark((function _callee2(){var t;return c().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l.get("/".concat(e,"/exec?action=incrementParticipants"));case 3:if(!(t=r.sent).data){r.next=6;break}return r.abrupt("return",t.data);case 6:r.next=10;break;case 8:r.prev=8,r.t0=r.catch(0);case 10:case"end":return r.stop()}}),_callee2,null,[[0,8]])})))()},incrementDocuments:function incrementDocuments(e){return(0,n.A)(c().mark((function _callee3(){var t;return c().wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l.get("/".concat(e,"/exec?action=incrementDocuments"));case 3:if(!(t=r.sent).data){r.next=6;break}return r.abrupt("return",t.data);case 6:r.next=10;break;case 8:r.prev=8,r.t0=r.catch(0);case 10:case"end":return r.stop()}}),_callee3,null,[[0,8]])})))()}}},4664:(e,t,r)=>{r.d(t,{T:()=>m,c:()=>b});var n,a,c,l,s,o,u=r(4705),p=r(467),i=r(4756),d=r.n(i),f=r(6266).A.create({baseURL:"https://april-hook.ru/api",withCredentials:!0,headers:{"content-type":"application/json",accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),b={getCollection:(c=(0,p.A)(d().mark((function _callee(e,t,r){var n,a,c,l=arguments;return d().wrap((function _callee$(s){for(;;)switch(s.prev=s.next){case 0:if(n=l.length>3&&void 0!==l[3]?l[3]:null,a=null,s.prev=2,n){s.next=9;break}return s.next=6,f[t](e);case 6:s.t0=s.sent,s.next=12;break;case 9:return s.next=11,f[t](e,n);case 11:s.t0=s.sent;case 12:if(!(c=s.t0)){s.next=16;break}return c.data&&0===c.data.resultCode&&c.data[r]&&(a=c.data.isCollection?c.data[r].data:c.data[r]),s.abrupt("return",a);case 16:s.next=21;break;case 18:return s.prev=18,s.t1=s.catch(2),s.abrupt("return",a);case 21:case"end":return s.stop()}}),_callee,null,[[2,18]])}))),function getCollection(e,t,r){return c.apply(this,arguments)}),setCollection:(a=(0,p.A)(d().mark((function _callee2(e,t){var r,n,a;return d().wrap((function _callee2$(c){for(;;)switch(c.prev=c.next){case 0:return r=null,c.prev=1,n=(0,u.A)({},e,t),c.next=5,f.post(e,n);case 5:return(a=c.sent)&&0===a.data.resultCode&&(r=a.data.data),c.abrupt("return",r);case 10:return c.prev=10,c.t0=c.catch(1),c.abrupt("return",r);case 13:case"end":return c.stop()}}),_callee2,null,[[1,10]])}))),function setCollection(e,t){return a.apply(this,arguments)}),service:(n=(0,p.A)(d().mark((function _callee3(e,t,r,n){var a,c;return d().wrap((function _callee3$(l){for(;;)switch(l.prev=l.next){case 0:return a=null,l.prev=1,console.log("hook api"),l.next=5,f[t](e,n);case 5:return c=l.sent,console.log(c),c&&c.data&&0===c.data.resultCode&&(a=c.data[r]),l.abrupt("return",a);case 11:return l.prev=11,l.t0=l.catch(1),l.abrupt("return",a);case 14:case"end":return l.stop()}}),_callee3,null,[[1,11]])}))),function service(e,t,r,a){return n.apply(this,arguments)})},m={create:(o=(0,p.A)(d().mark((function _callee4(e,t,r,n,a,c,l,s,o,u,p,i,b,m){var _,v,g;return d().wrap((function _callee4$(d){for(;;)switch(d.prev=d.next){case 0:return _=null,v={type:e,auth:{domain:t},company_id:r,deadline:n,responsible:a,created:c,name:l,comment:s,crm:o,company:u,smart:p,sale:i,isOneMore:b,placement:m},d.prev=2,d.next=5,f.post("task/warm",v);case 5:return(g=d.sent)&&g.data&&0===g.data.resultCode&&(_=g.data),d.abrupt("return",_);case 10:return d.prev=10,d.t0=d.catch(2),d.abrupt("return",_);case 13:case"end":return d.stop()}}),_callee4,null,[[2,10]])}))),function create(e,t,r,n,a,c,l,s,u,p,i,d,f,b){return o.apply(this,arguments)}),fail:(s=(0,p.A)(d().mark((function _callee5(e,t,r,n,a){var c,l,s;return d().wrap((function _callee5$(o){for(;;)switch(o.prev=o.next){case 0:return c=null,l={auth:{domain:e},company_id:t,placement:r,smart:a,responsible:n},console.log("fail"),console.log(l),o.prev=4,o.next=7,f.post("task/fail",l);case 7:return(s=o.sent)&&s.data&&0===s.data.resultCode&&(c=s.data.result),o.abrupt("return",c);case 12:return o.prev=12,o.t0=o.catch(4),o.abrupt("return",c);case 15:case"end":return o.stop()}}),_callee5,null,[[4,12]])}))),function fail(e,t,r,n,a){return s.apply(this,arguments)}),presentationDone:(l=(0,p.A)(d().mark((function _callee6(e,t,r,n,a,c,l){var s,o,u;return d().wrap((function _callee6$(p){for(;;)switch(p.prev=p.next){case 0:return s=null,o={auth:{domain:e},company_id:t,placement:r,company:a,smart:c,responsibleId:n,isUnplannedPresentation:l},console.log("presentation/done"),console.log(o),p.prev=4,p.next=7,f.post("presentation/done",o);case 7:return(u=p.sent)&&u.data&&0===u.data.resultCode&&(s=u.data.result),p.abrupt("return",s);case 12:return p.prev=12,p.t0=p.catch(4),p.abrupt("return",s);case 15:case"end":return p.stop()}}),_callee6,null,[[4,12]])}))),function presentationDone(e,t,r,n,a,c,s){return l.apply(this,arguments)})}},9002:(e,t,r)=>{r.d(t,{o_:()=>y});var n=r(467),a=r(4705),c=r(4756),l=r.n(c),s=r(8205),o=r(1715),u=r(6266);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,a.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=u.A.create({baseURL:s.R4?"http://localhost:8000/api":"https://april-online.ru/api",withCredentials:!0,headers:(0,a.A)((0,a.A)((0,a.A)({"content-type":"application/json",accept:"application/json"},"accept","application/json"),"X-Requested-With","XMLHttpRequest"),"X-API-KEY","e0336d3b27299e405a344d2475627c5810eab829a4e5c1214e452e20519d5984")});u.A.create({baseURL:s.R4?"http://localhost:8000":"https://april-online.ru",withCredentials:!0,headers:{"content-type":"application/json",accept:"application/json","X-Requested-With":"XMLHttpRequest"}});_=(0,n.A)(l().mark((function _callee3(){var e,t,r;return l().wrap((function _callee3$(n){for(;;)switch(n.prev=n.next){case 0:return e=null,n.prev=1,n.next=4,p.get("profile");case 4:return t=n.sent,(r=t.data)&&(0===r.resultCode?e=r.deal:r.message),n.abrupt("return",e);case 10:return n.prev=10,n.t0=n.catch(1),n.abrupt("return",e);case 13:case"end":return n.stop()}}),_callee3,null,[[1,10]])}))),m=(0,n.A)(l().mark((function _callee4(e){var t,r;return l().wrap((function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:return t=null,n.prev=1,n.next=4,p.post("deal",_objectSpread({},e));case 4:return(r=n.sent)&&(0===r.resultCode?t=r.deal:r.message),n.abrupt("return",t);case 9:return n.prev=9,n.t0=n.catch(1),n.abrupt("return",t);case 12:case"end":return n.stop()}}),_callee4,null,[[1,9]])}))),b=(0,n.A)(l().mark((function _callee5(e,t){var r,n,a;return l().wrap((function _callee5$(c){for(;;)switch(c.prev=c.next){case 0:return r=null,c.prev=1,c.next=4,p.post("getDeal",{dealId:e,domain:t});case 4:return n=c.sent,(a=n.data)&&0===a.resultCode&&(r=a.deal),c.abrupt("return",r);case 10:return c.prev=10,c.t0=c.catch(1),c.abrupt("return",r);case 13:case"end":return c.stop()}}),_callee5,null,[[1,10]])}))),f=(0,n.A)(l().mark((function _callee6(e,t,r,n,a){var c,s,o,u;return l().wrap((function _callee6$(l){for(;;)switch(l.prev=l.next){case 0:return c=null,l.prev=1,l.next=4,p.post("getDescription",{domain:e,userId:t,complect:r,infoblocks:n,groups:a});case 4:if(!(s=l.sent)||!s.data||0!==s.data.resultCode){l.next=9;break}return o=s.data.file,u=s.data.fileBase64,l.abrupt("return",{link:o,file:u});case 9:l.next=14;break;case 11:return l.prev=11,l.t0=l.catch(1),l.abrupt("return",c);case 14:case"end":return l.stop()}}),_callee6,null,[[1,11]])}))),d=(0,n.A)(l().mark((function _callee7(e,t,r,n,a){var c,s;return l().wrap((function _callee7$(l){for(;;)switch(l.prev=l.next){case 0:return c=null,l.prev=1,l.next=4,p.post("get/offer",{domain:e,userId:t,complect:r,infoblocks:n,groups:a});case 4:(s=l.sent)&&s.data&&s.data.resultCode,l.next=11;break;case 8:return l.prev=8,l.t0=l.catch(1),l.abrupt("return",c);case 11:case"end":return l.stop()}}),_callee7,null,[[1,8]])}))),i=(0,n.A)(l().mark((function _callee8(e,t,r){var n,a;return l().wrap((function _callee8$(r){for(;;)switch(r.prev=r.next){case 0:return n=null,r.prev=1,r.next=4,p.post("get/offer",{domain:e,userId:t,complect,infoblocks,groups});case 4:(a=r.sent)&&a.data&&a.data.resultCode,r.next=11;break;case 8:return r.prev=8,r.t0=r.catch(1),r.abrupt("return",n);case 11:case"end":return r.stop()}}),_callee8,null,[[1,8]])})));var i,d,f,b,m,_,v,g,x,h,w,y={getCollection:(x=(0,n.A)(l().mark((function _callee9(e,t,r,n){var a,c;return l().wrap((function _callee9$(l){for(;;)switch(l.prev=l.next){case 0:if(a=null,l.prev=1,n){l.next=8;break}return l.next=5,p[t](e);case 5:l.t0=l.sent,l.next=11;break;case 8:return l.next=10,p[t](e,n);case 10:l.t0=l.sent;case 11:if(!(c=l.t0)){l.next=15;break}return c.data&&0===c.data.resultCode&&c.data[r]&&(a=c.data.isCollection?c.data[r].data:c.data[r]),l.abrupt("return",a);case 15:l.next=20;break;case 17:return l.prev=17,l.t1=l.catch(1),l.abrupt("return",a);case 20:case"end":return l.stop()}}),_callee9,null,[[1,17]])}))),function getCollection(e,t,r,n){return x.apply(this,arguments)}),setCollection:(g=(0,n.A)(l().mark((function _callee10(e,t){var r,n,c;return l().wrap((function _callee10$(l){for(;;)switch(l.prev=l.next){case 0:return r=null,l.prev=1,n=(0,a.A)({},e,t),l.next=5,p.post(e,n);case 5:return(c=l.sent)&&0===c.data.resultCode&&(r=c.data.data),l.abrupt("return",r);case 10:return l.prev=10,l.t0=l.catch(1),l.abrupt("return",r);case 13:case"end":return l.stop()}}),_callee10,null,[[1,10]])}))),function setCollection(e,t){return g.apply(this,arguments)}),service:(v=(0,n.A)(l().mark((function _callee11(e,t,r,n){var a,c;return l().wrap((function _callee11$(l){for(;;)switch(l.prev=l.next){case 0:return a=null,l.prev=1,l.next=4,p[t](e,n);case 4:return(c=l.sent)&&c.data&&(0===c.data.resultCode?a=c.data.data?c.data.data[r]:c.data[r]:1===c.data.resultCode&&(c.data.message?console.log("".concat(r," ").concat(c.data.message)):console.log(c))),l.abrupt("return",a);case 9:return l.prev=9,l.t0=l.catch(1),l.abrupt("return",a);case 12:case"end":return l.stop()}}),_callee11,null,[[1,9]])}))),function service(e,t,r,n){return v.apply(this,arguments)})},A=(h=(0,n.A)(l().mark((function _callee12(e,t,r,n,c,s,u,i,d,f,b,m,_,v,g,x,h,w){var y,A,I,C,k,R,P,S,O,D,E,j;return l().wrap((function _callee12$(l){for(;;)switch(l.prev=l.next){case 0:return I=null,C={FIELDS:(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)({},v.dealName.bitrixId,"".concat(t)),v.assigned.bitrixId,r),v.category.bitrixId,v.category.value),v.stage.bitrixId,v.stage.value),v.opened.bitrixId,v.opened.value),"PROBABILITY",30),"OPPORTUNITY",0),"CURRENCY_ID","RUB"),"UF_CRM_5B39D7C2EC0AB",!0),PARAMS:{REGISTER_SONET_EVENT:"Y"}},k=isNaN(+x.contractSupplyPropSuppliesQuantity)?1:+x.contractSupplyPropSuppliesQuantity,R=h?h.contractConsaltingProp:x.contractConsaltingProp,P=h?h.contractConsaltingComment:x.contractConsaltingComment,S={id:n,fields:(y={},(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(y,_.contract.bitrixId,c),_.companyId.bitrixId,s),_.npa.bitrixId,u.npa),_.la.bitrixId,u.la),_.c.bitrixId,u.c),_.sp.bitrixId,u.sp),_.er.bitrixId,i.er),_.per.bitrixId,i.per),_.erinpac.bitrixId,i.erinpac),_.lt.bitrixId,f.lt),(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(y,_.plt.bitrixId,f.plt),_.ltinpac.bitrixId,f.ltinpac),_.freeBlocks.bitrixId,d),_.consalting.bitrixId,b),_.field_14.bitrixId,m),v.category.bitrixId,v.category.value),v.stage.bitrixId,"C".concat(v.category.value,":NEW"))),PARAMS:{REGISTER_SONET_EVENT:"Y"}},O={id:n,fields:(A={},(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(A,g.complectName.bitrixId,x.name),g.abonementTime.bitrixId,1===x.contractCoefficient?null:x.contractCoefficient),g.consalting.bitrixId,R),g.note2.bitrixId,P),g.hdd.bitrixId,x.contractSupplyProp1?x.contractSupplyProp1:""),g.way.bitrixId,x.contractSupplyProp2?x.contractSupplyProp2:""),g.note.bitrixId,x.contractSupplyPropComment?x.contractSupplyPropComment:""),g.note3.bitrixId,x.contractSupplyPropEmail?x.contractSupplyPropEmail:""),g.supply.bitrixId,x.supplyName?x.supplyName:""),g.supplyForContract.bitrixId,x.contractSupplyName?x.contractSupplyName:""),(0,a.A)((0,a.A)((0,a.A)((0,a.A)(A,g.loginsQuantity.bitrixId,x.contractSupplyPropLoginsQuantity?x.contractSupplyPropLoginsQuantity:""),g.contractSupplyPropSuppliesQuantity.bitrixId,k),g.supplyForContract.bitrixId,x.contractSupplyName),g.field_1.bitrixId,x.quantityForKp))},D=w.map((function(e,t){var r=e.prepayment,a=e.price.current,c=e.price.default,l=c-a;return{id:e.id||e.number,priceNetto:c,price:a,discountSum:l,discountTypeId:1,ownerId:n,ownerType:"D",productName:"".concat(e.name," ").concat(e.supply.name),quantity:e.price.quantity||r,customized:"Y",supply:e.supplyName,measureCode:e.price.measure.code,measureId:e.price.measure.id,sort:t}})),E={domain:e,dealId:n,setDealData:C,updateDealInfoblocksData:S,updateDealContractData:O,setProductRowsData:{ownerType:"D",ownerId:n,productRows:D},updateProductRowsData:{id:null,fields:{priceNetto:null,price:null,discountSum:null,discountTypeId:1}}},l.prev=11,l.next=14,p[o.b.POST]("konstructor/bitrix/deal/update",E);case 14:return(j=l.sent)&&j.data&&(0===j.data.resultCode?j.data.data&&(I=j.data.data.dealId):1===j.data.resultCode&&(j.data.message?console.log("".concat(j.data.message)):console.log(j))),l.abrupt("return",I);case 19:return l.prev=19,l.t0=l.catch(11),l.abrupt("return",I);case 22:case"end":return l.stop()}}),_callee12,null,[[11,19]])}))),u.A.create({baseURL:"http://localhost:8000/api",withCredentials:!0,headers:{"content-type":"application/json",accept:"application/json","X-Requested-With":"XMLHttpRequest"}}));w=(0,n.A)(l().mark((function _callee13(e,t,r,n){var a,c;return l().wrap((function _callee13$(l){for(;;)switch(l.prev=l.next){case 0:return a=null,l.prev=1,l.next=4,A[t](e,n);case 4:return(c=l.sent)&&c.data&&(0===c.data.resultCode?a=c.data.data?c.data.data[r]:c.data[r]:1===c.data.resultCode&&(c.data.message?console.log("".concat(r," ").concat(c.data.message)):console.log(c))),l.abrupt("return",a);case 9:return l.prev=9,l.t0=l.catch(1),l.abrupt("return",a);case 12:case"end":return l.stop()}}),_callee13,null,[[1,9]])})))},4003:(e,t,r)=>{r.d(t,{l:()=>y});var n=r(467),a=r(4705),c=r(4756),l=r.n(c),s=r(3953);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,a.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var o,u,p,i,d,f,b,m,_,v,g,x,h,w,y={getPlacement:(w=(0,n.A)(l().mark((function _callee(){var e;return l().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.ot.info();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),_callee)}))),function getPlacement(){return w.apply(this,arguments)}),getCompanyId:(h=(0,n.A)(l().mark((function _callee2(){var e,t;return l().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,y.getPlacement();case 3:return e=r.sent,t=e.options.ID,r.abrupt("return",Number(t));case 8:return r.prev=8,r.t0=r.catch(0),r.abrupt("return",null);case 11:case"end":return r.stop()}}),_callee2,null,[[0,8]])}))),function getCompanyId(){return h.apply(this,arguments)}),getCurrentUserId:(x=(0,n.A)(l().mark((function _callee3(e){var t,r;return l().wrap((function _callee3$(n){for(;;)switch(n.prev=n.next){case 0:return t=null,n.next=3,(0,s.g9)("crm.company.get",{id:e});case 3:return r=(r=n.sent).answer&&r.answer.result,t=r?r.ASSIGNED_BY_ID:null,n.abrupt("return",t);case 7:case"end":return n.stop()}}),_callee3)}))),function getCurrentUserId(e){return x.apply(this,arguments)}),getCurrentUser:(g=(0,n.A)(l().mark((function _callee4(){var e,t;return l().wrap((function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:return e=null,r.prev=1,r.next=4,(0,s.g9)("user.current");case 4:return(t=r.sent)&&t.answer&&t.answer.result&&t.answer.result.ID&&(e=t.answer.result),r.abrupt("return",e);case 9:return r.prev=9,r.t0=r.catch(1),console.log(r.t0),r.abrupt("return",null);case 13:case"end":return r.stop()}}),_callee4,null,[[1,9]])}))),function getCurrentUser(){return g.apply(this,arguments)}),getResize:(v=(0,n.A)(l().mark((function _callee5(){var e,t;return l().wrap((function _callee5$(r){for(;;)switch(r.prev=r.next){case 0:return e=.9*window.screen.height,t=.73*window.screen.width,r.next=5,(0,s.Ru)(t,e);case 5:r.sent;case 6:case"end":return r.stop()}}),_callee5)}))),function getResize(){return v.apply(this,arguments)}),getResizeCalling:(_=(0,n.A)(l().mark((function _callee6(){return l().wrap((function _callee6$(e){for(;;)switch(e.prev=e.next){case 0:return window.screen.height,window.screen.width,e.next=5,(0,s.eQ)();case 5:e.sent;case 6:case"end":return e.stop()}}),_callee6)}))),function getResizeCalling(){return _.apply(this,arguments)}),getScroll:(m=(0,n.A)(l().mark((function _callee7(){var e,t;return l().wrap((function _callee7$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,console.log("scroll"),r.next=4,(0,s.TC)();case 4:return e=r.sent,console.log(e),r.next=8,(0,s.OO)(100);case 8:t=r.sent,console.log(t),r.next=14;break;case 12:r.prev=12,r.t0=r.catch(0);case 14:case"end":return r.stop()}}),_callee7,null,[[0,12]])}))),function getScroll(){return m.apply(this,arguments)}),getLead:(b=(0,n.A)(l().mark((function _callee8(e){var t,r;return l().wrap((function _callee8$(n){for(;;)switch(n.prev=n.next){case 0:return t=null,console.log("crm.lead.get"),n.prev=2,n.next=5,s.g9("crm.lead.get",{id:e});case 5:return(r=n.sent)&&r.answer&&r.answer.result&&(t=r.answer.result,console.log(t)),n.abrupt("return",t);case 10:return n.prev=10,n.t0=n.catch(2),console.log("error"),console.log(dealResponse),console.log(n.t0),n.abrupt("return",t);case 16:case"end":return n.stop()}}),_callee8,null,[[2,10]])}))),function getLead(e){return b.apply(this,arguments)}),getCompany:(f=(0,n.A)(l().mark((function _callee9(e){var t,r;return l().wrap((function _callee9$(n){for(;;)switch(n.prev=n.next){case 0:return t=null,console.log("crm.company.get"),n.prev=2,n.next=5,s.g9("crm.company.get",{id:e,select:["TITLE","ID","UF_CRM_1706007840","UF_CRM_1706007882","UF_CRM_1706007856"]});case 5:return(r=n.sent)&&r.answer&&r.answer.result&&(t=r.answer.result,console.log(t)),n.abrupt("return",t);case 10:return n.prev=10,n.t0=n.catch(2),console.log("error"),console.log(dealResponse),console.log(n.t0),n.abrupt("return",t);case 16:case"end":return n.stop()}}),_callee9,null,[[2,10]])}))),function getCompany(e){return f.apply(this,arguments)}),getDeal:(d=(0,n.A)(l().mark((function _callee10(e){var t,r;return l().wrap((function _callee10$(n){for(;;)switch(n.prev=n.next){case 0:return t=null,n.prev=1,n.next=4,s.g9("crm.deal.get",{id:e,select:["TITLE","COMPANY_ID","ID","UF_CRM_1695372881","UF_CRM_1695373462","UF_CRM_1695373326"]});case 4:return(r=n.sent)&&r.answer&&r.answer.result&&(t=r.answer.result),n.abrupt("return",t);case 9:return n.prev=9,n.t0=n.catch(1),console.log("error"),console.log(dealResponse),console.log(n.t0),n.abrupt("return",t);case 15:case"end":return n.stop()}}),_callee10,null,[[1,9]])}))),function getDeal(e){return d.apply(this,arguments)}),getDealAndCompany:(i=(0,n.A)(l().mark((function _callee11(){var e,t,r,n,a=arguments;return l().wrap((function _callee11$(c){for(;;)switch(c.prev=c.next){case 0:if(e=a.length>0&&void 0!==a[0]?a[0]:null,t=a.length>1&&void 0!==a[1]?a[1]:null,c.prev=2,r=null,n=null,t||!e){c.next=16;break}return c.next=8,y.getDeal(e);case 8:if(!(r=c.sent)||!r.COMPANY_ID){c.next=14;break}return t=r.COMPANY_ID,c.next=13,y.getCompany(t);case 13:n=c.sent;case 14:c.next=21;break;case 16:if(!t||e){c.next=21;break}return c.next=19,y.getCompany(t);case 19:n=c.sent,r&&r.COMPANY_ID&&(t=r.COMPANY_ID);case 21:return console.log("dealResult"),console.log(r),console.log("currentCompanyId"),console.log(t),console.log("Результаты batch запроса:"),console.log("Компания:",n),console.log("Сделка:",r),c.abrupt("return",{company:n,deal:r});case 31:return c.prev=31,c.t0=c.catch(2),console.error("Произошла ошибка при выполнении запроса",c.t0),c.abrupt("return",{company:null,deal:null});case 35:case"end":return c.stop()}}),_callee11,null,[[2,31]])}))),function getDealAndCompany(){return i.apply(this,arguments)}),getSmart:(p=(0,n.A)(l().mark((function _callee12(e){var t,r;return l().wrap((function _callee12$(n){for(;;)switch(n.prev=n.next){case 0:return t=null,$method="/crm.item.list.json",$data={entityTypeId:e,filter:{"=assignedById":$userId,COMPANY_ID:$companyId}},n.prev=3,n.next=6,s.g9("crm.item.list",{id:dealId});case 6:return(r=n.sent)&&r.answer&&r.answer.result&&(t=r.answer.result.items),n.abrupt("return",t);case 11:return n.prev=11,n.t0=n.catch(3),console.log("error"),console.log(dealResponse),console.log(n.t0),n.abrupt("return",t);case 17:case"end":return n.stop()}}),_callee12,null,[[3,11]])}))),function getSmart(e){return p.apply(this,arguments)}),getDomain:(u=(0,n.A)(l().mark((function _callee13(){var e;return l().wrap((function _callee13$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.xI();case 2:return t.sent,t.next=5,s.FB();case 5:return e=t.sent,t.abrupt("return",e);case 7:case"end":return t.stop()}}),_callee13)}))),function getDomain(){return u.apply(this,arguments)}),updateRecipient:(o=(0,n.A)(l().mark((function _callee14(e,t,r,n,a){var c,o,u,p,i,d,f,b,m;return l().wrap((function _callee14$(l){for(;;)switch(l.prev=l.next){case 0:if(!e&&!t){l.next=28;break}if(!(r||n||a)){l.next=28;break}return c={},o={},r&&(c.UF_CRM_1706007840=r,o.UF_CRM_1695372881=r),n&&(c.UF_CRM_1706007856=n,o.UF_CRM_1695373326=n),a&&(c.UF_CRM_1706007882=a,o.UF_CRM_1695373462=a),u={ID:e,FIELDS:_objectSpread({},o),PARAMS:{REGISTER_SONET_EVENT:"Y"}},p={ID:t,FIELDS:_objectSpread({},c),PARAMS:{REGISTER_SONET_EVENT:"Y"}},i="crm.company.update",d=null,f=null,l.prev=13,l.next=16,s.g9("crm.deal.update",_objectSpread({},u));case 16:return b=l.sent,l.next=19,s.g9(i,_objectSpread({},p));case 19:return m=l.sent,d=b.answer&&b.answer.result,f=m.answer&&m.answer.result,l.abrupt("return",{deal:d,company:f});case 25:return l.prev=25,l.t0=l.catch(13),l.abrupt("return",d);case 28:case"end":return l.stop()}}),_callee14,null,[[13,25]])}))),function updateRecipient(e,t,r,n,a){return o.apply(this,arguments)})}},1715:(e,t,r)=>{var n,a;r.d(t,{b:()=>n}),function(e){e.GET="get",e.POST="post",e.PUT="put",e.DELETE="delete"}(n||(n={})),function(e){e.ENTITY="entity",e.ENTITIES="entities"}(a||(a={}))}},e=>{e.O(0,[227,610,945,996,248,644,484,214],(()=>{return t=5873,e(e.s=t);var t}));e.O()}]);